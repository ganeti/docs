<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.cmdlib.IAllocator</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.cmdlib-module.html">Module&nbsp;cmdlib</a> ::
        Class&nbsp;IAllocator
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.cmdlib.IAllocator-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class IAllocator</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_ganeti_c_21" name="uml_class_diagram_for_ganeti_c_21">
<area shape="rect" href="ganeti.cmdlib.IAllocator-class.html#__init__" title="x.__init__(...) initializes x; see x.__class__.__doc__ for signature" alt="" coords="17,36,292,55"/>
<area shape="rect" href="ganeti.cmdlib.IAllocator-class.html#Run" title="Run an instance allocator and return the results." alt="" coords="17,55,292,73"/>
<area shape="rect" href="ganeti.cmdlib.IAllocator-class.html" title="IAllocator framework." alt="" coords="16,11,293,75"/>
</map>
  <img src="uml_class_diagram_for_ganeti_c_21.gif" alt='' usemap="#uml_class_diagram_for_ganeti_c_21" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>IAllocator framework.</p>
  <p>An IAllocator instance has three sets of attributes:</p>
  <ul>
    <li>
      cfg that is needed to query the cluster
    </li>
    <li>
      input data (all members of the _KEYS class attribute are required)
    </li>
    <li>
      four buffer attributes (in|out_data|text), that represent the input 
      (to the external script) in text and data structure format, and the 
      output from it, again in two formats
    </li>
    <li>
      the result variables from the script (success, info, nodes) for easy 
      usage
    </li>
  </ul>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">rpc_runner</span>,
        <span class="summary-sig-arg">mode</span>,
        <span class="summary-sig-arg">**kwargs</span>)</span><br />
      x.__init__(...) initializes x; see x.__class__.__doc__ for signature</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#_ComputeClusterData" class="summary-sig-name" onclick="show_private();">_ComputeClusterData</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Compute the generic allocator input data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeClusterData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#_AddNewInstance" class="summary-sig-name" onclick="show_private();">_AddNewInstance</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Add new instance data to allocator structure.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._AddNewInstance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#_AddRelocateInstance" class="summary-sig-name" onclick="show_private();">_AddRelocateInstance</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Add relocate instance data to allocator structure.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._AddRelocateInstance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_AddNodeEvacuate"></a><span class="summary-sig-name">_AddNodeEvacuate</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Get data for node-evacuate requests.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._AddNodeEvacuate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_AddChangeGroup"></a><span class="summary-sig-name">_AddChangeGroup</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Get data for node-evacuate requests.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._AddChangeGroup">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_BuildInputData"></a><span class="summary-sig-name">_BuildInputData</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">fn</span>,
        <span class="summary-sig-arg">keydata</span>)</span><br />
      Build input data structures.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._BuildInputData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="Run"></a><span class="summary-sig-name">Run</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">validate</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">call_fn</span>=<span class="summary-sig-default">None</span>)</span><br />
      Run an instance allocator and return the results.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator.Run">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#_ValidateResult" class="summary-sig-name" onclick="show_private();">_ValidateResult</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Process the allocator results.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ValidateResult">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== STATIC METHODS ==================== -->
<a name="section-StaticMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Static Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-StaticMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_ComputeNodeGroupData"></a><span class="summary-sig-name">_ComputeNodeGroupData</span>(<span class="summary-sig-arg">cfg</span>)</span><br />
      Compute node groups data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeNodeGroupData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#_ComputeBasicNodeData" class="summary-sig-name" onclick="show_private();">_ComputeBasicNodeData</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">node_cfg</span>)</span><br />
      Compute global node data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeBasicNodeData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#_ComputeDynamicNodeData" class="summary-sig-name" onclick="show_private();">_ComputeDynamicNodeData</a>(<span class="summary-sig-arg">node_cfg</span>,
        <span class="summary-sig-arg">node_data</span>,
        <span class="summary-sig-arg">node_iinfo</span>,
        <span class="summary-sig-arg">i_list</span>,
        <span class="summary-sig-arg">node_results</span>)</span><br />
      Compute global node data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeDynamicNodeData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_ComputeInstanceData"></a><span class="summary-sig-name">_ComputeInstanceData</span>(<span class="summary-sig-arg">cluster_info</span>,
        <span class="summary-sig-arg">i_list</span>)</span><br />
      Compute global instance data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeInstanceData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.IAllocator-class.html#_NodesToGroups" class="summary-sig-name" onclick="show_private();">_NodesToGroups</a>(<span class="summary-sig-arg">node2group</span>,
        <span class="summary-sig-arg">groups</span>,
        <span class="summary-sig-arg">nodes</span>)</span><br />
      Returns a list of unique group names for a list of nodes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._NodesToGroups">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="_STRING_LIST"></a><span class="summary-name">_STRING_LIST</span> = <code title="ht.TListOf(ht.TString)">ht.TListOf(ht.TString)</code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.cmdlib.IAllocator-class.html#_JOB_LIST" class="summary-name" onclick="show_private();">_JOB_LIST</a> = <code title="ht.TListOf(ht.TListOf(ht.TStrictDict(True, False, {&quot;OP_ID&quot;: ht.TElemOf\
([opcodes.OpInstanceFailover.OP_ID, opcodes.OpInstanceMigrate.OP_ID, o\
pcodes.OpInstanceReplaceDisks.OP_ID])})))">ht.TListOf(ht.TListOf(ht.TStrictDict(True, False, <code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.cmdlib.IAllocator-class.html#_NEVAC_MOVED" class="summary-name" onclick="show_private();">_NEVAC_MOVED</a> = <code title="ht.TListOf(ht.TAnd(ht.TIsLength(3), ht.TItems([ht.TNonEmptyString, ht.\
TNonEmptyString, ht.TListOf(ht.TNonEmptyString),])))">ht.TListOf(ht.TAnd(ht.TIsLength(3), ht.TItems([<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.cmdlib.IAllocator-class.html#_NEVAC_FAILED" class="summary-name" onclick="show_private();">_NEVAC_FAILED</a> = <code title="ht.TListOf(ht.TAnd(ht.TIsLength(2), ht.TItems([ht.TNonEmptyString, ht.\
TMaybeString,])))">ht.TListOf(ht.TAnd(ht.TIsLength(2), ht.TItems(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.cmdlib.IAllocator-class.html#_NEVAC_RESULT" class="summary-name" onclick="show_private();">_NEVAC_RESULT</a> = <code title="ht.TAnd(ht.TIsLength(3), ht.TItems([_NEVAC_MOVED, _NEVAC_FAILED, _JOB_\
LIST]))">ht.TAnd(ht.TIsLength(3), ht.TItems([_NEVAC_MOV<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.cmdlib.IAllocator-class.html#_MODE_DATA" class="summary-name" onclick="show_private();">_MODE_DATA</a> = <code title="{constants.IALLOCATOR_MODE_ALLOC:(_AddNewInstance, [(&quot;name&quot;, ht.TStrin\
g), (&quot;memory&quot;, ht.TInt), (&quot;spindle_use&quot;, ht.TInt), (&quot;disks&quot;, ht.TListO\
f(ht.TDict)), (&quot;disk_template&quot;, ht.TString), (&quot;os&quot;, ht.TString), (&quot;tag\
s&quot;, _STRING_LIST), (&quot;nics&quot;, ht.TListOf(ht.TDict)), (&quot;vcpus&quot;, ht.TInt),\
 (&quot;hypervisor&quot;, ht.TString),], ht.TList), constants.IALLOCATOR_MODE_RE\
LOC:(_AddRelocateInstance, [(&quot;name&quot;, ht.TString), (&quot;relocate_from&quot;, _S\
TRING_LIST)], ht.TList), constants.IALLOCATOR_MODE_NODE_EVAC:(_AddNode\
Evacuate, [(&quot;instances&quot;, _STRING_LIST), (&quot;evac_mode&quot;, ht.TElemOf(const\
...">{constants.IALLOCATOR_MODE_ALLOC:(_AddNewInstance<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">cfg</span>,
        <span class="sig-arg">rpc_runner</span>,
        <span class="sig-arg">mode</span>,
        <span class="sig-arg">**kwargs</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>x.__init__(...) initializes x; see x.__class__.__doc__ for 
  signature</p>
  <dl class="fields">
    <dt>Overrides:
        object.__init__
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeClusterData"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeClusterData</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeClusterData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute the generic allocator input data.</p>
  <p>This is the data that is independent of the actual operation.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_ComputeBasicNodeData"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeBasicNodeData</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">node_cfg</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeBasicNodeData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute global node data.</p>
  <dl class="fields">
    <dt>Returns: dict</dt>
        <dd>a dict of name: (node dict, node config)</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeDynamicNodeData"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeDynamicNodeData</span>(<span class="sig-arg">node_cfg</span>,
        <span class="sig-arg">node_data</span>,
        <span class="sig-arg">node_iinfo</span>,
        <span class="sig-arg">i_list</span>,
        <span class="sig-arg">node_results</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ComputeDynamicNodeData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute global node data.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>node_results</code></strong> - the basic node structures as filled from the config</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_AddNewInstance"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_AddNewInstance</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._AddNewInstance">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Add new instance data to allocator structure.</p>
  <p>This in combination with _AllocatorGetClusterData will create the 
  correct structure needed as input for the allocator.</p>
  <p>The checks for the completeness of the opcode must have already been 
  done.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_AddRelocateInstance"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_AddRelocateInstance</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._AddRelocateInstance">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Add relocate instance data to allocator structure.</p>
  <p>This in combination with _IAllocatorGetClusterData will create the 
  correct structure needed as input for the allocator.</p>
  <p>The checks for the completeness of the opcode must have already been 
  done.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_ValidateResult"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ValidateResult</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._ValidateResult">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Process the allocator results.</p>
  <p>This will process and if successful save the result in self.out_data 
  and the other parameters.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_NodesToGroups"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_NodesToGroups</span>(<span class="sig-arg">node2group</span>,
        <span class="sig-arg">groups</span>,
        <span class="sig-arg">nodes</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib-pysrc.html#IAllocator._NodesToGroups">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns a list of unique group names for a list of nodes.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>node2group</code></strong> (dict) - Map from node name to group UUID</li>
        <li><strong class="pname"><code>groups</code></strong> (dict) - Group information</li>
        <li><strong class="pname"><code>nodes</code></strong> (list) - Node names</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_JOB_LIST"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_JOB_LIST</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
ht.TListOf(ht.TListOf(ht.TStrictDict(True, False, {&quot;OP_ID&quot;: ht.TElemOf<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
([opcodes.OpInstanceFailover.OP_ID, opcodes.OpInstanceMigrate.OP_ID, o<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
pcodes.OpInstanceReplaceDisks.OP_ID])})))
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_NEVAC_MOVED"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_NEVAC_MOVED</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
ht.TListOf(ht.TAnd(ht.TIsLength(3), ht.TItems([ht.TNonEmptyString, ht.<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
TNonEmptyString, ht.TListOf(ht.TNonEmptyString),])))
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_NEVAC_FAILED"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_NEVAC_FAILED</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
ht.TListOf(ht.TAnd(ht.TIsLength(2), ht.TItems([ht.TNonEmptyString, ht.<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
TMaybeString,])))
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_NEVAC_RESULT"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_NEVAC_RESULT</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
ht.TAnd(ht.TIsLength(3), ht.TItems([_NEVAC_MOVED, _NEVAC_FAILED, _JOB_<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
LIST]))
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_MODE_DATA"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_MODE_DATA</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
{constants.IALLOCATOR_MODE_ALLOC:(_AddNewInstance, [(&quot;name&quot;, ht.TStrin<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
g), (&quot;memory&quot;, ht.TInt), (&quot;spindle_use&quot;, ht.TInt), (&quot;disks&quot;, ht.TListO<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
f(ht.TDict)), (&quot;disk_template&quot;, ht.TString), (&quot;os&quot;, ht.TString), (&quot;tag<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
s&quot;, _STRING_LIST), (&quot;nics&quot;, ht.TListOf(ht.TDict)), (&quot;vcpus&quot;, ht.TInt),<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
 (&quot;hypervisor&quot;, ht.TString),], ht.TList), constants.IALLOCATOR_MODE_RE<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
LOC:(_AddRelocateInstance, [(&quot;name&quot;, ht.TString), (&quot;relocate_from&quot;, _S<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
TRING_LIST)], ht.TList), constants.IALLOCATOR_MODE_NODE_EVAC:(_AddNode<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
Evacuate, [(&quot;instances&quot;, _STRING_LIST), (&quot;evac_mode&quot;, ht.TElemOf(const<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Jan 18 10:09:31 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
