<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.utils.storage</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.utils-module.html">Package&nbsp;utils</a> ::
        Module&nbsp;storage
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.utils.storage-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module storage</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.utils.storage-pysrc.html">source&nbsp;code</a></span></p>
<p>Utility functions for storage.</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="GetDiskTemplatesOfStorageTypes"></a><span class="summary-sig-name">GetDiskTemplatesOfStorageTypes</span>(<span class="summary-sig-arg">*storage_types</span>)</span><br />
      Given the storage type, returns a list of disk templates based on 
      that storage type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetDiskTemplatesOfStorageTypes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsDiskTemplateEnabled"></a><span class="summary-sig-name">IsDiskTemplateEnabled</span>(<span class="summary-sig-arg">disk_template</span>,
        <span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Checks if a particular disk template is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsDiskTemplateEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsFileStorageEnabled"></a><span class="summary-sig-name">IsFileStorageEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Checks if file storage is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsFileStorageEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsSharedFileStorageEnabled"></a><span class="summary-sig-name">IsSharedFileStorageEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Checks if shared file storage is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsSharedFileStorageEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsLvmEnabled"></a><span class="summary-sig-name">IsLvmEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Check whether or not any lvm-based disk templates are enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsLvmEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="LvmGetsEnabled"></a><span class="summary-sig-name">LvmGetsEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>,
        <span class="summary-sig-arg">new_enabled_disk_templates</span>)</span><br />
      Checks whether lvm was not enabled before, but will be enabled after 
      the operation.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LvmGetsEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#_GetDefaultStorageUnitForDiskTemplate" class="summary-sig-name" onclick="show_private();">_GetDefaultStorageUnitForDiskTemplate</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">disk_template</span>)</span><br />
      Retrieves the identifier of the default storage entity for the given 
      storage type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#_GetDefaultStorageUnitForDiskTemplate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="DiskTemplateSupportsSpaceReporting"></a><span class="summary-sig-name">DiskTemplateSupportsSpaceReporting</span>(<span class="summary-sig-arg">disk_template</span>)</span><br />
      Check whether the disk template supports storage space reporting.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#DiskTemplateSupportsSpaceReporting">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of tuples (string, string)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#GetStorageUnits" class="summary-sig-name">GetStorageUnits</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">disk_templates</span>)</span><br />
      Get the cluster's storage units for the given disk templates.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetStorageUnits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#LookupSpaceInfoByDiskTemplate" class="summary-sig-name">LookupSpaceInfoByDiskTemplate</a>(<span class="summary-sig-arg">storage_space_info</span>,
        <span class="summary-sig-arg">disk_template</span>)</span><br />
      Looks up the storage space info for a given disk template.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LookupSpaceInfoByDiskTemplate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#LookupSpaceInfoByStorageType" class="summary-sig-name">LookupSpaceInfoByStorageType</a>(<span class="summary-sig-arg">storage_space_info</span>,
        <span class="summary-sig-arg">storage_type</span>)</span><br />
      Looks up the storage space info for a given storage type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LookupSpaceInfoByStorageType">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">generator</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#GetDiskLabels" class="summary-sig-name">GetDiskLabels</a>(<span class="summary-sig-arg">prefix</span>,
        <span class="summary-sig-arg">num_disks</span>,
        <span class="summary-sig-arg">start</span>=<span class="summary-sig-default">0</span>)</span><br />
      Generate disk labels for a number of disks</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetDiskLabels">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple(string, list(string)) or NoneType</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#CreateBdevPartitionMapping" class="summary-sig-name">CreateBdevPartitionMapping</a>(<span class="summary-sig-arg">image_path</span>)</span><br />
      Create dm device for each partition of disk image.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#CreateBdevPartitionMapping">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#ReleaseBdevPartitionMapping" class="summary-sig-name">ReleaseBdevPartitionMapping</a>(<span class="summary-sig-arg">loop_dev_path</span>)</span><br />
      Release allocated dm devices and loopback devices.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#ReleaseBdevPartitionMapping">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#osminor" class="summary-sig-name">osminor</a>(<span class="summary-sig-arg">dev</span>)</span><br />
      Return the device minor number from a raw device number.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#osminor">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<p class="indent-wrapped-lines"><b>Imports:</b>
  <span title="logging">logging</span>,
  <a href="ganeti.constants-module.html" title="ganeti.constants">constants</a>,
  <a href="ganeti.errors-module.html" title="ganeti.errors">errors</a>,
  <span title="ganeti.utils.io">utils_io</span>,
  <a href="ganeti.utils.process-module.html" title="ganeti.utils.process">utils_process</a>
</p><br />
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_GetDefaultStorageUnitForDiskTemplate"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetDefaultStorageUnitForDiskTemplate</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">disk_template</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#_GetDefaultStorageUnitForDiskTemplate">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Retrieves the identifier of the default storage entity for the given 
  storage type.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<code>objects.ConfigData</code>) - the configuration data</li>
        <li><strong class="pname"><code>disk_template</code></strong> (string) - a disk template, for example 'drbd'</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>identifier for a storage unit, for example the vg_name for lvm 
          storage</dd>
  </dl>
</td></tr></table>
</div>
<a name="GetStorageUnits"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetStorageUnits</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">disk_templates</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetStorageUnits">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Get the cluster's storage units for the given disk templates.</p>
  <p>If any lvm-based disk template is requested, spindle information is 
  added to the request.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
        <li><strong class="pname"><code>disk_templates</code></strong> (list of string) - list of disk templates for which the storage units will be 
          computed</li>
    </ul></dd>
    <dt>Returns: list of tuples (string, string)</dt>
        <dd>list of storage units, each storage unit being a tuple of 
          (storage_type, storage_key); storage_type is in 
          <code>constants.STORAGE_TYPES</code> and the storage_key a string
          to identify an entity of that storage type, for example a volume 
          group name for LVM storage or a file for file storage.</dd>
  </dl>
</td></tr></table>
</div>
<a name="LookupSpaceInfoByDiskTemplate"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">LookupSpaceInfoByDiskTemplate</span>(<span class="sig-arg">storage_space_info</span>,
        <span class="sig-arg">disk_template</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LookupSpaceInfoByDiskTemplate">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Looks up the storage space info for a given disk template.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>storage_space_info</code></strong> (list of dicts) - result of <code>GetNodeInfo</code></li>
        <li><strong class="pname"><code>disk_template</code></strong> (string) - disk template to get storage space info</li>
    </ul></dd>
    <dt>Returns: tuple</dt>
        <dd>returns the element of storage_space_info that matches the given 
          disk template</dd>
  </dl>
</td></tr></table>
</div>
<a name="LookupSpaceInfoByStorageType"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">LookupSpaceInfoByStorageType</span>(<span class="sig-arg">storage_space_info</span>,
        <span class="sig-arg">storage_type</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LookupSpaceInfoByStorageType">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Looks up the storage space info for a given storage type.</p>
  <p>Note that this lookup can be ambiguous if storage space reporting for 
  several units of the same storage type was requested. This function is 
  only supposed to be used for legacy code in situations where it actually 
  is unambiguous.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>storage_space_info</code></strong> (list of dicts) - result of <code>GetNodeInfo</code></li>
        <li><strong class="pname"><code>storage_type</code></strong> (string) - a storage type, which is included in the storage_units list</li>
    </ul></dd>
    <dt>Returns: tuple</dt>
        <dd>returns the element of storage_space_info that matches the given 
          storage type</dd>
  </dl>
</td></tr></table>
</div>
<a name="GetDiskLabels"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetDiskLabels</span>(<span class="sig-arg">prefix</span>,
        <span class="sig-arg">num_disks</span>,
        <span class="sig-arg">start</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetDiskLabels">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Generate disk labels for a number of disks</p>
  <p>Note that disk labels are generated in the range [start..num_disks[ 
  (e.g., as in range(start, num_disks))</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>prefix</code></strong> (string) - disk label prefix (e.g., &quot;/dev/sd&quot;)</li>
        <li><strong class="pname"><code>num_disks</code></strong> (int) - number of disks (i.e., disk labels)</li>
        <li><strong class="pname"><code>start</code></strong> (int) - optional start index</li>
    </ul></dd>
    <dt>Returns: generator</dt>
        <dd>generator for the disk labels</dd>
  </dl>
</td></tr></table>
</div>
<a name="CreateBdevPartitionMapping"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CreateBdevPartitionMapping</span>(<span class="sig-arg">image_path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#CreateBdevPartitionMapping">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create dm device for each partition of disk image.</p>
  <p>This operation will allocate a loopback and a device-mapper device to 
  map partitions. You must call <a 
  href="ganeti.utils.storage-module.html#ReleaseBdevPartitionMapping" 
  class="link">ReleaseBdevPartitionMapping</a> to clean up resources 
  allocated by this function call.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>image_path</code></strong> (string) - path of multi-partition disk image</li>
    </ul></dd>
    <dt>Returns: tuple(string, list(string)) or NoneType</dt>
        <dd>returns the tuple(loopback_device, list(device_mapper_files)) if 
          image_path is a multi-partition disk image. otherwise, returns 
          None.</dd>
  </dl>
</td></tr></table>
</div>
<a name="ReleaseBdevPartitionMapping"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ReleaseBdevPartitionMapping</span>(<span class="sig-arg">loop_dev_path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#ReleaseBdevPartitionMapping">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Release allocated dm devices and loopback devices.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>loop_dev_path</code></strong> (string) - path of loopback device returned by <a 
          href="ganeti.utils.storage-module.html#CreateBdevPartitionMapping"
          class="link">CreateBdevPartitionMapping</a></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="osminor"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">osminor</span>(<span class="sig-arg">dev</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#osminor">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Return the device minor number from a raw device number.</p>
  <p>This is a replacement for os.minor working around the issue that 
  Python's os.minor still has the old definition. See Ganeti issue 1058 for
  more details.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Aug 22 11:13:09 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
