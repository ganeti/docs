<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.Utils.Validate</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Ganeti-Utils-Validate.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/Utils/Validate.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.Utils.Validate</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A validation monad and corresponding utilities
</p><p>The monad allows code to emit errors during checking.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span>  <a href="#t:ValidationMonadT">ValidationMonadT</a> m a = <a href="#v:ValidationMonad">ValidationMonad</a> {<ul class="subs"><li><a href="#v:runValidationMonad">runValidationMonad</a> :: WriterT (Seq String) m a</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ValidationMonad">ValidationMonad</a> = <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> Identity</li><li class="src short"><a href="#v:report">report</a> :: Monad m =&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m ()</li><li class="src short"><a href="#v:reportIf">reportIf</a> :: Monad m =&gt; Bool -&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m ()</li><li class="src short"><a href="#v:runValidateT">runValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m a -&gt; m (a, [String])</li><li class="src short"><a href="#v:runValidate">runValidate</a> ::  <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> a -&gt; (a, [String])</li><li class="src short"><a href="#v:execValidateT">execValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m () -&gt; m [String]</li><li class="src short"><a href="#v:execValidate">execValidate</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> () -&gt; [String]</li><li class="src short"><a href="#v:throwIfErrors">throwIfErrors</a> :: (MonadError e m, Error e) =&gt; (a, [String]) -&gt; m a</li><li class="src short"><a href="#v:evalValidate">evalValidate</a> :: (MonadError e m, Error e) =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> a -&gt; m a</li><li class="src short"><a href="#v:evalValidateT">evalValidateT</a> :: (MonadError e m, Error e) =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m a -&gt; m a</li><li class="src short"><span class="keyword">class</span>  <a href="#t:Validatable">Validatable</a> a  <span class="keyword">where</span><ul class="subs"><li><a href="#v:validate">validate</a> :: a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> ()</li></ul></li><li class="src short"><a href="#v:validate-39-">validate'</a> :: <a href="Ganeti-Utils-Validate.html#t:Validatable">Validatable</a> a =&gt; a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:ValidationMonadT" class="def">ValidationMonadT</a> m a <a href="Ganeti/Utils/Validate.html#ValidationMonadT" class="link">Source</a></p><div class="doc"><p>Monad for running validation checks.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ValidationMonad" class="def">ValidationMonad</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:runValidationMonad" class="def">runValidationMonad</a> :: WriterT (Seq String) m a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ValidationMonadT" class="caption collapser" onclick="toggleSection('i:ValidationMonadT')">Instances</p><div id="section.i:ValidationMonadT" class="show"><table><tr><td class="src">Monad m =&gt; Monad (<a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Functor m =&gt; Functor (<a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Applicative m =&gt; Applicative (<a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ValidationMonad" class="def">ValidationMonad</a> = <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> Identity<a href="Ganeti/Utils/Validate.html#ValidationMonad" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:report" class="def">report</a> :: Monad m =&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m ()<a href="Ganeti/Utils/Validate.html#report" class="link">Source</a></p><div class="doc"><p>An utility function that emits a single message into a validation monad.
</p></div></div><div class="top"><p class="src"><a name="v:reportIf" class="def">reportIf</a> :: Monad m =&gt; Bool -&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m ()<a href="Ganeti/Utils/Validate.html#reportIf" class="link">Source</a></p><div class="doc"><p>An utility function that conditionally emits a message into
 a validation monad.
 It's a combination of <code>when</code> and <code><a href="Ganeti-Utils-Validate.html#v:report">report</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:runValidateT" class="def">runValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m a -&gt; m (a, [String])<a href="Ganeti/Utils/Validate.html#runValidateT" class="link">Source</a></p><div class="doc"><p>An utility function that runs a monadic validation action
 and returns the list of errors.
</p></div></div><div class="top"><p class="src"><a name="v:runValidate" class="def">runValidate</a> ::  <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> a -&gt; (a, [String])<a href="Ganeti/Utils/Validate.html#runValidate" class="link">Source</a></p><div class="doc"><p>An utility function that runs a monadic validation action
 and returns the list of errors.
</p></div></div><div class="top"><p class="src"><a name="v:execValidateT" class="def">execValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m () -&gt; m [String]<a href="Ganeti/Utils/Validate.html#execValidateT" class="link">Source</a></p><div class="doc"><p>An utility function that runs a monadic validation action
 and returns the list of errors.
</p></div></div><div class="top"><p class="src"><a name="v:execValidate" class="def">execValidate</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> () -&gt; [String]<a href="Ganeti/Utils/Validate.html#execValidate" class="link">Source</a></p><div class="doc"><p>An utility function that runs a validation action
 and returns the list of errors.
</p></div></div><div class="top"><p class="src"><a name="v:throwIfErrors" class="def">throwIfErrors</a> :: (MonadError e m, Error e) =&gt; (a, [String]) -&gt; m a<a href="Ganeti/Utils/Validate.html#throwIfErrors" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:evalValidate" class="def">evalValidate</a> :: (MonadError e m, Error e) =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> a -&gt; m a<a href="Ganeti/Utils/Validate.html#evalValidate" class="link">Source</a></p><div class="doc"><p>Runs a validation action and if there are errors, combine them
 into an exception.
</p></div></div><div class="top"><p class="src"><a name="v:evalValidateT" class="def">evalValidateT</a> :: (MonadError e m, Error e) =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT">ValidationMonadT</a> m a -&gt; m a<a href="Ganeti/Utils/Validate.html#evalValidateT" class="link">Source</a></p><div class="doc"><p>Runs a validation action and if there are errors, combine them
 into an exception.
</p></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:Validatable" class="def">Validatable</a> a  <span class="keyword">where</span><a href="Ganeti/Utils/Validate.html#Validatable" class="link">Source</a></p><div class="doc"><p>A typeclass for objects that can be validated.
 That is, they can perform an internal check and emit any
 errors encountered.
 Emiting no errors means the object is valid.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:validate" class="def">validate</a> :: a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> ()<a href="Ganeti/Utils/Validate.html#validate" class="link">Source</a></p></div><div class="subs instances"><p id="control.i:Validatable" class="caption collapser" onclick="toggleSection('i:Validatable')">Instances</p><div id="section.i:Validatable" class="show"><table><tr><td class="src"><a href="Ganeti-Utils-Validate.html#t:Validatable">Validatable</a> <a href="Ganeti-Objects-Disk.html#t:LogicalVolume">LogicalVolume</a></td><td class="doc"><p>Check the constraints for VG/LV names (except the <code>/dev/</code> check).
</p></td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:validate-39-" class="def">validate'</a> :: <a href="Ganeti-Utils-Validate.html#t:Validatable">Validatable</a> a =&gt; a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad">ValidationMonad</a> a<a href="Ganeti/Utils/Validate.html#validate%27" class="link">Source</a></p><div class="doc"><p>Run validation and return the original value as well.
 the original value.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>