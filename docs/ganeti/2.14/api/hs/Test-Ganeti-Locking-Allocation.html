<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.Ganeti.Locking.Allocation</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Test-Ganeti-Locking-Allocation.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Test/Ganeti/Locking/Allocation.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Test.Ganeti.Locking.Allocation</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Tests for lock allocation.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:TestOwner">TestOwner</a>  = <a href="#v:TestOwner">TestOwner</a> Int</li><li class="src short"><span class="keyword">data</span>  <a href="#t:TestLock">TestLock</a> <ul class="subs"><li>= <a href="#v:TestBigLock">TestBigLock</a>  </li><li>| <a href="#v:TestCollectionLockA">TestCollectionLockA</a>  </li><li>| <a href="#v:TestLockA">TestLockA</a> Int  </li><li>| <a href="#v:TestCollectionLockB">TestCollectionLockB</a>  </li><li>| <a href="#v:TestLockB">TestLockB</a> Int  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:UpdateRequest">UpdateRequest</a> b a<ul class="subs"><li>= <a href="#v:UpdateRequest">UpdateRequest</a> b [<a href="Ganeti-Locking-Allocation.html#t:LockRequest">LockRequest</a> a]  </li><li>| <a href="#v:FreeLockRequest">FreeLockRequest</a> b  </li></ul></li><li class="src short"><a href="#v:asAllocTrans">asAllocTrans</a> :: (<a href="Ganeti-Locking-Types.html#t:Lock">Lock</a> a, Ord b, Show b) =&gt; <a href="Ganeti-Locking-Allocation.html#t:LockAllocation">LockAllocation</a> a b -&gt; <a href="Test-Ganeti-Locking-Allocation.html#t:UpdateRequest">UpdateRequest</a> b a -&gt; <a href="Ganeti-Locking-Allocation.html#t:LockAllocation">LockAllocation</a> a b</li><li class="src short"><a href="#v:foldUpdates">foldUpdates</a> :: (<a href="Ganeti-Locking-Types.html#t:Lock">Lock</a> a, Ord b, Show b) =&gt; [<a href="Test-Ganeti-Locking-Allocation.html#t:UpdateRequest">UpdateRequest</a> b a] -&gt; <a href="Ganeti-Locking-Allocation.html#t:LockAllocation">LockAllocation</a> a b</li><li class="src short"><a href="#v:prop_LocksDisjoint">prop_LocksDisjoint</a> :: Property</li><li class="src short"><a href="#v:prop_LockslistComplete">prop_LockslistComplete</a> :: Property</li><li class="src short"><a href="#v:prop_LocksAllOwnersSubsetLockslist">prop_LocksAllOwnersSubsetLockslist</a> :: Property</li><li class="src short"><a href="#v:prop_LocksAllOwnersComplete">prop_LocksAllOwnersComplete</a> :: Property</li><li class="src short"><a href="#v:prop_LocksAllOwnersSound">prop_LocksAllOwnersSound</a> :: Property</li><li class="src short"><a href="#v:prop_LockImplicationX">prop_LockImplicationX</a> :: Property</li><li class="src short"><a href="#v:prop_LockImplicationS">prop_LockImplicationS</a> :: Property</li><li class="src short"><a href="#v:prop_LocksStable">prop_LocksStable</a> :: Property</li><li class="src short"><a href="#v:requestSucceeded">requestSucceeded</a> :: Ord a =&gt; Map a <a href="Ganeti-Locking-Allocation.html#t:OwnerState">OwnerState</a> -&gt; <a href="Ganeti-Locking-Allocation.html#t:LockRequest">LockRequest</a> a -&gt; Bool</li><li class="src short"><a href="#v:prop_LockupdateAtomic">prop_LockupdateAtomic</a> :: Property</li><li class="src short"><a href="#v:prop_LockReleaseSucceeds">prop_LockReleaseSucceeds</a> :: Property</li><li class="src short"><a href="#v:prop_BlockSufficient">prop_BlockSufficient</a> :: Property</li><li class="src short"><a href="#v:prop_BlockNecessary">prop_BlockNecessary</a> :: Property</li><li class="src short"><a href="#v:prop_ReadShow">prop_ReadShow</a> :: Property</li><li class="src short"><a href="#v:prop_OwnerComplete">prop_OwnerComplete</a> :: Property</li><li class="src short"><a href="#v:prop_OwnerSound">prop_OwnerSound</a> :: Property</li><li class="src short"><a href="#v:prop_ReadShowRequest">prop_ReadShowRequest</a> :: Property</li><li class="src short"><a href="#v:testLocking_Allocation">testLocking_Allocation</a> :: Test</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:TestOwner" class="def">TestOwner</a>  <a href="Test/Ganeti/Locking/Allocation.html#TestOwner" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TestOwner" class="def">TestOwner</a> Int</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:TestOwner" class="caption collapser" onclick="toggleSection('i:TestOwner')">Instances</p><div id="section.i:TestOwner" class="show"><table><tr><td class="src">Eq <a href="Test-Ganeti-Locking-Allocation.html#t:TestOwner">TestOwner</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Ord <a href="Test-Ganeti-Locking-Allocation.html#t:TestOwner">TestOwner</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Test-Ganeti-Locking-Allocation.html#t:TestOwner">TestOwner</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Arbitrary <a href="Test-Ganeti-Locking-Allocation.html#t:TestOwner">TestOwner</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">JSON <a href="Test-Ganeti-Locking-Allocation.html#t:TestOwner">TestOwner</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:TestLock" class="def">TestLock</a>  <a href="Test/Ganeti/Locking/Allocation.html#TestLock" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TestBigLock" class="def">TestBigLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TestCollectionLockA" class="def">TestCollectionLockA</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TestLockA" class="def">TestLockA</a> Int</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TestCollectionLockB" class="def">TestCollectionLockB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TestLockB" class="def">TestLockB</a> Int</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:TestLock" class="caption collapser" onclick="toggleSection('i:TestLock')">Instances</p><div id="section.i:TestLock" class="show"><table><tr><td class="src">Eq <a href="Test-Ganeti-Locking-Allocation.html#t:TestLock">TestLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Ord <a href="Test-Ganeti-Locking-Allocation.html#t:TestLock">TestLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Read <a href="Test-Ganeti-Locking-Allocation.html#t:TestLock">TestLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Test-Ganeti-Locking-Allocation.html#t:TestLock">TestLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Arbitrary <a href="Test-Ganeti-Locking-Allocation.html#t:TestLock">TestLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">JSON <a href="Test-Ganeti-Locking-Allocation.html#t:TestLock">TestLock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Ganeti-Locking-Types.html#t:Lock">Lock</a> <a href="Test-Ganeti-Locking-Allocation.html#t:TestLock">TestLock</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:UpdateRequest" class="def">UpdateRequest</a> b a <a href="Test/Ganeti/Locking/Allocation.html#UpdateRequest" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:UpdateRequest" class="def">UpdateRequest</a> b [<a href="Ganeti-Locking-Allocation.html#t:LockRequest">LockRequest</a> a]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:FreeLockRequest" class="def">FreeLockRequest</a> b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UpdateRequest" class="caption collapser" onclick="toggleSection('i:UpdateRequest')">Instances</p><div id="section.i:UpdateRequest" class="show"><table><tr><td class="src">(Show b, Show a) =&gt; Show (<a href="Test-Ganeti-Locking-Allocation.html#t:UpdateRequest">UpdateRequest</a> b a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(Arbitrary a, Arbitrary b) =&gt; Arbitrary (<a href="Test-Ganeti-Locking-Allocation.html#t:UpdateRequest">UpdateRequest</a> a b)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:asAllocTrans" class="def">asAllocTrans</a> :: (<a href="Ganeti-Locking-Types.html#t:Lock">Lock</a> a, Ord b, Show b) =&gt; <a href="Ganeti-Locking-Allocation.html#t:LockAllocation">LockAllocation</a> a b -&gt; <a href="Test-Ganeti-Locking-Allocation.html#t:UpdateRequest">UpdateRequest</a> b a -&gt; <a href="Ganeti-Locking-Allocation.html#t:LockAllocation">LockAllocation</a> a b<a href="Test/Ganeti/Locking/Allocation.html#asAllocTrans" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:foldUpdates" class="def">foldUpdates</a> :: (<a href="Ganeti-Locking-Types.html#t:Lock">Lock</a> a, Ord b, Show b) =&gt; [<a href="Test-Ganeti-Locking-Allocation.html#t:UpdateRequest">UpdateRequest</a> b a] -&gt; <a href="Ganeti-Locking-Allocation.html#t:LockAllocation">LockAllocation</a> a b<a href="Test/Ganeti/Locking/Allocation.html#foldUpdates" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LocksDisjoint" class="def">prop_LocksDisjoint</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LocksDisjoint" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LockslistComplete" class="def">prop_LockslistComplete</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LockslistComplete" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LocksAllOwnersSubsetLockslist" class="def">prop_LocksAllOwnersSubsetLockslist</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LocksAllOwnersSubsetLockslist" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LocksAllOwnersComplete" class="def">prop_LocksAllOwnersComplete</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LocksAllOwnersComplete" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LocksAllOwnersSound" class="def">prop_LocksAllOwnersSound</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LocksAllOwnersSound" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LockImplicationX" class="def">prop_LockImplicationX</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LockImplicationX" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LockImplicationS" class="def">prop_LockImplicationS</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LockImplicationS" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LocksStable" class="def">prop_LocksStable</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LocksStable" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:requestSucceeded" class="def">requestSucceeded</a> :: Ord a =&gt; Map a <a href="Ganeti-Locking-Allocation.html#t:OwnerState">OwnerState</a> -&gt; <a href="Ganeti-Locking-Allocation.html#t:LockRequest">LockRequest</a> a -&gt; Bool<a href="Test/Ganeti/Locking/Allocation.html#requestSucceeded" class="link">Source</a></p><div class="doc"><p>Verify that a given request is statisfied in list of owned locks
</p></div></div><div class="top"><p class="src"><a name="v:prop_LockupdateAtomic" class="def">prop_LockupdateAtomic</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LockupdateAtomic" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_LockReleaseSucceeds" class="def">prop_LockReleaseSucceeds</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_LockReleaseSucceeds" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_BlockSufficient" class="def">prop_BlockSufficient</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_BlockSufficient" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_BlockNecessary" class="def">prop_BlockNecessary</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_BlockNecessary" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_ReadShow" class="def">prop_ReadShow</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_ReadShow" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_OwnerComplete" class="def">prop_OwnerComplete</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_OwnerComplete" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_OwnerSound" class="def">prop_OwnerSound</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_OwnerSound" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prop_ReadShowRequest" class="def">prop_ReadShowRequest</a> :: Property<a href="Test/Ganeti/Locking/Allocation.html#prop_ReadShowRequest" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:testLocking_Allocation" class="def">testLocking_Allocation</a> :: Test<a href="Test/Ganeti/Locking/Allocation.html#testLocking_Allocation" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>