<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.Utils.Validate</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/Utils/Validate.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.Utils.Validate</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A validation monad and corresponding utilities</p><p>The monad allows code to emit errors during checking.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:ValidationMonadT">ValidationMonadT</a> m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:ValidationMonad">ValidationMonad</a> = <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> Identity</li><li class="src short"><a href="#v:report">report</a> :: Monad m =&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m ()</li><li class="src short"><a href="#v:reportIf">reportIf</a> :: Monad m =&gt; Bool -&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m ()</li><li class="src short"><a href="#v:runValidateT">runValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; m (a, [String])</li><li class="src short"><a href="#v:runValidate">runValidate</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> a -&gt; (a, [String])</li><li class="src short"><a href="#v:execValidateT">execValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m () -&gt; m [String]</li><li class="src short"><a href="#v:execValidate">execValidate</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> () -&gt; [String]</li><li class="src short"><a href="#v:evalValidate">evalValidate</a> :: MonadError String m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> a -&gt; m a</li><li class="src short"><a href="#v:evalValidateT">evalValidateT</a> :: MonadError String m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; m a</li><li class="src short"><span class="keyword">class</span> <a href="#t:Validatable">Validatable</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:validate">validate</a> :: a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> ()</li></ul></li><li class="src short"><a href="#v:validate-39-">validate'</a> :: <a href="Ganeti-Utils-Validate.html#t:Validatable" title="Ganeti.Utils.Validate">Validatable</a> a =&gt; a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> a</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ValidationMonadT" class="def">ValidationMonadT</a> m a <a href="Ganeti/Utils/Validate.html#ValidationMonadT" class="link">Source</a> <a href="#t:ValidationMonadT" class="selflink">#</a></p><div class="doc"><p>Monad for running validation checks.</p></div><div class="subs instances"><details id="i:ValidationMonadT" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValidationMonadT:Monad:1"></span> Monad m =&gt; Monad (<a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m)</span> <a href="#t:ValidationMonadT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValidationMonadT:Monad:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-Utils-Validate.html">Ganeti.Utils.Validate</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; (a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b) -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b</p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b</p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a</p><p class="src"><a href="#v:fail">fail</a> :: String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValidationMonadT:Functor:2"></span> Functor m =&gt; Functor (<a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m)</span> <a href="#t:ValidationMonadT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValidationMonadT:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-Utils-Validate.html">Ganeti.Utils.Validate</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b</p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValidationMonadT:Applicative:3"></span> Applicative m =&gt; Applicative (<a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m)</span> <a href="#t:ValidationMonadT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValidationMonadT:Applicative:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-Utils-Validate.html">Ganeti.Utils.Validate</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a</p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m (a -&gt; b) -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b</p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m c</p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b</p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m b -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ValidationMonad" class="def">ValidationMonad</a> = <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> Identity <a href="Ganeti/Utils/Validate.html#ValidationMonad" class="link">Source</a> <a href="#t:ValidationMonad" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:report" class="def">report</a> :: Monad m =&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m () <a href="Ganeti/Utils/Validate.html#report" class="link">Source</a> <a href="#v:report" class="selflink">#</a></p><div class="doc"><p>An utility function that emits a single message into a validation monad.</p></div></div><div class="top"><p class="src"><a id="v:reportIf" class="def">reportIf</a> :: Monad m =&gt; Bool -&gt; String -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m () <a href="Ganeti/Utils/Validate.html#reportIf" class="link">Source</a> <a href="#v:reportIf" class="selflink">#</a></p><div class="doc"><p>An utility function that conditionally emits a message into
 a validation monad.
 It's a combination of <code>when</code> and <code><a href="Ganeti-Utils-Validate.html#v:report" title="Ganeti.Utils.Validate">report</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:runValidateT" class="def">runValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; m (a, [String]) <a href="Ganeti/Utils/Validate.html#runValidateT" class="link">Source</a> <a href="#v:runValidateT" class="selflink">#</a></p><div class="doc"><p>An utility function that runs a monadic validation action
 and returns the list of errors.</p></div></div><div class="top"><p class="src"><a id="v:runValidate" class="def">runValidate</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> a -&gt; (a, [String]) <a href="Ganeti/Utils/Validate.html#runValidate" class="link">Source</a> <a href="#v:runValidate" class="selflink">#</a></p><div class="doc"><p>An utility function that runs a monadic validation action
 and returns the list of errors.</p></div></div><div class="top"><p class="src"><a id="v:execValidateT" class="def">execValidateT</a> :: Monad m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m () -&gt; m [String] <a href="Ganeti/Utils/Validate.html#execValidateT" class="link">Source</a> <a href="#v:execValidateT" class="selflink">#</a></p><div class="doc"><p>An utility function that runs a monadic validation action
 and returns the list of errors.</p></div></div><div class="top"><p class="src"><a id="v:execValidate" class="def">execValidate</a> :: <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> () -&gt; [String] <a href="Ganeti/Utils/Validate.html#execValidate" class="link">Source</a> <a href="#v:execValidate" class="selflink">#</a></p><div class="doc"><p>An utility function that runs a validation action
 and returns the list of errors.</p></div></div><div class="top"><p class="src"><a id="v:evalValidate" class="def">evalValidate</a> :: MonadError String m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> a -&gt; m a <a href="Ganeti/Utils/Validate.html#evalValidate" class="link">Source</a> <a href="#v:evalValidate" class="selflink">#</a></p><div class="doc"><p>Runs a validation action and if there are errors, combine them
 into an exception.</p></div></div><div class="top"><p class="src"><a id="v:evalValidateT" class="def">evalValidateT</a> :: MonadError String m =&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonadT" title="Ganeti.Utils.Validate">ValidationMonadT</a> m a -&gt; m a <a href="Ganeti/Utils/Validate.html#evalValidateT" class="link">Source</a> <a href="#v:evalValidateT" class="selflink">#</a></p><div class="doc"><p>Runs a validation action and if there are errors, combine them
 into an exception.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Validatable" class="def">Validatable</a> a <span class="keyword">where</span> <a href="Ganeti/Utils/Validate.html#Validatable" class="link">Source</a> <a href="#t:Validatable" class="selflink">#</a></p><div class="doc"><p>A typeclass for objects that can be validated.
 That is, they can perform an internal check and emit any
 errors encountered.
 Emiting no errors means the object is valid.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:validate" class="def">validate</a> :: a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> () <a href="Ganeti/Utils/Validate.html#validate" class="link">Source</a> <a href="#v:validate" class="selflink">#</a></p></div><div class="subs instances"><details id="i:Validatable" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Validatable:Validatable:1"></span> <a href="Ganeti-Utils-Validate.html#t:Validatable" title="Ganeti.Utils.Validate">Validatable</a> <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a></span> <a href="#t:Validatable" class="selflink">#</a></td><td class="doc"><p>Check the constraints for VG/LV names (except the <code>/dev/</code> check).</p></td></tr><tr><td colspan="2"><details id="i:ic:Validatable:Validatable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-Objects-Disk.html">Ganeti.Objects.Disk</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:validate">validate</a> :: <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a> -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> () <a href="Ganeti/Utils/Validate.html#validate" class="link">Source</a> <a href="#v:validate" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:validate-39-" class="def">validate'</a> :: <a href="Ganeti-Utils-Validate.html#t:Validatable" title="Ganeti.Utils.Validate">Validatable</a> a =&gt; a -&gt; <a href="Ganeti-Utils-Validate.html#t:ValidationMonad" title="Ganeti.Utils.Validate">ValidationMonad</a> a <a href="Ganeti/Utils/Validate.html#validate%27" class="link">Source</a> <a href="#v:validate-39-" class="selflink">#</a></p><div class="doc"><p>Run validation and return the original value as well.
 the original value.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>