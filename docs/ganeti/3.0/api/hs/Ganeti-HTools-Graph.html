<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.HTools.Graph</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/HTools/Graph.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Ganeti.HTools.Graph</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Type declarations</a></li><li><a href="#g:2">Vertices characteristics</a></li><li><a href="#g:3">Coloring</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Algorithms on Graphs.</p><p>This module contains a few graph algorithms and the transoformations
needed for them to be used on nodes.</p><p>For more information about Graph Coloring see:
<a href="http://en.wikipedia.org/wiki/Graph_coloring">http://en.wikipedia.org/wiki/Graph_coloring</a>
<a href="http://en.wikipedia.org/wiki/Greedy_coloring">http://en.wikipedia.org/wiki/Greedy_coloring</a></p><p>LF-coloring is described in:
Welsh, D. J. A.; Powell, M. B. (1967), &quot;An upper bound for the chromatic number
of a graph and its application to timetabling problems&quot;, The Computer Journal
10 (1): 85-86, doi:10.1093<em>comjnl</em>10.1.85
<a href="http://comjnl.oxfordjournals.org/content/10/1/85">http://comjnl.oxfordjournals.org/content/10/1/85</a></p><p>DSatur is described in:
Brelaz, D. (1979), &quot;New methods to color the vertices of a graph&quot;,
Communications of the ACM 22 (4): 251-256, doi:10.1145/359094.359101
<a href="http://dx.doi.org/10.1145%2F359094.359101">http://dx.doi.org/10.1145%2F359094.359101</a></p><p>Also interesting:
Klotz, W. (2002). Graph coloring algorithms. Mathematics Report, Technical
University Clausthal, 1-9.
&lt;<a href="http://www.math.tu-clausthal.de/Arbeitsgruppen/Diskrete-Optimierung">http://www.math.tu-clausthal.de/Arbeitsgruppen/Diskrete-Optimierung</a>
<em>publications</em>2002/gca.pdf&gt;</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Color">Color</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:Satur">Satur</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:VertColorMap">VertColorMap</a> = IntMap <a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:ColorVertMap">ColorVertMap</a> = IntMap [Int]</li><li class="src short"><a href="#v:verticesDegree">verticesDegree</a> :: Graph -&gt; [(Vertex, Int)]</li><li class="src short"><a href="#v:verticesByDegreeDesc">verticesByDegreeDesc</a> :: Graph -&gt; [Vertex]</li><li class="src short"><a href="#v:verticesByDegreeAsc">verticesByDegreeAsc</a> :: Graph -&gt; [Vertex]</li><li class="src short"><a href="#v:neighbors">neighbors</a> :: Graph -&gt; Vertex -&gt; [Vertex]</li><li class="src short"><a href="#v:hasLoop">hasLoop</a> :: Graph -&gt; Bool</li><li class="src short"><a href="#v:isUndirected">isUndirected</a> :: Graph -&gt; Bool</li><li class="src short"><a href="#v:emptyVertColorMap">emptyVertColorMap</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></li><li class="src short"><a href="#v:isColorable">isColorable</a> :: Graph -&gt; Bool</li><li class="src short"><a href="#v:verticesColors">verticesColors</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; [Vertex] -&gt; [<a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a>]</li><li class="src short"><a href="#v:verticesColorSet">verticesColorSet</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; [Vertex] -&gt; IntSet</li><li class="src short"><a href="#v:neighColors">neighColors</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; [<a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a>]</li><li class="src short"><a href="#v:colorNode">colorNode</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; <a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a></li><li class="src short"><a href="#v:colorNodeInMap">colorNodeInMap</a> :: Graph -&gt; Vertex -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></li><li class="src short"><a href="#v:colorInOrder">colorInOrder</a> :: Graph -&gt; [Vertex] -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></li><li class="src short"><a href="#v:colorLF">colorLF</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></li><li class="src short"><a href="#v:vertexSaturation">vertexSaturation</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; (Vertex, (<a href="Ganeti-HTools-Graph.html#t:Satur" title="Ganeti.HTools.Graph">Satur</a>, Int))</li><li class="src short"><a href="#v:vertexColorDegree">vertexColorDegree</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; (Vertex, (Int, Int))</li><li class="src short"><a href="#v:colorDynamicOrder">colorDynamicOrder</a> :: Ord a =&gt; (Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; (Vertex, a)) -&gt; Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; [Vertex] -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></li><li class="src short"><a href="#v:colorDcolor">colorDcolor</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></li><li class="src short"><a href="#v:colorDsatur">colorDsatur</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></li><li class="src short"><a href="#v:colorVertMap">colorVertMap</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; <a href="Ganeti-HTools-Graph.html#t:ColorVertMap" title="Ganeti.HTools.Graph">ColorVertMap</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Type declarations</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Color" class="def">Color</a> = Int <a href="Ganeti/HTools/Graph.html#Color" class="link">Source</a> <a href="#t:Color" class="selflink">#</a></p><div class="doc"><p>Node colors.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Satur" class="def">Satur</a> = Int <a href="Ganeti/HTools/Graph.html#Satur" class="link">Source</a> <a href="#t:Satur" class="selflink">#</a></p><div class="doc"><p>Saturation: number of colored neighbors.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:VertColorMap" class="def">VertColorMap</a> = IntMap <a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a> <a href="Ganeti/HTools/Graph.html#VertColorMap" class="link">Source</a> <a href="#t:VertColorMap" class="selflink">#</a></p><div class="doc"><p>Vertex to Color association.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ColorVertMap" class="def">ColorVertMap</a> = IntMap [Int] <a href="Ganeti/HTools/Graph.html#ColorVertMap" class="link">Source</a> <a href="#t:ColorVertMap" class="selflink">#</a></p><div class="doc"><p>Color to Vertex association.</p></div></div><a href="#g:2" id="g:2"><h1>Vertices characteristics</h1></a><div class="top"><p class="src"><a id="v:verticesDegree" class="def">verticesDegree</a> :: Graph -&gt; [(Vertex, Int)] <a href="Ganeti/HTools/Graph.html#verticesDegree" class="link">Source</a> <a href="#v:verticesDegree" class="selflink">#</a></p><div class="doc"><p>(vertex, degree) tuples on a graph.</p></div></div><div class="top"><p class="src"><a id="v:verticesByDegreeDesc" class="def">verticesByDegreeDesc</a> :: Graph -&gt; [Vertex] <a href="Ganeti/HTools/Graph.html#verticesByDegreeDesc" class="link">Source</a> <a href="#v:verticesByDegreeDesc" class="selflink">#</a></p><div class="doc"><p>vertices of a graph, sorted by ascending degree.</p></div></div><div class="top"><p class="src"><a id="v:verticesByDegreeAsc" class="def">verticesByDegreeAsc</a> :: Graph -&gt; [Vertex] <a href="Ganeti/HTools/Graph.html#verticesByDegreeAsc" class="link">Source</a> <a href="#v:verticesByDegreeAsc" class="selflink">#</a></p><div class="doc"><p>vertices of a graph, sorted by descending degree.</p></div></div><div class="top"><p class="src"><a id="v:neighbors" class="def">neighbors</a> :: Graph -&gt; Vertex -&gt; [Vertex] <a href="Ganeti/HTools/Graph.html#neighbors" class="link">Source</a> <a href="#v:neighbors" class="selflink">#</a></p><div class="doc"><p>Get the neighbors of a vertex.</p></div></div><div class="top"><p class="src"><a id="v:hasLoop" class="def">hasLoop</a> :: Graph -&gt; Bool <a href="Ganeti/HTools/Graph.html#hasLoop" class="link">Source</a> <a href="#v:hasLoop" class="selflink">#</a></p><div class="doc"><p>Check whether a graph has no loops.
 (vertices connected to themselves)</p></div></div><div class="top"><p class="src"><a id="v:isUndirected" class="def">isUndirected</a> :: Graph -&gt; Bool <a href="Ganeti/HTools/Graph.html#isUndirected" class="link">Source</a> <a href="#v:isUndirected" class="selflink">#</a></p><div class="doc"><p>Check whether a graph is undirected</p></div></div><a href="#g:3" id="g:3"><h1>Coloring</h1></a><div class="top"><p class="src"><a id="v:emptyVertColorMap" class="def">emptyVertColorMap</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> <a href="Ganeti/HTools/Graph.html#emptyVertColorMap" class="link">Source</a> <a href="#v:emptyVertColorMap" class="selflink">#</a></p><div class="doc"><p>Empty color map.</p></div></div><div class="top"><p class="src"><a id="v:isColorable" class="def">isColorable</a> :: Graph -&gt; Bool <a href="Ganeti/HTools/Graph.html#isColorable" class="link">Source</a> <a href="#v:isColorable" class="selflink">#</a></p><div class="doc"><p>Check whether a graph is colorable.</p></div></div><div class="top"><p class="src"><a id="v:verticesColors" class="def">verticesColors</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; [Vertex] -&gt; [<a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a>] <a href="Ganeti/HTools/Graph.html#verticesColors" class="link">Source</a> <a href="#v:verticesColors" class="selflink">#</a></p><div class="doc"><p>Get the colors of a list of vertices.
 Any uncolored vertices are ignored.</p></div></div><div class="top"><p class="src"><a id="v:verticesColorSet" class="def">verticesColorSet</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; [Vertex] -&gt; IntSet <a href="Ganeti/HTools/Graph.html#verticesColorSet" class="link">Source</a> <a href="#v:verticesColorSet" class="selflink">#</a></p><div class="doc"><p>Get the set of colors of a list of vertices.
 Any uncolored vertices are ignored.</p></div></div><div class="top"><p class="src"><a id="v:neighColors" class="def">neighColors</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; [<a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a>] <a href="Ganeti/HTools/Graph.html#neighColors" class="link">Source</a> <a href="#v:neighColors" class="selflink">#</a></p><div class="doc"><p>Get the colors of the neighbors of a vertex.</p></div></div><div class="top"><p class="src"><a id="v:colorNode" class="def">colorNode</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; <a href="Ganeti-HTools-Graph.html#t:Color" title="Ganeti.HTools.Graph">Color</a> <a href="Ganeti/HTools/Graph.html#colorNode" class="link">Source</a> <a href="#v:colorNode" class="selflink">#</a></p><div class="doc"><p>Color one node.</p></div></div><div class="top"><p class="src"><a id="v:colorNodeInMap" class="def">colorNodeInMap</a> :: Graph -&gt; Vertex -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> <a href="Ganeti/HTools/Graph.html#colorNodeInMap" class="link">Source</a> <a href="#v:colorNodeInMap" class="selflink">#</a></p><div class="doc"><p>Color a node returning the updated color map.</p></div></div><div class="top"><p class="src"><a id="v:colorInOrder" class="def">colorInOrder</a> :: Graph -&gt; [Vertex] -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> <a href="Ganeti/HTools/Graph.html#colorInOrder" class="link">Source</a> <a href="#v:colorInOrder" class="selflink">#</a></p><div class="doc"><p>Color greedily all nodes in the given order.</p></div></div><div class="top"><p class="src"><a id="v:colorLF" class="def">colorLF</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> <a href="Ganeti/HTools/Graph.html#colorLF" class="link">Source</a> <a href="#v:colorLF" class="selflink">#</a></p><div class="doc"><p>Color greedily all nodes, larger first.</p></div></div><div class="top"><p class="src"><a id="v:vertexSaturation" class="def">vertexSaturation</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; (Vertex, (<a href="Ganeti-HTools-Graph.html#t:Satur" title="Ganeti.HTools.Graph">Satur</a>, Int)) <a href="Ganeti/HTools/Graph.html#vertexSaturation" class="link">Source</a> <a href="#v:vertexSaturation" class="selflink">#</a></p><div class="doc"><p>(vertex, (saturation, degree)) for a vertex.</p></div></div><div class="top"><p class="src"><a id="v:vertexColorDegree" class="def">vertexColorDegree</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; (Vertex, (Int, Int)) <a href="Ganeti/HTools/Graph.html#vertexColorDegree" class="link">Source</a> <a href="#v:vertexColorDegree" class="selflink">#</a></p><div class="doc"><p>(vertex, (colordegree, degree)) for a vertex.</p></div></div><div class="top"><p class="src"><a id="v:colorDynamicOrder" class="def">colorDynamicOrder</a> <a href="Ganeti/HTools/Graph.html#colorDynamicOrder" class="link">Source</a> <a href="#v:colorDynamicOrder" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ord a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; Vertex -&gt; (Vertex, a))</td><td class="doc"><p>Helper to induce the choice</p></td></tr><tr><td class="src">-&gt; Graph</td><td class="doc"><p>Target graph</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></td><td class="doc"><p>Accumulating vertex color map</p></td></tr><tr><td class="src">-&gt; [Vertex]</td><td class="doc"><p>List of remaining vertices</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a></td><td class="doc"><p>Output vertex color map</p></td></tr></table></div><div class="doc"><p>Color all nodes in a dynamic order.
 We have a list of vertices still uncolored, and at each round we
 choose&amp;delete one vertex among the remaining ones. A helper function
 is used to induce an order so that the next vertex can be chosen.</p></div></div><div class="top"><p class="src"><a id="v:colorDcolor" class="def">colorDcolor</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> <a href="Ganeti/HTools/Graph.html#colorDcolor" class="link">Source</a> <a href="#v:colorDcolor" class="selflink">#</a></p><div class="doc"><p>Color greedily all nodes, highest number of colored neighbors, then
 highest degree. This is slower than &quot;colorLF&quot; as we must dynamically
 recalculate which node to color next among all remaining ones but
 produces better results.</p></div></div><div class="top"><p class="src"><a id="v:colorDsatur" class="def">colorDsatur</a> :: Graph -&gt; <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> <a href="Ganeti/HTools/Graph.html#colorDsatur" class="link">Source</a> <a href="#v:colorDsatur" class="selflink">#</a></p><div class="doc"><p>Color greedily all nodes, highest saturation, then highest degree.
 This is slower than &quot;colorLF&quot; as we must dynamically recalculate
 which node to color next among all remaining ones but produces better
 results.</p></div></div><div class="top"><p class="src"><a id="v:colorVertMap" class="def">colorVertMap</a> :: <a href="Ganeti-HTools-Graph.html#t:VertColorMap" title="Ganeti.HTools.Graph">VertColorMap</a> -&gt; <a href="Ganeti-HTools-Graph.html#t:ColorVertMap" title="Ganeti.HTools.Graph">ColorVertMap</a> <a href="Ganeti/HTools/Graph.html#colorVertMap" class="link">Source</a> <a href="#v:colorVertMap" class="selflink">#</a></p><div class="doc"><p>ColorVertMap from VertColorMap.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>