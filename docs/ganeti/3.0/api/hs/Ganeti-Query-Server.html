<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.Query.Server</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/Query/Server.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.Query.Server</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of the Ganeti Query2 server.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:makeLuxidClientId">makeLuxidClientId</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a></li><li class="src short"><a href="#v:withLockedWconfdConfig">withLockedWconfdConfig</a> :: (MonadBase IO m, MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-THH-HsRPC.html#t:RpcClientMonad" title="Ganeti.THH.HsRPC">RpcClientMonad</a> a) -&gt; m a</li><li class="src short"><a href="#v:handleQuery">handleQuery</a> :: [<a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FilterField" title="Ganeti.Query.Language">FilterField</a>] -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a> -&gt; [Either String Integer] -&gt; [String] -&gt; Bool -&gt; IO (<a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue)</li><li class="src short"><a href="#v:handleClassicQuery">handleClassicQuery</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a> -&gt; [Either String Integer] -&gt; [String] -&gt; Bool -&gt; IO (<a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue)</li><li class="src short"><a href="#v:handleUuidQuery">handleUuidQuery</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a> -&gt; [Either String Integer] -&gt; [String] -&gt; Bool -&gt; IO (<a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue)</li><li class="src short"><a href="#v:handleCallWrapper">handleCallWrapper</a> :: <a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a> -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue)</li><li class="src short"><a href="#v:handleCall">handleCall</a> :: <a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a> -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue)</li><li class="src short"><a href="#v:handleWaitForJobChangeStatus">handleWaitForJobChangeStatus</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; JSValue -&gt; JSValue -&gt; Int -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue)</li><li class="src short"><a href="#v:waitForJobChange">waitForJobChange</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; JSValue -&gt; Int -&gt; IO (JSValue, JSValue) -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue)</li><li class="src short"><a href="#v:computeJobUpdate">computeJobUpdate</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; [String] -&gt; JSValue -&gt; IO (JSValue, JSValue)</li><li class="src short"><a href="#v:computeJobUpdateStatus">computeJobUpdateStatus</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; JSValue -&gt; IO (JSValue, JSValue)</li><li class="src short"><span class="keyword">type</span> <a href="#t:LuxiConfig">LuxiConfig</a> = (<a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a>, <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a>, <a href="Ganeti-ConfigReader.html#t:ConfigReader" title="Ganeti.ConfigReader">ConfigReader</a>)</li><li class="src short"><a href="#v:luxiExec">luxiExec</a> :: <a href="Ganeti-Query-Server.html#t:LuxiConfig" title="Ganeti.Query.Server">LuxiConfig</a> -&gt; <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> -&gt; IO (Bool, <a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue)</li><li class="src short"><a href="#v:luxiHandler">luxiHandler</a> :: <a href="Ganeti-Query-Server.html#t:LuxiConfig" title="Ganeti.Query.Server">LuxiConfig</a> -&gt; <a href="Ganeti-UDSServer.html#t:Handler" title="Ganeti.UDSServer">Handler</a> <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> IO JSValue</li><li class="src short"><span class="keyword">type</span> <a href="#t:PrepResult">PrepResult</a> = (<a href="Ganeti-UDSServer.html#t:Server" title="Ganeti.UDSServer">Server</a>, IORef (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a>), <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a>)</li><li class="src short"><a href="#v:activateMasterIP">activateMasterIP</a> :: IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> ())</li><li class="src short"><a href="#v:checkMain">checkMain</a> :: <a href="Ganeti-Daemon.html#t:CheckFn" title="Ganeti.Daemon">CheckFn</a> ()</li><li class="src short"><a href="#v:prepMain">prepMain</a> :: <a href="Ganeti-Daemon.html#t:PrepFn" title="Ganeti.Daemon">PrepFn</a> () <a href="Ganeti-Query-Server.html#t:PrepResult" title="Ganeti.Query.Server">PrepResult</a></li><li class="src short"><a href="#v:main">main</a> :: <a href="Ganeti-Daemon.html#t:MainFn" title="Ganeti.Daemon">MainFn</a> () <a href="Ganeti-Query-Server.html#t:PrepResult" title="Ganeti.Query.Server">PrepResult</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:makeLuxidClientId" class="def">makeLuxidClientId</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti/Query/Server.html#makeLuxidClientId" class="link">Source</a> <a href="#v:makeLuxidClientId" class="selflink">#</a></p><div class="doc"><p>Creates a <code><a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a></code> that identifies the current luxi
 (process, thread).</p><p>This means that this <code><a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a></code> will be different for each request
 handled by luxid.</p></div></div><div class="top"><p class="src"><a id="v:withLockedWconfdConfig" class="def">withLockedWconfdConfig</a> :: (MonadBase IO m, MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-THH-HsRPC.html#t:RpcClientMonad" title="Ganeti.THH.HsRPC">RpcClientMonad</a> a) -&gt; m a <a href="Ganeti/Query/Server.html#withLockedWconfdConfig" class="link">Source</a> <a href="#v:withLockedWconfdConfig" class="selflink">#</a></p><div class="doc"><p>Creates a connection to WConfd and locks the config, allowing
 to run some WConfd RPC commands given the locked config.</p><p>This is needed when luxid wants to change the config.</p><p>Example:</p><pre>cid &lt;- makeLuxidClientId ...
withLockedWconfdConfig cid $ \lockedCfg -&gt; do
  -- some (IO) action that needs to be run inside having the lock
  writeConfig cid (updateConfig lockedCfg)</pre></div></div><div class="top"><p class="src"><a id="v:handleQuery" class="def">handleQuery</a> <a href="Ganeti/Query/Server.html#handleQuery" class="link">Source</a> <a href="#v:handleQuery" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [<a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FilterField" title="Ganeti.Query.Language">FilterField</a>]</td><td class="doc"><p>Fields to put into
 the query</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc"><p>Cluster config</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a></td><td class="doc"><p>Query type</p></td></tr><tr><td class="src">-&gt; [Either String Integer]</td><td class="doc"><p>Requested names
 (empty means all)</p></td></tr><tr><td class="src">-&gt; [String]</td><td class="doc"><p>Requested fields</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>Whether to do sync queries or not</p></td></tr><tr><td class="src">-&gt; IO (<a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Helper for classic queries.</p></div></div><div class="top"><p class="src"><a id="v:handleClassicQuery" class="def">handleClassicQuery</a> <a href="Ganeti/Query/Server.html#handleClassicQuery" class="link">Source</a> <a href="#v:handleClassicQuery" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc"><p>Cluster config</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a></td><td class="doc"><p>Query type</p></td></tr><tr><td class="src">-&gt; [Either String Integer]</td><td class="doc"><p>Requested names
 (empty means all)</p></td></tr><tr><td class="src">-&gt; [String]</td><td class="doc"><p>Requested fields</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>Whether to do sync queries or not</p></td></tr><tr><td class="src">-&gt; IO (<a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Helper for classic queries.
 Queries <code>name</code> and <code>uuid</code> fields.</p></div></div><div class="top"><p class="src"><a id="v:handleUuidQuery" class="def">handleUuidQuery</a> <a href="Ganeti/Query/Server.html#handleUuidQuery" class="link">Source</a> <a href="#v:handleUuidQuery" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc"><p>Cluster config</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Language.html#t:ItemType" title="Ganeti.Query.Language">ItemType</a></td><td class="doc"><p>Query type</p></td></tr><tr><td class="src">-&gt; [Either String Integer]</td><td class="doc"><p>Requested names
 (empty means all)</p></td></tr><tr><td class="src">-&gt; [String]</td><td class="doc"><p>Requested fields</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>Whether to do sync queries or not</p></td></tr><tr><td class="src">-&gt; IO (<a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Like <code><a href="Ganeti-Query-Server.html#v:handleClassicQuery" title="Ganeti.Query.Server">handleClassicQuery</a></code>, but filters only by UUID.</p></div></div><div class="top"><p class="src"><a id="v:handleCallWrapper" class="def">handleCallWrapper</a> :: <a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a> -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue) <a href="Ganeti/Query/Server.html#handleCallWrapper" class="link">Source</a> <a href="#v:handleCallWrapper" class="selflink">#</a></p><div class="doc"><p>Minimal wrapper to handle the missing config case.</p></div></div><div class="top"><p class="src"><a id="v:handleCall" class="def">handleCall</a> :: <a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a> -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue) <a href="Ganeti/Query/Server.html#handleCall" class="link">Source</a> <a href="#v:handleCall" class="selflink">#</a></p><div class="doc"><p>Actual luxi operation handler.</p></div></div><div class="top"><p class="src"><a id="v:handleWaitForJobChangeStatus" class="def">handleWaitForJobChangeStatus</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; JSValue -&gt; JSValue -&gt; Int -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue) <a href="Ganeti/Query/Server.html#handleWaitForJobChangeStatus" class="link">Source</a> <a href="#v:handleWaitForJobChangeStatus" class="selflink">#</a></p><div class="doc"><p>Special-case handler for WaitForJobChange RPC call for fields == [&quot;status&quot;]
 that doesn't require the use of ConfigData</p></div></div><div class="top"><p class="src"><a id="v:waitForJobChange" class="def">waitForJobChange</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; JSValue -&gt; Int -&gt; IO (JSValue, JSValue) -&gt; IO (<a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> JSValue) <a href="Ganeti/Query/Server.html#waitForJobChange" class="link">Source</a> <a href="#v:waitForJobChange" class="selflink">#</a></p><div class="doc"><p>Common WaitForJobChange functionality shared between handleCall and
 handleWaitForJobChangeStatus</p></div></div><div class="top"><p class="src"><a id="v:computeJobUpdate" class="def">computeJobUpdate</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; [String] -&gt; JSValue -&gt; IO (JSValue, JSValue) <a href="Ganeti/Query/Server.html#computeJobUpdate" class="link">Source</a> <a href="#v:computeJobUpdate" class="selflink">#</a></p><div class="doc"><p>Query the status of a job and return the requested fields
 and the logs newer than the given log number.</p></div></div><div class="top"><p class="src"><a id="v:computeJobUpdateStatus" class="def">computeJobUpdateStatus</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; JSValue -&gt; IO (JSValue, JSValue) <a href="Ganeti/Query/Server.html#computeJobUpdateStatus" class="link">Source</a> <a href="#v:computeJobUpdateStatus" class="selflink">#</a></p><div class="doc"><p>A version of computeJobUpdate hardcoded to only return logs and the status
 field. By hardcoding this we avoid using the luxi Query infrastructure and
 the ConfigData value it requires.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LuxiConfig" class="def">LuxiConfig</a> = (<a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a>, <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a>, <a href="Ganeti-ConfigReader.html#t:ConfigReader" title="Ganeti.ConfigReader">ConfigReader</a>) <a href="Ganeti/Query/Server.html#LuxiConfig" class="link">Source</a> <a href="#t:LuxiConfig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:luxiExec" class="def">luxiExec</a> :: <a href="Ganeti-Query-Server.html#t:LuxiConfig" title="Ganeti.Query.Server">LuxiConfig</a> -&gt; <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> -&gt; IO (Bool, <a href="Ganeti-BasicTypes.html#t:GenericResult" title="Ganeti.BasicTypes">GenericResult</a> <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> JSValue) <a href="Ganeti/Query/Server.html#luxiExec" class="link">Source</a> <a href="#v:luxiExec" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:luxiHandler" class="def">luxiHandler</a> :: <a href="Ganeti-Query-Server.html#t:LuxiConfig" title="Ganeti.Query.Server">LuxiConfig</a> -&gt; <a href="Ganeti-UDSServer.html#t:Handler" title="Ganeti.UDSServer">Handler</a> <a href="Ganeti-Luxi.html#t:LuxiOp" title="Ganeti.Luxi">LuxiOp</a> IO JSValue <a href="Ganeti/Query/Server.html#luxiHandler" class="link">Source</a> <a href="#v:luxiHandler" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PrepResult" class="def">PrepResult</a> = (<a href="Ganeti-UDSServer.html#t:Server" title="Ganeti.UDSServer">Server</a>, IORef (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a>), <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a>) <a href="Ganeti/Query/Server.html#PrepResult" class="link">Source</a> <a href="#t:PrepResult" class="selflink">#</a></p><div class="doc"><p>Type alias for prepMain results</p></div></div><div class="top"><p class="src"><a id="v:activateMasterIP" class="def">activateMasterIP</a> :: IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> ()) <a href="Ganeti/Query/Server.html#activateMasterIP" class="link">Source</a> <a href="#v:activateMasterIP" class="selflink">#</a></p><div class="doc"><p>Activate the master IP address.</p></div></div><div class="top"><p class="src"><a id="v:checkMain" class="def">checkMain</a> :: <a href="Ganeti-Daemon.html#t:CheckFn" title="Ganeti.Daemon">CheckFn</a> () <a href="Ganeti/Query/Server.html#checkMain" class="link">Source</a> <a href="#v:checkMain" class="selflink">#</a></p><div class="doc"><p>Check function for luxid.</p></div></div><div class="top"><p class="src"><a id="v:prepMain" class="def">prepMain</a> :: <a href="Ganeti-Daemon.html#t:PrepFn" title="Ganeti.Daemon">PrepFn</a> () <a href="Ganeti-Query-Server.html#t:PrepResult" title="Ganeti.Query.Server">PrepResult</a> <a href="Ganeti/Query/Server.html#prepMain" class="link">Source</a> <a href="#v:prepMain" class="selflink">#</a></p><div class="doc"><p>Prepare function for luxid.</p></div></div><div class="top"><p class="src"><a id="v:main" class="def">main</a> :: <a href="Ganeti-Daemon.html#t:MainFn" title="Ganeti.Daemon">MainFn</a> () <a href="Ganeti-Query-Server.html#t:PrepResult" title="Ganeti.Query.Server">PrepResult</a> <a href="Ganeti/Query/Server.html#main" class="link">Source</a> <a href="#v:main" class="selflink">#</a></p><div class="doc"><p>Main function.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>