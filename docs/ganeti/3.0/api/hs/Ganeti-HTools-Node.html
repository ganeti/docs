<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.HTools.Node</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/HTools/Node.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.HTools.Node</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Type declarations</a></li><li><a href="#g:2">Helper functions</a></li><li><a href="#g:3">Initialization functions</a></li><li><a href="#g:4">Diagnostic functions</a></li><li><a href="#g:5">Update functions</a></li><li><a href="#g:6">Stats functions</a></li><li><a href="#g:7">Node graph functions</a></li><li><a href="#g:8">Making of a Graph from a node/instance list</a></li><li><a href="#g:9">Display functions</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Module describing a node.</p><p>All updates are functional (copy-based) and return a new node with
    updated value.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Node">Node</a> = <a href="#v:Node">Node</a> {<ul class="subs"><li><a href="#v:name">name</a> :: String</li><li><a href="#v:alias">alias</a> :: String</li><li><a href="#v:tMem">tMem</a> :: Double</li><li><a href="#v:nMem">nMem</a> :: Int</li><li><a href="#v:iMem">iMem</a> :: Int</li><li><a href="#v:fMem">fMem</a> :: Int</li><li><a href="#v:fMemForth">fMemForth</a> :: Int</li><li><a href="#v:xMem">xMem</a> :: Int</li><li><a href="#v:tDsk">tDsk</a> :: Double</li><li><a href="#v:fDsk">fDsk</a> :: Int</li><li><a href="#v:fDskForth">fDskForth</a> :: Int</li><li><a href="#v:tCpu">tCpu</a> :: Double</li><li><a href="#v:tCpuSpeed">tCpuSpeed</a> :: Double</li><li><a href="#v:nCpu">nCpu</a> :: Int</li><li><a href="#v:uCpu">uCpu</a> :: Int</li><li><a href="#v:uCpuForth">uCpuForth</a> :: Int</li><li><a href="#v:tSpindles">tSpindles</a> :: Int</li><li><a href="#v:fSpindles">fSpindles</a> :: Int</li><li><a href="#v:fSpindlesForth">fSpindlesForth</a> :: Int</li><li><a href="#v:pList">pList</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</li><li><a href="#v:pListForth">pListForth</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</li><li><a href="#v:sList">sList</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</li><li><a href="#v:sListForth">sListForth</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</li><li><a href="#v:idx">idx</a> :: <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a></li><li><a href="#v:peers">peers</a> :: <a href="Ganeti-HTools-PeerMap.html#t:PeerMap" title="Ganeti.HTools.PeerMap">PeerMap</a></li><li><a href="#v:failN1">failN1</a> :: Bool</li><li><a href="#v:failN1Forth">failN1Forth</a> :: Bool</li><li><a href="#v:rMem">rMem</a> :: Int</li><li><a href="#v:rMemForth">rMemForth</a> :: Int</li><li><a href="#v:pMem">pMem</a> :: Double</li><li><a href="#v:pMemForth">pMemForth</a> :: Double</li><li><a href="#v:pDsk">pDsk</a> :: Double</li><li><a href="#v:pDskForth">pDskForth</a> :: Double</li><li><a href="#v:pRem">pRem</a> :: Double</li><li><a href="#v:pRemForth">pRemForth</a> :: Double</li><li><a href="#v:pCpu">pCpu</a> :: Double</li><li><a href="#v:pCpuForth">pCpuForth</a> :: Double</li><li><a href="#v:mDsk">mDsk</a> :: Double</li><li><a href="#v:loDsk">loDsk</a> :: Int</li><li><a href="#v:hiCpu">hiCpu</a> :: Int</li><li><a href="#v:hiSpindles">hiSpindles</a> :: Double</li><li><a href="#v:instSpindles">instSpindles</a> :: Double</li><li><a href="#v:instSpindlesForth">instSpindlesForth</a> :: Double</li><li><a href="#v:offline">offline</a> :: Bool</li><li><a href="#v:isMaster">isMaster</a> :: Bool</li><li><a href="#v:nTags">nTags</a> :: [String]</li><li><a href="#v:utilPool">utilPool</a> :: <a href="Ganeti-HTools-Types.html#t:DynUtil" title="Ganeti.HTools.Types">DynUtil</a></li><li><a href="#v:utilLoad">utilLoad</a> :: <a href="Ganeti-HTools-Types.html#t:DynUtil" title="Ganeti.HTools.Types">DynUtil</a></li><li><a href="#v:utilLoadForth">utilLoadForth</a> :: <a href="Ganeti-HTools-Types.html#t:DynUtil" title="Ganeti.HTools.Types">DynUtil</a></li><li><a href="#v:pTags">pTags</a> :: TagMap</li><li><a href="#v:group">group</a> :: <a href="Ganeti-HTools-Types.html#t:Gdx" title="Ganeti.HTools.Types">Gdx</a></li><li><a href="#v:iPolicy">iPolicy</a> :: <a href="Ganeti-HTools-Types.html#t:IPolicy" title="Ganeti.HTools.Types">IPolicy</a></li><li><a href="#v:exclStorage">exclStorage</a> :: Bool</li><li><a href="#v:migTags">migTags</a> :: Set String</li><li><a href="#v:rmigTags">rmigTags</a> :: Set String</li><li><a href="#v:locationTags">locationTags</a> :: Set String</li><li><a href="#v:locationScore">locationScore</a> :: Int</li><li><a href="#v:instanceMap">instanceMap</a> :: Map (String, String) Int</li><li><a href="#v:hypervisor">hypervisor</a> :: Maybe <a href="Ganeti-Types.html#t:Hypervisor" title="Ganeti.Types">Hypervisor</a></li></ul>}</li><li class="src short"><a href="#v:pCpuEff">pCpuEff</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double</li><li class="src short"><a href="#v:pCpuEffForth">pCpuEffForth</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double</li><li class="src short"><span class="keyword">type</span> <a href="#t:AssocList">AssocList</a> = [(<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>, <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>)]</li><li class="src short"><span class="keyword">type</span> <a href="#t:List">List</a> = <a href="Ganeti-HTools-Container.html#t:Container" title="Ganeti.HTools.Container">Container</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:noSecondary">noSecondary</a> :: <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a></li><li class="src short"><a href="#v:addTags">addTags</a> :: Ord k =&gt; Map k Int -&gt; [k] -&gt; Map k Int</li><li class="src short"><a href="#v:delTags">delTags</a> :: Ord k =&gt; Map k Int -&gt; [k] -&gt; Map k Int</li><li class="src short"><a href="#v:rejectAddTags">rejectAddTags</a> :: TagMap -&gt; [String] -&gt; Bool</li><li class="src short"><a href="#v:conflictingPrimaries">conflictingPrimaries</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:haveExclStorage">haveExclStorage</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; Bool</li><li class="src short"><a href="#v:create">create</a> :: String -&gt; Double -&gt; Int -&gt; Int -&gt; Double -&gt; Int -&gt; Double -&gt; Int -&gt; Bool -&gt; Int -&gt; Int -&gt; <a href="Ganeti-HTools-Types.html#t:Gdx" title="Ganeti.HTools.Types">Gdx</a> -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setIdx">setIdx</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setAlias">setAlias</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setOffline">setOffline</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setMaster">setMaster</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setNodeTags">setNodeTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [String] -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setMigrationTags">setMigrationTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Set String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setRecvMigrationTags">setRecvMigrationTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Set String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setLocationTags">setLocationTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Set String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setHypervisor">setHypervisor</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-Types.html#t:Hypervisor" title="Ganeti.Types">Hypervisor</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setMdsk">setMdsk</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setMcpu">setMcpu</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setPolicy">setPolicy</a> :: <a href="Ganeti-HTools-Types.html#t:IPolicy" title="Ganeti.HTools.Types">IPolicy</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:buildPeers">buildPeers</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:calcFmemOfflineOrForthcoming">calcFmemOfflineOrForthcoming</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Container.html#t:Container" title="Ganeti.HTools.Container">Container</a> <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; Int</li><li class="src short"><a href="#v:setPri">setPri</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:setSec">setSec</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:getPolicyHealth">getPolicyHealth</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> ()</li><li class="src short"><a href="#v:setCpuSpeed">setCpuSpeed</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:removePri">removePri</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:removeSec">removeSec</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:addPri">addPri</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:addPriEx">addPriEx</a> :: Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:addSec">addSec</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:addSecEx">addSecEx</a> :: Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:addSecExEx">addSecExEx</a> :: Bool -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:checkMigration">checkMigration</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> ()</li><li class="src short"><a href="#v:availDisk">availDisk</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:iDsk">iDsk</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:recordedFreeMem">recordedFreeMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:missingMem">missingMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:unallocatedMem">unallocatedMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:availMem">availMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:availCpu">availCpu</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int</li><li class="src short"><a href="#v:mkNodeGraph">mkNodeGraph</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; Maybe Graph</li><li class="src short"><a href="#v:mkRebootNodeGraph">mkRebootNodeGraph</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; Maybe Graph</li><li class="src short"><a href="#v:showField">showField</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; String -&gt; String</li><li class="src short"><a href="#v:showHeader">showHeader</a> :: String -&gt; (String, Bool)</li><li class="src short"><a href="#v:list">list</a> :: [String] -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [String]</li><li class="src short"><a href="#v:genPowerOnOpCodes">genPowerOnOpCodes</a> :: Monad m =&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; m [<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]</li><li class="src short"><a href="#v:genPowerOffOpCodes">genPowerOffOpCodes</a> :: Monad m =&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; m [<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]</li><li class="src short"><a href="#v:genAddTagsOpCode">genAddTagsOpCode</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [String] -&gt; <a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a></li><li class="src short"><a href="#v:defaultFields">defaultFields</a> :: [String]</li><li class="src short"><a href="#v:computeGroups">computeGroups</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; [(<a href="Ganeti-HTools-Types.html#t:Gdx" title="Ganeti.HTools.Types">Gdx</a>, [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>])]</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Type declarations</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Node" class="def">Node</a> <a href="Ganeti/HTools/Node.html#Node" class="link">Source</a> <a href="#t:Node" class="selflink">#</a></p><div class="doc"><p>The node type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Node" class="def">Node</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:name" class="def">name</a> :: String</dfn><div class="doc"><p>The node name</p></div></li><li><dfn class="src"><a id="v:alias" class="def">alias</a> :: String</dfn><div class="doc"><p>The shortened name (for display purposes)</p></div></li><li><dfn class="src"><a id="v:tMem" class="def">tMem</a> :: Double</dfn><div class="doc"><p>Total memory (MiB) (state-of-world)</p></div></li><li><dfn class="src"><a id="v:nMem" class="def">nMem</a> :: Int</dfn><div class="doc"><p>Node memory (MiB) (state-of-record)</p></div></li><li><dfn class="src"><a id="v:iMem" class="def">iMem</a> :: Int</dfn><div class="doc"><p>Instance memory (MiB) (state-of-record)</p></div></li><li><dfn class="src"><a id="v:fMem" class="def">fMem</a> :: Int</dfn><div class="doc"><p>Free memory (MiB) (state-of-world)</p></div></li><li><dfn class="src"><a id="v:fMemForth" class="def">fMemForth</a> :: Int</dfn><div class="doc"><p>Free memory (MiB) including forthcoming
   instances TODO: Use state of record calculations
   for forthcoming instances (see unallocatedMem)</p></div></li><li><dfn class="src"><a id="v:xMem" class="def">xMem</a> :: Int</dfn><div class="doc"><p>Unaccounted memory (MiB)</p></div></li><li><dfn class="src"><a id="v:tDsk" class="def">tDsk</a> :: Double</dfn><div class="doc"><p>Total disk space (MiB)</p></div></li><li><dfn class="src"><a id="v:fDsk" class="def">fDsk</a> :: Int</dfn><div class="doc"><p>Free disk space (MiB)</p></div></li><li><dfn class="src"><a id="v:fDskForth" class="def">fDskForth</a> :: Int</dfn><div class="doc"><p>Free disk space (MiB) including forthcoming
   instances</p></div></li><li><dfn class="src"><a id="v:tCpu" class="def">tCpu</a> :: Double</dfn><div class="doc"><p>Total CPU count</p></div></li><li><dfn class="src"><a id="v:tCpuSpeed" class="def">tCpuSpeed</a> :: Double</dfn><div class="doc"><p>Relative CPU speed</p></div></li><li><dfn class="src"><a id="v:nCpu" class="def">nCpu</a> :: Int</dfn><div class="doc"><p>VCPUs used by the node OS</p></div></li><li><dfn class="src"><a id="v:uCpu" class="def">uCpu</a> :: Int</dfn><div class="doc"><p>Used VCPU count</p></div></li><li><dfn class="src"><a id="v:uCpuForth" class="def">uCpuForth</a> :: Int</dfn><div class="doc"><p>Used VCPU count including forthcoming instances</p></div></li><li><dfn class="src"><a id="v:tSpindles" class="def">tSpindles</a> :: Int</dfn><div class="doc"><p>Node spindles (spindle_count node parameter,
 or actual spindles, see note below)</p></div></li><li><dfn class="src"><a id="v:fSpindles" class="def">fSpindles</a> :: Int</dfn><div class="doc"><p>Free spindles (see note below)</p></div></li><li><dfn class="src"><a id="v:fSpindlesForth" class="def">fSpindlesForth</a> :: Int</dfn><div class="doc"><p>Free spindles (see note below) including
   forthcoming instances</p></div></li><li><dfn class="src"><a id="v:pList" class="def">pList</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</dfn><div class="doc"><p>List of primary instance indices</p></div></li><li><dfn class="src"><a id="v:pListForth" class="def">pListForth</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</dfn><div class="doc"><p>List of primary instance indices including
   forthcoming instances</p></div></li><li><dfn class="src"><a id="v:sList" class="def">sList</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</dfn><div class="doc"><p>List of secondary instance indices</p></div></li><li><dfn class="src"><a id="v:sListForth" class="def">sListForth</a> :: [<a href="Ganeti-HTools-Types.html#t:Idx" title="Ganeti.HTools.Types">Idx</a>]</dfn><div class="doc"><p>List of secondary instance indices including
   forthcoming instances</p></div></li><li><dfn class="src"><a id="v:idx" class="def">idx</a> :: <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a></dfn><div class="doc"><p>Internal index for book-keeping</p></div></li><li><dfn class="src"><a id="v:peers" class="def">peers</a> :: <a href="Ganeti-HTools-PeerMap.html#t:PeerMap" title="Ganeti.HTools.PeerMap">PeerMap</a></dfn><div class="doc"><p>Pnode to instance mapping</p></div></li><li><dfn class="src"><a id="v:failN1" class="def">failN1</a> :: Bool</dfn><div class="doc"><p>Whether the node has failed n1</p></div></li><li><dfn class="src"><a id="v:failN1Forth" class="def">failN1Forth</a> :: Bool</dfn><div class="doc"><p>Whether the node has failed n1, including
   forthcoming instances</p></div></li><li><dfn class="src"><a id="v:rMem" class="def">rMem</a> :: Int</dfn><div class="doc"><p>Maximum memory needed for failover by
 primaries of this node</p></div></li><li><dfn class="src"><a id="v:rMemForth" class="def">rMemForth</a> :: Int</dfn><div class="doc"><p>Maximum memory needed for failover by
   primaries of this node, including forthcoming
   instances</p></div></li><li><dfn class="src"><a id="v:pMem" class="def">pMem</a> :: Double</dfn><div class="doc"><p>Percent of free memory</p></div></li><li><dfn class="src"><a id="v:pMemForth" class="def">pMemForth</a> :: Double</dfn><div class="doc"><p>Percent of free memory including forthcoming
   instances</p></div></li><li><dfn class="src"><a id="v:pDsk" class="def">pDsk</a> :: Double</dfn><div class="doc"><p>Percent of free disk</p></div></li><li><dfn class="src"><a id="v:pDskForth" class="def">pDskForth</a> :: Double</dfn><div class="doc"><p>Percent of free disk including forthcoming
   instances</p></div></li><li><dfn class="src"><a id="v:pRem" class="def">pRem</a> :: Double</dfn><div class="doc"><p>Percent of reserved memory</p></div></li><li><dfn class="src"><a id="v:pRemForth" class="def">pRemForth</a> :: Double</dfn><div class="doc"><p>Percent of reserved memory including
   forthcoming instances</p></div></li><li><dfn class="src"><a id="v:pCpu" class="def">pCpu</a> :: Double</dfn><div class="doc"><p>Ratio of virtual to physical CPUs</p></div></li><li><dfn class="src"><a id="v:pCpuForth" class="def">pCpuForth</a> :: Double</dfn><div class="doc"><p>Ratio of virtual to physical CPUs including
   forthcoming instances</p></div></li><li><dfn class="src"><a id="v:mDsk" class="def">mDsk</a> :: Double</dfn><div class="doc"><p>Minimum free disk ratio</p></div></li><li><dfn class="src"><a id="v:loDsk" class="def">loDsk</a> :: Int</dfn><div class="doc"><p>Autocomputed from mDsk low disk
 threshold</p></div></li><li><dfn class="src"><a id="v:hiCpu" class="def">hiCpu</a> :: Int</dfn><div class="doc"><p>Autocomputed from mCpu high cpu
 threshold</p></div></li><li><dfn class="src"><a id="v:hiSpindles" class="def">hiSpindles</a> :: Double</dfn><div class="doc"><p>Limit auto-computed from policy spindle_ratio
 and the node spindle count (see note below)</p></div></li><li><dfn class="src"><a id="v:instSpindles" class="def">instSpindles</a> :: Double</dfn><div class="doc"><p>Spindles used by instances (see note below)</p></div></li><li><dfn class="src"><a id="v:instSpindlesForth" class="def">instSpindlesForth</a> :: Double</dfn><div class="doc"><p>Spindles used by instances (see note
   below) including forthcoming instances</p></div></li><li><dfn class="src"><a id="v:offline" class="def">offline</a> :: Bool</dfn><div class="doc"><p>Whether the node should not be used for
 allocations and skipped from score
 computations</p></div></li><li><dfn class="src"><a id="v:isMaster" class="def">isMaster</a> :: Bool</dfn><div class="doc"><p>Whether the node is the master node</p></div></li><li><dfn class="src"><a id="v:nTags" class="def">nTags</a> :: [String]</dfn><div class="doc"><p>The node tags for this node</p></div></li><li><dfn class="src"><a id="v:utilPool" class="def">utilPool</a> :: <a href="Ganeti-HTools-Types.html#t:DynUtil" title="Ganeti.HTools.Types">DynUtil</a></dfn><div class="doc"><p>Total utilisation capacity</p></div></li><li><dfn class="src"><a id="v:utilLoad" class="def">utilLoad</a> :: <a href="Ganeti-HTools-Types.html#t:DynUtil" title="Ganeti.HTools.Types">DynUtil</a></dfn><div class="doc"><p>Sum of instance utilisation</p></div></li><li><dfn class="src"><a id="v:utilLoadForth" class="def">utilLoadForth</a> :: <a href="Ganeti-HTools-Types.html#t:DynUtil" title="Ganeti.HTools.Types">DynUtil</a></dfn><div class="doc"><p>Sum of instance utilisation, including
   forthcoming instances</p></div></li><li><dfn class="src"><a id="v:pTags" class="def">pTags</a> :: TagMap</dfn><div class="doc"><p>Primary instance exclusion tags and their
   count, including forthcoming instances</p></div></li><li><dfn class="src"><a id="v:group" class="def">group</a> :: <a href="Ganeti-HTools-Types.html#t:Gdx" title="Ganeti.HTools.Types">Gdx</a></dfn><div class="doc"><p>The node's group (index)</p></div></li><li><dfn class="src"><a id="v:iPolicy" class="def">iPolicy</a> :: <a href="Ganeti-HTools-Types.html#t:IPolicy" title="Ganeti.HTools.Types">IPolicy</a></dfn><div class="doc"><p>The instance policy (of the node's group)</p></div></li><li><dfn class="src"><a id="v:exclStorage" class="def">exclStorage</a> :: Bool</dfn><div class="doc"><p>Effective value of exclusive_storage</p></div></li><li><dfn class="src"><a id="v:migTags" class="def">migTags</a> :: Set String</dfn><div class="doc"><p>migration-relevant tags</p></div></li><li><dfn class="src"><a id="v:rmigTags" class="def">rmigTags</a> :: Set String</dfn><div class="doc"><p>migration tags able to receive</p></div></li><li><dfn class="src"><a id="v:locationTags" class="def">locationTags</a> :: Set String</dfn><div class="doc"><p>common-failure domains the node belongs
 to</p></div></li><li><dfn class="src"><a id="v:locationScore" class="def">locationScore</a> :: Int</dfn><div class="doc"><p>Sum of instance location and desired location
 scores</p></div></li><li><dfn class="src"><a id="v:instanceMap" class="def">instanceMap</a> :: Map (String, String) Int</dfn><div class="doc"><p>Number of instances with
 each exclusion/location tags
 pair</p></div></li><li><dfn class="src"><a id="v:hypervisor" class="def">hypervisor</a> :: Maybe <a href="Ganeti-Types.html#t:Hypervisor" title="Ganeti.Types">Hypervisor</a></dfn><div class="doc"><p>Active hypervisor on the node</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Node" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Node:Eq:1"></span> Eq <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></span> <a href="#t:Node" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Node:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-HTools-Node.html">Ganeti.HTools.Node</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Node:Show:2"></span> Show <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></span> <a href="#t:Node" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Node:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-HTools-Node.html">Ganeti.HTools.Node</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Node:Element:3"></span> <a href="Ganeti-HTools-Types.html#t:Element" title="Ganeti.HTools.Types">Element</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></span> <a href="#t:Node" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Node:Element:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-HTools-Node.html">Ganeti.HTools.Node</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:nameOf">nameOf</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; String <a href="Ganeti/HTools/Types.html#nameOf" class="link">Source</a> <a href="#v:nameOf" class="selflink">#</a></p><p class="src"><a href="#v:allNames">allNames</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [String] <a href="Ganeti/HTools/Types.html#allNames" class="link">Source</a> <a href="#v:allNames" class="selflink">#</a></p><p class="src"><a href="#v:idxOf">idxOf</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Types.html#idxOf" class="link">Source</a> <a href="#v:idxOf" class="selflink">#</a></p><p class="src"><a href="#v:setAlias">setAlias</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Types.html#setAlias" class="link">Source</a> <a href="#v:setAlias" class="selflink">#</a></p><p class="src"><a href="#v:computeAlias">computeAlias</a> :: String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Types.html#computeAlias" class="link">Source</a> <a href="#v:computeAlias" class="selflink">#</a></p><p class="src"><a href="#v:setIdx">setIdx</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Types.html#setIdx" class="link">Source</a> <a href="#v:setIdx" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Node:Arbitrary:4"></span> Arbitrary <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Node:Arbitrary:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-Ganeti-HTools-Node.html">Test.Ganeti.HTools.Node</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>]</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:pCpuEff" class="def">pCpuEff</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double <a href="Ganeti/HTools/Node.html#pCpuEff" class="link">Source</a> <a href="#v:pCpuEff" class="selflink">#</a></p><div class="doc"><p>Derived parameter: ratio of virutal to physical CPUs, weighted
 by CPU speed.</p></div></div><div class="top"><p class="src"><a id="v:pCpuEffForth" class="def">pCpuEffForth</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double <a href="Ganeti/HTools/Node.html#pCpuEffForth" class="link">Source</a> <a href="#v:pCpuEffForth" class="selflink">#</a></p><div class="doc"><p>Derived parameter: ratio of virutal to physical CPUs, weighted
 by CPU speed and taking forthcoming instances into account.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:AssocList" class="def">AssocList</a> = [(<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>, <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>)] <a href="Ganeti/HTools/Node.html#AssocList" class="link">Source</a> <a href="#t:AssocList" class="selflink">#</a></p><div class="doc"><p>A simple name for the int, node association list.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:List" class="def">List</a> = <a href="Ganeti-HTools-Container.html#t:Container" title="Ganeti.HTools.Container">Container</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#List" class="link">Source</a> <a href="#t:List" class="selflink">#</a></p><div class="doc"><p>A simple name for a node map.</p></div></div><div class="top"><p class="src"><a id="v:noSecondary" class="def">noSecondary</a> :: <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> <a href="Ganeti/HTools/Node.html#noSecondary" class="link">Source</a> <a href="#v:noSecondary" class="selflink">#</a></p><div class="doc"><p>Constant node index for a non-moveable instance.</p></div></div><a href="#g:2" id="g:2"><h1>Helper functions</h1></a><div class="top"><p class="src"><a id="v:addTags" class="def">addTags</a> :: Ord k =&gt; Map k Int -&gt; [k] -&gt; Map k Int <a href="Ganeti/HTools/Node.html#addTags" class="link">Source</a> <a href="#v:addTags" class="selflink">#</a></p><div class="doc"><p>Add multiple values.</p></div></div><div class="top"><p class="src"><a id="v:delTags" class="def">delTags</a> :: Ord k =&gt; Map k Int -&gt; [k] -&gt; Map k Int <a href="Ganeti/HTools/Node.html#delTags" class="link">Source</a> <a href="#v:delTags" class="selflink">#</a></p><div class="doc"><p>Remove multiple value.</p></div></div><div class="top"><p class="src"><a id="v:rejectAddTags" class="def">rejectAddTags</a> :: TagMap -&gt; [String] -&gt; Bool <a href="Ganeti/HTools/Node.html#rejectAddTags" class="link">Source</a> <a href="#v:rejectAddTags" class="selflink">#</a></p><div class="doc"><p>Check if we can add a list of tags to a tagmap.</p></div></div><div class="top"><p class="src"><a id="v:conflictingPrimaries" class="def">conflictingPrimaries</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#conflictingPrimaries" class="link">Source</a> <a href="#v:conflictingPrimaries" class="selflink">#</a></p><div class="doc"><p>Check how many primary instances have conflicting tags. The
 algorithm to compute this is to sum the count of all tags, then
 subtract the size of the tag map (since each tag has at least one,
 non-conflicting instance); this is equivalent to summing the
 values in the tag map minus one.</p></div></div><div class="top"><p class="src"><a id="v:haveExclStorage" class="def">haveExclStorage</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; Bool <a href="Ganeti/HTools/Node.html#haveExclStorage" class="link">Source</a> <a href="#v:haveExclStorage" class="selflink">#</a></p><div class="doc"><p>Is exclusive storage enabled on any node?</p></div></div><a href="#g:3" id="g:3"><h1>Initialization functions</h1></a><div class="top"><p class="src"><a id="v:create" class="def">create</a> :: String -&gt; Double -&gt; Int -&gt; Int -&gt; Double -&gt; Int -&gt; Double -&gt; Int -&gt; Bool -&gt; Int -&gt; Int -&gt; <a href="Ganeti-HTools-Types.html#t:Gdx" title="Ganeti.HTools.Types">Gdx</a> -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#create" class="link">Source</a> <a href="#v:create" class="selflink">#</a></p><div class="doc"><p>Create a new node.</p><p>The index and the peers maps are empty, and will be need to be
 update later via the <code><a href="Ganeti-HTools-Node.html#v:setIdx" title="Ganeti.HTools.Node">setIdx</a></code> and <code><a href="Ganeti-HTools-Node.html#v:buildPeers" title="Ganeti.HTools.Node">buildPeers</a></code> functions.</p></div></div><div class="top"><p class="src"><a id="v:setIdx" class="def">setIdx</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setIdx" class="link">Source</a> <a href="#v:setIdx" class="selflink">#</a></p><div class="doc"><p>Changes the index.</p><p>This is used only during the building of the data structures.</p></div></div><div class="top"><p class="src"><a id="v:setAlias" class="def">setAlias</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setAlias" class="link">Source</a> <a href="#v:setAlias" class="selflink">#</a></p><div class="doc"><p>Changes the alias.</p><p>This is used only during the building of the data structures.</p></div></div><div class="top"><p class="src"><a id="v:setOffline" class="def">setOffline</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setOffline" class="link">Source</a> <a href="#v:setOffline" class="selflink">#</a></p><div class="doc"><p>Sets the offline attribute.</p></div></div><div class="top"><p class="src"><a id="v:setMaster" class="def">setMaster</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setMaster" class="link">Source</a> <a href="#v:setMaster" class="selflink">#</a></p><div class="doc"><p>Sets the master attribute</p></div></div><div class="top"><p class="src"><a id="v:setNodeTags" class="def">setNodeTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [String] -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setNodeTags" class="link">Source</a> <a href="#v:setNodeTags" class="selflink">#</a></p><div class="doc"><p>Sets the node tags attribute</p></div></div><div class="top"><p class="src"><a id="v:setMigrationTags" class="def">setMigrationTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Set String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setMigrationTags" class="link">Source</a> <a href="#v:setMigrationTags" class="selflink">#</a></p><div class="doc"><p>Set migration tags</p></div></div><div class="top"><p class="src"><a id="v:setRecvMigrationTags" class="def">setRecvMigrationTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Set String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setRecvMigrationTags" class="link">Source</a> <a href="#v:setRecvMigrationTags" class="selflink">#</a></p><div class="doc"><p>Set the migration tags a node is able to receive</p></div></div><div class="top"><p class="src"><a id="v:setLocationTags" class="def">setLocationTags</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Set String -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setLocationTags" class="link">Source</a> <a href="#v:setLocationTags" class="selflink">#</a></p><div class="doc"><p>Set the location tags</p></div></div><div class="top"><p class="src"><a id="v:setHypervisor" class="def">setHypervisor</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-Types.html#t:Hypervisor" title="Ganeti.Types">Hypervisor</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setHypervisor" class="link">Source</a> <a href="#v:setHypervisor" class="selflink">#</a></p><div class="doc"><p>Sets the hypervisor attribute.</p></div></div><div class="top"><p class="src"><a id="v:setMdsk" class="def">setMdsk</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setMdsk" class="link">Source</a> <a href="#v:setMdsk" class="selflink">#</a></p><div class="doc"><p>Sets the max disk usage ratio.</p></div></div><div class="top"><p class="src"><a id="v:setMcpu" class="def">setMcpu</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setMcpu" class="link">Source</a> <a href="#v:setMcpu" class="selflink">#</a></p><div class="doc"><p>Sets the max cpu usage ratio. This will update the node's
 ipolicy, losing sharing (but it should be a seldomly done operation).</p></div></div><div class="top"><p class="src"><a id="v:setPolicy" class="def">setPolicy</a> :: <a href="Ganeti-HTools-Types.html#t:IPolicy" title="Ganeti.HTools.Types">IPolicy</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setPolicy" class="link">Source</a> <a href="#v:setPolicy" class="selflink">#</a></p><div class="doc"><p>Sets the policy.</p></div></div><div class="top"><p class="src"><a id="v:buildPeers" class="def">buildPeers</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#buildPeers" class="link">Source</a> <a href="#v:buildPeers" class="selflink">#</a></p><div class="doc"><p>Builds the peer map for a given node.</p></div></div><div class="top"><p class="src"><a id="v:calcFmemOfflineOrForthcoming" class="def">calcFmemOfflineOrForthcoming</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Container.html#t:Container" title="Ganeti.HTools.Container">Container</a> <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; Int <a href="Ganeti/HTools/Node.html#calcFmemOfflineOrForthcoming" class="link">Source</a> <a href="#v:calcFmemOfflineOrForthcoming" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setPri" class="def">setPri</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setPri" class="link">Source</a> <a href="#v:setPri" class="selflink">#</a></p><div class="doc"><p>Assigns an instance to a node as primary and update the used VCPU
 count, utilisation data, tags map and desired location score.</p></div></div><div class="top"><p class="src"><a id="v:setSec" class="def">setSec</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setSec" class="link">Source</a> <a href="#v:setSec" class="selflink">#</a></p><div class="doc"><p>Assigns an instance to a node as secondary and updates disk utilisation.</p></div></div><a href="#g:4" id="g:4"><h1>Diagnostic functions</h1></a><div class="top"><p class="src"><a id="v:getPolicyHealth" class="def">getPolicyHealth</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> () <a href="Ganeti/HTools/Node.html#getPolicyHealth" class="link">Source</a> <a href="#v:getPolicyHealth" class="selflink">#</a></p><div class="doc"><p>For a node diagnose whether it conforms with all policies. The type
 is chosen to represent that of a no-op node operation.</p></div></div><a href="#g:5" id="g:5"><h1>Update functions</h1></a><div class="top"><p class="src"><a id="v:setCpuSpeed" class="def">setCpuSpeed</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Double -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#setCpuSpeed" class="link">Source</a> <a href="#v:setCpuSpeed" class="selflink">#</a></p><div class="doc"><p>Set the CPU speed</p></div></div><div class="top"><p class="src"><a id="v:removePri" class="def">removePri</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#removePri" class="link">Source</a> <a href="#v:removePri" class="selflink">#</a></p><div class="doc"><p>Removes a primary instance.</p></div></div><div class="top"><p class="src"><a id="v:removeSec" class="def">removeSec</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#removeSec" class="link">Source</a> <a href="#v:removeSec" class="selflink">#</a></p><div class="doc"><p>Removes a secondary instance.</p></div></div><div class="top"><p class="src"><a id="v:addPri" class="def">addPri</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#addPri" class="link">Source</a> <a href="#v:addPri" class="selflink">#</a></p><div class="doc"><p>Adds a primary instance (basic version).</p></div></div><div class="top"><p class="src"><a id="v:addPriEx" class="def">addPriEx</a> <a href="Ganeti/HTools/Node.html#addPriEx" class="link">Source</a> <a href="#v:addPriEx" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Bool</td><td class="doc"><p>Whether to override the N+1 and
 other <em>soft</em> checks, useful if we
 come from a worse status (e.g. offline).
 If this is True, forthcoming instances
 may exceed available Node resources.</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></td><td class="doc"><p>The target node</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a></td><td class="doc"><p>The instance to add</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></td><td class="doc"><p>The result of the operation,
 either the new version of the node
 or a failure mode</p></td></tr></table></div><div class="doc"><p>Adds a primary instance (extended version).</p></div></div><div class="top"><p class="src"><a id="v:addSec" class="def">addSec</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#addSec" class="link">Source</a> <a href="#v:addSec" class="selflink">#</a></p><div class="doc"><p>Adds a secondary instance (basic version).</p></div></div><div class="top"><p class="src"><a id="v:addSecEx" class="def">addSecEx</a> :: Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#addSecEx" class="link">Source</a> <a href="#v:addSecEx" class="selflink">#</a></p><div class="doc"><p>Adds a secondary instance (extended version).</p></div></div><div class="top"><p class="src"><a id="v:addSecExEx" class="def">addSecExEx</a> :: Bool -&gt; Bool -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Node.html#addSecExEx" class="link">Source</a> <a href="#v:addSecExEx" class="selflink">#</a></p><div class="doc"><p>Adds a secondary instance (doubly extended version). The first parameter
 tells <code><a href="Ganeti-HTools-Node.html#v:addSecExEx" title="Ganeti.HTools.Node">addSecExEx</a></code> to ignore disks completly. There is only one legitimate
 use case for this, and this is failing over a DRBD instance where the primary
 node is offline (and hence will become the secondary afterwards).</p></div></div><div class="top"><p class="src"><a id="v:checkMigration" class="def">checkMigration</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Types.html#t:OpResult" title="Ganeti.HTools.Types">OpResult</a> () <a href="Ganeti/HTools/Node.html#checkMigration" class="link">Source</a> <a href="#v:checkMigration" class="selflink">#</a></p><div class="doc"><p>Predicate on whether migration is supported between two nodes.</p></div></div><a href="#g:6" id="g:6"><h1>Stats functions</h1></a><div class="top"><p class="src"><a id="v:availDisk" class="def">availDisk</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#availDisk" class="link">Source</a> <a href="#v:availDisk" class="selflink">#</a></p><div class="doc"><p>Computes the amount of available disk on a given node.</p></div></div><div class="top"><p class="src"><a id="v:iDsk" class="def">iDsk</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#iDsk" class="link">Source</a> <a href="#v:iDsk" class="selflink">#</a></p><div class="doc"><p>Computes the amount of used disk on a given node.</p></div></div><div class="top"><p class="src"><a id="v:recordedFreeMem" class="def">recordedFreeMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#recordedFreeMem" class="link">Source</a> <a href="#v:recordedFreeMem" class="selflink">#</a></p><div class="doc"><p>Computes state-of-record free memory on the node.
 | TODO: Redefine this for memory overcommitment.</p></div></div><div class="top"><p class="src"><a id="v:missingMem" class="def">missingMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#missingMem" class="link">Source</a> <a href="#v:missingMem" class="selflink">#</a></p><div class="doc"><p>Computes the amount of missing memory on the node.
 NOTE: This formula uses free memory for calculations as opposed to
 used_memory in the definition, that's why it is the inverse.
 Explanations for missing memory (+) positive, (-) negative:
 (+) instances are using more memory that state-of-record
     - on KVM this might be due to the overhead per qemu process
     - on Xen manually upsized domains (xen mem-set)
 (+) on KVM non-qemu processes might be using more memory than what is
     reserved for node (no isolation)
 (-) on KVM qemu processes allocate memory on demand, thus an instance grows
     over its lifetime until it reaches state-of-record (+overhead)
 (-) on KVM KSM might be active
 (-) on Xen manually downsized domains (xen mem-set)</p></div></div><div class="top"><p class="src"><a id="v:unallocatedMem" class="def">unallocatedMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#unallocatedMem" class="link">Source</a> <a href="#v:unallocatedMem" class="selflink">#</a></p><div class="doc"><p>Computes the <code>guaranteed</code> free memory, that is the minimum of what
 is reported by the node (available bytes) and our calculation based on
 instance sizes (our records), thus considering missing memory.
 NOTE 1: During placement simulations, the recorded memory changes, as
 instances are added/removed from the node, thus we have to calculate the
 missingMem (correction) before altering state-of-record and then
 use that correction to estimate state-of-world memory usage _after_
 the placements are done rather than doing min(record, world).
 NOTE 2: This is still only an approximation on KVM. As we shuffle instances
 during the simulation we are considering their state-of-record size, but
 in the real world the moves would shuffle parts of missing memory as well.
 Unfortunately as long as we don't have a more finegrained model that can
 better explain missing memory (split down based on root causes), we can't
 do better.
 NOTE 3: This is a hard limit based on available bytes and our bookkeeping.
 In case of memory overcommitment, both recordedFreeMem and reportedFreeMem
 would be extended by swap size on KVM or baloon size on Xen (their nominal
 and reported values).</p></div></div><div class="top"><p class="src"><a id="v:availMem" class="def">availMem</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#availMem" class="link">Source</a> <a href="#v:availMem" class="selflink">#</a></p><div class="doc"><p>Computes the amount of available memory on a given node.
 Compared to unallocatedMem, this takes into account also memory reserved for
 secondary instances.
 NOTE: In case of memory overcommitment, there would be also an additional
 soft limit based on RAM size dedicated for instances and sum of
 state-of-record instance sizes (iMem): (tMem - nMem)*overcommit_ratio - iMem</p></div></div><div class="top"><p class="src"><a id="v:availCpu" class="def">availCpu</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Int <a href="Ganeti/HTools/Node.html#availCpu" class="link">Source</a> <a href="#v:availCpu" class="selflink">#</a></p><div class="doc"><p>Computes the amount of available memory on a given node.</p></div></div><a href="#g:7" id="g:7"><h1>Node graph functions</h1></a><a href="#g:8" id="g:8"><h1>Making of a Graph from a node/instance list</h1></a><div class="top"><p class="src"><a id="v:mkNodeGraph" class="def">mkNodeGraph</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; Maybe Graph <a href="Ganeti/HTools/Node.html#mkNodeGraph" class="link">Source</a> <a href="#v:mkNodeGraph" class="selflink">#</a></p><div class="doc"><p>Transform a Node + Instance list into a NodeGraph type.
 Returns Nothing if the node list is empty.</p></div></div><div class="top"><p class="src"><a id="v:mkRebootNodeGraph" class="def">mkRebootNodeGraph</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; Maybe Graph <a href="Ganeti/HTools/Node.html#mkRebootNodeGraph" class="link">Source</a> <a href="#v:mkRebootNodeGraph" class="selflink">#</a></p><div class="doc"><p>Transform a Nodes + Instances into a NodeGraph with all reboot exclusions.
 This includes edges between nodes that are the primary nodes of instances
 that have the same secondary node. Nodes not in the node list will not be
 part of the graph, but they are still considered for the edges arising from
 two instances having the same secondary node.
 Return Nothing if the node list is empty.</p></div></div><a href="#g:9" id="g:9"><h1>Display functions</h1></a><div class="top"><p class="src"><a id="v:showField" class="def">showField</a> <a href="Ganeti/HTools/Node.html#showField" class="link">Source</a> <a href="#v:showField" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></td><td class="doc"><p>Node which we're querying</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>Field name</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>Field value as string</p></td></tr></table></div><div class="doc"><p>Return a field for a given node.</p></div></div><div class="top"><p class="src"><a id="v:showHeader" class="def">showHeader</a> :: String -&gt; (String, Bool) <a href="Ganeti/HTools/Node.html#showHeader" class="link">Source</a> <a href="#v:showHeader" class="selflink">#</a></p><div class="doc"><p>Returns the header and numeric propery of a field.</p></div></div><div class="top"><p class="src"><a id="v:list" class="def">list</a> :: [String] -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [String] <a href="Ganeti/HTools/Node.html#list" class="link">Source</a> <a href="#v:list" class="selflink">#</a></p><div class="doc"><p>String converter for the node list functionality.</p></div></div><div class="top"><p class="src"><a id="v:genPowerOnOpCodes" class="def">genPowerOnOpCodes</a> :: Monad m =&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; m [<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>] <a href="Ganeti/HTools/Node.html#genPowerOnOpCodes" class="link">Source</a> <a href="#v:genPowerOnOpCodes" class="selflink">#</a></p><div class="doc"><p>Generate OpCode for powering on a list of nodes</p></div></div><div class="top"><p class="src"><a id="v:genPowerOffOpCodes" class="def">genPowerOffOpCodes</a> :: Monad m =&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; m [<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>] <a href="Ganeti/HTools/Node.html#genPowerOffOpCodes" class="link">Source</a> <a href="#v:genPowerOffOpCodes" class="selflink">#</a></p><div class="doc"><p>Generate OpCodes for powering off a list of nodes</p></div></div><div class="top"><p class="src"><a id="v:genAddTagsOpCode" class="def">genAddTagsOpCode</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; [String] -&gt; <a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a> <a href="Ganeti/HTools/Node.html#genAddTagsOpCode" class="link">Source</a> <a href="#v:genAddTagsOpCode" class="selflink">#</a></p><div class="doc"><p>Generate OpCodes for adding tags to a node</p></div></div><div class="top"><p class="src"><a id="v:defaultFields" class="def">defaultFields</a> :: [String] <a href="Ganeti/HTools/Node.html#defaultFields" class="link">Source</a> <a href="#v:defaultFields" class="selflink">#</a></p><div class="doc"><p>Constant holding the fields we're displaying by default.</p></div></div><div class="top"><p class="src"><a id="v:computeGroups" class="def">computeGroups</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; [(<a href="Ganeti-HTools-Types.html#t:Gdx" title="Ganeti.HTools.Types">Gdx</a>, [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>])] <a href="Ganeti/HTools/Node.html#computeGroups" class="link">Source</a> <a href="#v:computeGroups" class="selflink">#</a></p><div class="doc"><p>Split a list of nodes into a list of (node group UUID, list of
 associated nodes).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.20.0</p></div></body></html>