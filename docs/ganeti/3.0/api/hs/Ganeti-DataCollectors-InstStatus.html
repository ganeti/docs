<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.DataCollectors.InstStatus</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/DataCollectors/InstStatus.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.DataCollectors.InstStatus</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Command line options</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Instance status data collector.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:dcName">dcName</a> :: String</li><li class="src short"><a href="#v:dcVersion">dcVersion</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCVersion" title="Ganeti.DataCollectors.Types">DCVersion</a></li><li class="src short"><a href="#v:dcFormatVersion">dcFormatVersion</a> :: Int</li><li class="src short"><a href="#v:dcCategory">dcCategory</a> :: Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCCategory" title="Ganeti.DataCollectors.Types">DCCategory</a></li><li class="src short"><a href="#v:dcKind">dcKind</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCKind" title="Ganeti.DataCollectors.Types">DCKind</a></li><li class="src short"><a href="#v:dcReport">dcReport</a> :: IO <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a></li><li class="src short"><a href="#v:options">options</a> :: IO [<a href="Ganeti-DataCollectors-CLI.html#t:OptType" title="Ganeti.DataCollectors.CLI">OptType</a>]</li><li class="src short"><a href="#v:arguments">arguments</a> :: [<a href="Ganeti-Common.html#t:ArgCompletion" title="Ganeti.Common">ArgCompletion</a>]</li><li class="src short"><a href="#v:getReasonTrail">getReasonTrail</a> :: String -&gt; IO <a href="Ganeti-Types.html#t:ReasonTrail" title="Ganeti.Types">ReasonTrail</a></li><li class="src short"><a href="#v:computeStatusField">computeStatusField</a> :: <a href="Ganeti-Types.html#t:AdminState" title="Ganeti.Types">AdminState</a> -&gt; <a href="Ganeti-Hypervisor-Xen-Types.html#t:ActualState" title="Ganeti.Hypervisor.Xen.Types">ActualState</a> -&gt; <a href="Ganeti-DataCollectors-Types.html#t:DCStatus" title="Ganeti.DataCollectors.Types">DCStatus</a></li><li class="src short"><a href="#v:buildStatus">buildStatus</a> :: Map String <a href="Ganeti-Hypervisor-Xen-Types.html#t:Domain" title="Ganeti.Hypervisor.Xen.Types">Domain</a> -&gt; Map Int <a href="Ganeti-Hypervisor-Xen-Types.html#t:UptimeInfo" title="Ganeti.Hypervisor.Xen.Types">UptimeInfo</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:RealInstanceData" title="Ganeti.Objects.Instance">RealInstanceData</a> -&gt; IO <a href="Ganeti-DataCollectors-InstStatusTypes.html#t:InstStatus" title="Ganeti.DataCollectors.InstStatusTypes">InstStatus</a></li><li class="src short"><a href="#v:computeGlobalStatus">computeGlobalStatus</a> :: [<a href="Ganeti-DataCollectors-InstStatusTypes.html#t:InstStatus" title="Ganeti.DataCollectors.InstStatusTypes">InstStatus</a>] -&gt; <a href="Ganeti-DataCollectors-Types.html#t:DCStatus" title="Ganeti.DataCollectors.Types">DCStatus</a></li><li class="src short"><a href="#v:buildInstStatusReport">buildInstStatusReport</a> :: Maybe String -&gt; Maybe Int -&gt; IO <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a></li><li class="src short"><a href="#v:main">main</a> :: <a href="Ganeti-DataCollectors-CLI.html#t:Options" title="Ganeti.DataCollectors.CLI">Options</a> -&gt; [String] -&gt; IO ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:dcName" class="def">dcName</a> :: String <a href="Ganeti/DataCollectors/InstStatus.html#dcName" class="link">Source</a> <a href="#v:dcName" class="selflink">#</a></p><div class="doc"><p>The name of this data collector.</p></div></div><div class="top"><p class="src"><a id="v:dcVersion" class="def">dcVersion</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCVersion" title="Ganeti.DataCollectors.Types">DCVersion</a> <a href="Ganeti/DataCollectors/InstStatus.html#dcVersion" class="link">Source</a> <a href="#v:dcVersion" class="selflink">#</a></p><div class="doc"><p>The version of this data collector.</p></div></div><div class="top"><p class="src"><a id="v:dcFormatVersion" class="def">dcFormatVersion</a> :: Int <a href="Ganeti/DataCollectors/InstStatus.html#dcFormatVersion" class="link">Source</a> <a href="#v:dcFormatVersion" class="selflink">#</a></p><div class="doc"><p>The version number for the data format of this data collector.</p></div></div><div class="top"><p class="src"><a id="v:dcCategory" class="def">dcCategory</a> :: Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCCategory" title="Ganeti.DataCollectors.Types">DCCategory</a> <a href="Ganeti/DataCollectors/InstStatus.html#dcCategory" class="link">Source</a> <a href="#v:dcCategory" class="selflink">#</a></p><div class="doc"><p>The category of this data collector.</p></div></div><div class="top"><p class="src"><a id="v:dcKind" class="def">dcKind</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCKind" title="Ganeti.DataCollectors.Types">DCKind</a> <a href="Ganeti/DataCollectors/InstStatus.html#dcKind" class="link">Source</a> <a href="#v:dcKind" class="selflink">#</a></p><div class="doc"><p>The kind of this data collector.</p></div></div><div class="top"><p class="src"><a id="v:dcReport" class="def">dcReport</a> :: IO <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> <a href="Ganeti/DataCollectors/InstStatus.html#dcReport" class="link">Source</a> <a href="#v:dcReport" class="selflink">#</a></p><div class="doc"><p>The report of this data collector.</p></div></div><a href="#g:1" id="g:1"><h1>Command line options</h1></a><div class="top"><p class="src"><a id="v:options" class="def">options</a> :: IO [<a href="Ganeti-DataCollectors-CLI.html#t:OptType" title="Ganeti.DataCollectors.CLI">OptType</a>] <a href="Ganeti/DataCollectors/InstStatus.html#options" class="link">Source</a> <a href="#v:options" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:arguments" class="def">arguments</a> :: [<a href="Ganeti-Common.html#t:ArgCompletion" title="Ganeti.Common">ArgCompletion</a>] <a href="Ganeti/DataCollectors/InstStatus.html#arguments" class="link">Source</a> <a href="#v:arguments" class="selflink">#</a></p><div class="doc"><p>The list of arguments supported by the program.</p></div></div><div class="top"><p class="src"><a id="v:getReasonTrail" class="def">getReasonTrail</a> :: String -&gt; IO <a href="Ganeti-Types.html#t:ReasonTrail" title="Ganeti.Types">ReasonTrail</a> <a href="Ganeti/DataCollectors/InstStatus.html#getReasonTrail" class="link">Source</a> <a href="#v:getReasonTrail" class="selflink">#</a></p><div class="doc"><p>Try to get the reason trail for an instance. In case it is not possible,
 log the failure and return an empty list instead.</p></div></div><div class="top"><p class="src"><a id="v:computeStatusField" class="def">computeStatusField</a> :: <a href="Ganeti-Types.html#t:AdminState" title="Ganeti.Types">AdminState</a> -&gt; <a href="Ganeti-Hypervisor-Xen-Types.html#t:ActualState" title="Ganeti.Hypervisor.Xen.Types">ActualState</a> -&gt; <a href="Ganeti-DataCollectors-Types.html#t:DCStatus" title="Ganeti.DataCollectors.Types">DCStatus</a> <a href="Ganeti/DataCollectors/InstStatus.html#computeStatusField" class="link">Source</a> <a href="#v:computeStatusField" class="selflink">#</a></p><div class="doc"><p>Determine the value of the status field for the report of one instance</p></div></div><div class="top"><p class="src"><a id="v:buildStatus" class="def">buildStatus</a> :: Map String <a href="Ganeti-Hypervisor-Xen-Types.html#t:Domain" title="Ganeti.Hypervisor.Xen.Types">Domain</a> -&gt; Map Int <a href="Ganeti-Hypervisor-Xen-Types.html#t:UptimeInfo" title="Ganeti.Hypervisor.Xen.Types">UptimeInfo</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:RealInstanceData" title="Ganeti.Objects.Instance">RealInstanceData</a> -&gt; IO <a href="Ganeti-DataCollectors-InstStatusTypes.html#t:InstStatus" title="Ganeti.DataCollectors.InstStatusTypes">InstStatus</a> <a href="Ganeti/DataCollectors/InstStatus.html#buildStatus" class="link">Source</a> <a href="#v:buildStatus" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:computeGlobalStatus" class="def">computeGlobalStatus</a> :: [<a href="Ganeti-DataCollectors-InstStatusTypes.html#t:InstStatus" title="Ganeti.DataCollectors.InstStatusTypes">InstStatus</a>] -&gt; <a href="Ganeti-DataCollectors-Types.html#t:DCStatus" title="Ganeti.DataCollectors.Types">DCStatus</a> <a href="Ganeti/DataCollectors/InstStatus.html#computeGlobalStatus" class="link">Source</a> <a href="#v:computeGlobalStatus" class="selflink">#</a></p><div class="doc"><p>Compute the status code and message, given the current DRBD data
 The final state will have the code corresponding to the worst code of
 all the devices, and the error message given from the concatenation of the
 non-empty error messages.</p></div></div><div class="top"><p class="src"><a id="v:buildInstStatusReport" class="def">buildInstStatusReport</a> :: Maybe String -&gt; Maybe Int -&gt; IO <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> <a href="Ganeti/DataCollectors/InstStatus.html#buildInstStatusReport" class="link">Source</a> <a href="#v:buildInstStatusReport" class="selflink">#</a></p><div class="doc"><p>Build the report of this data collector, containing all the information
 about the status of the instances.</p></div></div><div class="top"><p class="src"><a id="v:main" class="def">main</a> :: <a href="Ganeti-DataCollectors-CLI.html#t:Options" title="Ganeti.DataCollectors.CLI">Options</a> -&gt; [String] -&gt; IO () <a href="Ganeti/DataCollectors/InstStatus.html#main" class="link">Source</a> <a href="#v:main" class="selflink">#</a></p><div class="doc"><p>Main function.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>