<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.WConfd.TempRes</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/WConfd/TempRes.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.WConfd.TempRes</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">The main reservation state</a><ul><li><a href="#g:2">Aliases to make types more meaningful:</a></li></ul></li><li><a href="#g:3">The state data structure</a><ul><li><a href="#g:4">Utility functions</a></li></ul></li><li><a href="#g:5">DRBD functions</a></li><li><a href="#g:6">Other temporary resources</a><ul><li><a href="#g:7">Functions common to all reservations</a></li><li><a href="#g:8">IDs</a></li><li><a href="#g:9">MAC addresses</a></li><li><a href="#g:10">DRBD secrets</a></li><li><a href="#g:11">LVs</a></li><li><a href="#g:12">IPv4 addresses</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Pure functions for manipulating reservations of temporary objects</p><p>NOTE: Reservations aren't released specifically, they're just all
released at the end of a job. This could be improved in the future.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:NodeUUID">NodeUUID</a> = ByteString</li><li class="src short"><span class="keyword">type</span> <a href="#t:InstanceUUID">InstanceUUID</a> = ByteString</li><li class="src short"><span class="keyword">type</span> <a href="#t:DiskUUID">DiskUUID</a> = ByteString</li><li class="src short"><span class="keyword">type</span> <a href="#t:NetworkUUID">NetworkUUID</a> = ByteString</li><li class="src short"><span class="keyword">type</span> <a href="#t:DRBDMinor">DRBDMinor</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:DRBDMap">DRBDMap</a> = Map <a href="Ganeti-WConfd-TempRes.html#t:NodeUUID" title="Ganeti.WConfd.TempRes">NodeUUID</a> (Map <a href="Ganeti-WConfd-TempRes.html#t:DRBDMinor" title="Ganeti.WConfd.TempRes">DRBDMinor</a> <a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:DRBDMap-39-">DRBDMap'</a> = Map <a href="Ganeti-WConfd-TempRes.html#t:NodeUUID" title="Ganeti.WConfd.TempRes">NodeUUID</a> (Map <a href="Ganeti-WConfd-TempRes.html#t:DRBDMinor" title="Ganeti.WConfd.TempRes">DRBDMinor</a> [<a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a>])</li><li class="src short"><span class="keyword">data</span> <a href="#t:IPv4ResAction">IPv4ResAction</a><ul class="subs"><li>= <a href="#v:IPv4Reserve">IPv4Reserve</a></li><li>| <a href="#v:IPv4Release">IPv4Release</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:IPv4Reservation">IPv4Reservation</a> = <a href="#v:IPv4Res">IPv4Res</a> {<ul class="subs"><li><a href="#v:ipv4ResAction">ipv4ResAction</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></li><li><a href="#v:ipv4ResNetwork">ipv4ResNetwork</a> :: <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a></li><li><a href="#v:ipv4ResAddr">ipv4ResAddr</a> :: <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:TempRes">TempRes</a> j a = <a href="#v:TempRes">TempRes</a> {<ul class="subs"><li><a href="#v:getTempRes">getTempRes</a> :: <a href="Ganeti-Utils-MultiMap.html#t:MultiMap" title="Ganeti.Utils.MultiMap">MultiMap</a> j a</li></ul>}</li><li class="src short"><a href="#v:mkTempRes">mkTempRes</a> :: <a href="Ganeti-Utils-MultiMap.html#t:MultiMap" title="Ganeti.Utils.MultiMap">MultiMap</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</li><li class="src short"><span class="keyword">data</span> <a href="#t:TempResState">TempResState</a> = <a href="#v:TempResState">TempResState</a> {<ul class="subs"><li><a href="#v:trsDRBD">trsDRBD</a> :: <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap" title="Ganeti.WConfd.TempRes">DRBDMap</a></li><li><a href="#v:trsMACs">trsMACs</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a>)</li><li><a href="#v:trsDRBDSecrets">trsDRBDSecrets</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:DRBDSecret" title="Ganeti.Objects.Disk">DRBDSecret</a>)</li><li><a href="#v:trsLVs">trsLVs</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a>)</li><li><a href="#v:trsIPv4s">trsIPv4s</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>)</li></ul>}</li><li class="src short"><a href="#v:loadTempResState">loadTempResState</a> :: JSValue -&gt; Result <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></li><li class="src short"><a href="#v:saveTempResState">saveTempResState</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; JSValue</li><li class="src short"><a href="#v:emptyTempResState">emptyTempResState</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></li><li class="src short"><a href="#v:trsMACsL">trsMACsL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a>)</li><li class="src short"><a href="#v:trsLVsL">trsLVsL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a>)</li><li class="src short"><a href="#v:trsIPv4sL">trsIPv4sL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>)</li><li class="src short"><a href="#v:trsDRBDSecretsL">trsDRBDSecretsL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:DRBDSecret" title="Ganeti.Objects.Disk">DRBDSecret</a>)</li><li class="src short"><a href="#v:trsDRBDL">trsDRBDL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap" title="Ganeti.WConfd.TempRes">DRBDMap</a></li><li class="src short"><a href="#v:resError">resError</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; String -&gt; m a</li><li class="src short"><a href="#v:toResError">toResError</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; m a -&gt; m a</li><li class="src short"><a href="#v:filterNested">filterNested</a> :: (Ord a, Ord b) =&gt; (c -&gt; Bool) -&gt; Map a (Map b c) -&gt; Map a (Map b c)</li><li class="src short"><a href="#v:maybeLens">maybeLens</a> :: (Monoid a, Monoid b, Eq b) =&gt; Lens s t (Maybe a) (Maybe b) -&gt; Lens s t a b</li><li class="src short"><a href="#v:computeDRBDMap-39-">computeDRBDMap'</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; m <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap-39-" title="Ganeti.WConfd.TempRes">DRBDMap'</a></li><li class="src short"><a href="#v:computeDRBDMap">computeDRBDMap</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; m <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap" title="Ganeti.WConfd.TempRes">DRBDMap</a></li><li class="src short"><a href="#v:allocateDRBDMinor">allocateDRBDMinor</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m) =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:NodeUUID" title="Ganeti.WConfd.TempRes">NodeUUID</a>] -&gt; m [<a href="Ganeti-WConfd-TempRes.html#t:DRBDMinor" title="Ganeti.WConfd.TempRes">DRBDMinor</a>]</li><li class="src short"><a href="#v:releaseDRBDMinors">releaseDRBDMinors</a> :: MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m =&gt; <a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a> -&gt; m ()</li><li class="src short"><a href="#v:isReserved">isReserved</a> :: (Ord a, Ord j) =&gt; a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool</li><li class="src short"><a href="#v:reserve">reserve</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j) =&gt; j -&gt; a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</li><li class="src short"><a href="#v:dropReservationsFor">dropReservationsFor</a> :: (Ord a, Ord j) =&gt; j -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</li><li class="src short"><a href="#v:reservedFor">reservedFor</a> :: (Ord a, Ord j) =&gt; j -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Set a</li><li class="src short"><a href="#v:reserved">reserved</a> :: (Ord a, Ord j) =&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Set a</li><li class="src short"><a href="#v:withReserved">withReserved</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j) =&gt; j -&gt; (Set a -&gt; m a) -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (a, <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</li><li class="src short"><a href="#v:generate">generate</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j) =&gt; j -&gt; Set a -&gt; m (Maybe a) -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (a, <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</li><li class="src short"><a href="#v:generateRand">generateRand</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j, RandomGen g) =&gt; g -&gt; j -&gt; Set a -&gt; (g -&gt; (Maybe a, g)) -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (a, <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</li><li class="src short"><a href="#v:stateM">stateM</a> :: MonadState s m =&gt; (s -&gt; m (a, s)) -&gt; m a</li><li class="src short"><a href="#v:modifyM">modifyM</a> :: MonadState s m =&gt; (s -&gt; m s) -&gt; m ()</li><li class="src short"><a href="#v:dropAllReservations">dropAllReservations</a> :: <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; State <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> ()</li><li class="src short"><a href="#v:lookupNetwork">lookupNetwork</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; m <a href="Ganeti-Objects.html#t:Network" title="Ganeti.Objects">Network</a></li><li class="src short"><a href="#v:generateMAC">generateMAC</a> :: (RandomGen g, MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; g -&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; Maybe <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; StateT <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a></li><li class="src short"><a href="#v:reserveMAC">reserveMAC</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m ()</li><li class="src short"><a href="#v:generateDRBDSecret">generateDRBDSecret</a> :: (RandomGen g, MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; g -&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; StateT <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m <a href="Ganeti-Objects-Disk.html#t:DRBDSecret" title="Ganeti.Objects.Disk">DRBDSecret</a></li><li class="src short"><a href="#v:reserveLV">reserveLV</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m ()</li><li class="src short"><a href="#v:usedIPv4Addrs">usedIPv4Addrs</a> :: <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; Set <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Set <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a></li><li class="src short"><a href="#v:reserveIp">reserveIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a> -&gt; Bool -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m ()</li><li class="src short"><a href="#v:releaseIp">releaseIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a> -&gt; m ()</li><li class="src short"><a href="#v:generateIp">generateIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a></li><li class="src short"><a href="#v:commitIp">commitIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></li><li class="src short"><a href="#v:commitReleaseIp">commitReleaseIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></li><li class="src short"><a href="#v:commitReservedIps">commitReservedIps</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m, <a href="Ganeti-Logging.html#t:MonadLog" title="Ganeti.Logging">MonadLog</a> m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></li><li class="src short"><a href="#v:listReservedIps">listReservedIps</a> :: <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; Set <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>The main reservation state</h1></a><a href="#g:2" id="g:2"><h2>Aliases to make types more meaningful:</h2></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:NodeUUID" class="def">NodeUUID</a> = ByteString <a href="Ganeti/WConfd/TempRes.html#NodeUUID" class="link">Source</a> <a href="#t:NodeUUID" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:InstanceUUID" class="def">InstanceUUID</a> = ByteString <a href="Ganeti/WConfd/TempRes.html#InstanceUUID" class="link">Source</a> <a href="#t:InstanceUUID" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DiskUUID" class="def">DiskUUID</a> = ByteString <a href="Ganeti/WConfd/TempRes.html#DiskUUID" class="link">Source</a> <a href="#t:DiskUUID" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:NetworkUUID" class="def">NetworkUUID</a> = ByteString <a href="Ganeti/WConfd/TempRes.html#NetworkUUID" class="link">Source</a> <a href="#t:NetworkUUID" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DRBDMinor" class="def">DRBDMinor</a> = Int <a href="Ganeti/WConfd/TempRes.html#DRBDMinor" class="link">Source</a> <a href="#t:DRBDMinor" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DRBDMap" class="def">DRBDMap</a> = Map <a href="Ganeti-WConfd-TempRes.html#t:NodeUUID" title="Ganeti.WConfd.TempRes">NodeUUID</a> (Map <a href="Ganeti-WConfd-TempRes.html#t:DRBDMinor" title="Ganeti.WConfd.TempRes">DRBDMinor</a> <a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a>) <a href="Ganeti/WConfd/TempRes.html#DRBDMap" class="link">Source</a> <a href="#t:DRBDMap" class="selflink">#</a></p><div class="doc"><p>A map of the usage of DRBD minors</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DRBDMap-39-" class="def">DRBDMap'</a> = Map <a href="Ganeti-WConfd-TempRes.html#t:NodeUUID" title="Ganeti.WConfd.TempRes">NodeUUID</a> (Map <a href="Ganeti-WConfd-TempRes.html#t:DRBDMinor" title="Ganeti.WConfd.TempRes">DRBDMinor</a> [<a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a>]) <a href="Ganeti/WConfd/TempRes.html#DRBDMap%27" class="link">Source</a> <a href="#t:DRBDMap-39-" class="selflink">#</a></p><div class="doc"><p>A map of the usage of DRBD minors with possible duplicates</p></div></div><a href="#g:3" id="g:3"><h1>The state data structure</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:IPv4ResAction" class="def">IPv4ResAction</a> <a href="Ganeti/WConfd/TempRes.html#IPv4ResAction" class="link">Source</a> <a href="#t:IPv4ResAction" class="selflink">#</a></p><div class="doc"><p>Types of IPv4 reservation actions.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IPv4Reserve" class="def">IPv4Reserve</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:IPv4Release" class="def">IPv4Release</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:IPv4ResAction">Instances</h4><details id="i:IPv4ResAction" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4ResAction:Bounded:1"></span> Bounded <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></span> <a href="#t:IPv4ResAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4ResAction:Bounded:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:minBound">minBound</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p><p class="src"><a href="#v:maxBound">maxBound</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4ResAction:Enum:2"></span> Enum <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></span> <a href="#t:IPv4ResAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4ResAction:Enum:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:succ">succ</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p><p class="src"><a href="#v:pred">pred</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p><p class="src"><a href="#v:toEnum">toEnum</a> :: Int -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p><p class="src"><a href="#v:fromEnum">fromEnum</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Int</p><p class="src"><a href="#v:enumFrom">enumFrom</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>]</p><p class="src"><a href="#v:enumFromThen">enumFromThen</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>]</p><p class="src"><a href="#v:enumFromTo">enumFromTo</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>]</p><p class="src"><a href="#v:enumFromThenTo">enumFromThenTo</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>]</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4ResAction:Eq:3"></span> Eq <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></span> <a href="#t:IPv4ResAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4ResAction:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4ResAction:Ord:4"></span> Ord <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></span> <a href="#t:IPv4ResAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4ResAction:Ord:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Ordering</p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Bool</p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Bool</p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Bool</p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; Bool</p><p class="src"><a href="#v:max">max</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4ResAction:Show:5"></span> Show <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></span> <a href="#t:IPv4ResAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4ResAction:Show:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4ResAction:JSON:6"></span> JSON <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></span> <a href="#t:IPv4ResAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4ResAction:JSON:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readJSON">readJSON</a> :: JSValue -&gt; Result <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p><p class="src"><a href="#v:showJSON">showJSON</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; JSValue</p><p class="src"><a href="#v:readJSONs">readJSONs</a> :: JSValue -&gt; Result [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>]</p><p class="src"><a href="#v:showJSONs">showJSONs</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>] -&gt; JSValue</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4ResAction:Arbitrary:7"></span> Arbitrary <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4ResAction:Arbitrary:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-Ganeti-WConfd-TempRes.html">Test.Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a>]</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:IPv4Reservation" class="def">IPv4Reservation</a> <a href="Ganeti/WConfd/TempRes.html#IPv4Reservation" class="link">Source</a> <a href="#t:IPv4Reservation" class="selflink">#</a></p><div class="doc"><p>The values stored in the IPv4 reservation table.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IPv4Res" class="def">IPv4Res</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ipv4ResAction" class="def">ipv4ResAction</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4ResAction" title="Ganeti.WConfd.TempRes">IPv4ResAction</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ipv4ResNetwork" class="def">ipv4ResNetwork</a> :: <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ipv4ResAddr" class="def">ipv4ResAddr</a> :: <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:IPv4Reservation">Instances</h4><details id="i:IPv4Reservation" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4Reservation:Eq:1"></span> Eq <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></span> <a href="#t:IPv4Reservation" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4Reservation:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4Reservation:Ord:2"></span> Ord <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></span> <a href="#t:IPv4Reservation" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4Reservation:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Ordering</p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Bool</p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Bool</p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Bool</p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Bool</p><p class="src"><a href="#v:max">max</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4Reservation:Show:3"></span> Show <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></span> <a href="#t:IPv4Reservation" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4Reservation:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4Reservation:JSON:4"></span> JSON <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></span> <a href="#t:IPv4Reservation" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4Reservation:JSON:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readJSON">readJSON</a> :: JSValue -&gt; Result <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></p><p class="src"><a href="#v:showJSON">showJSON</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; JSValue</p><p class="src"><a href="#v:readJSONs">readJSONs</a> :: JSValue -&gt; Result [<a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>]</p><p class="src"><a href="#v:showJSONs">showJSONs</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>] -&gt; JSValue</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IPv4Reservation:Arbitrary:5"></span> Arbitrary <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IPv4Reservation:Arbitrary:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-Ganeti-WConfd-TempRes.html">Test.Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>]</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:TempRes" class="def">TempRes</a> j a <a href="Ganeti/WConfd/TempRes.html#TempRes" class="link">Source</a> <a href="#t:TempRes" class="selflink">#</a></p><div class="doc"><p>A polymorphic data structure for managing temporary resources assigned
 to jobs.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TempRes" class="def">TempRes</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getTempRes" class="def">getTempRes</a> :: <a href="Ganeti-Utils-MultiMap.html#t:MultiMap" title="Ganeti.Utils.MultiMap">MultiMap</a> j a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TempRes">Instances</h4><details id="i:TempRes" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempRes:Eq:1"></span> (Eq j, Eq a) =&gt; Eq (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</span> <a href="#t:TempRes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempRes:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempRes:Ord:2"></span> (Ord j, Ord a) =&gt; Ord (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</span> <a href="#t:TempRes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempRes:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Ordering</p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool</p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool</p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool</p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool</p><p class="src"><a href="#v:max">max</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p><p class="src"><a href="#v:min">min</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempRes:Show:3"></span> (Show j, Show a) =&gt; Show (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</span> <a href="#t:TempRes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempRes:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempRes:Semigroup:4"></span> (Ord j, Ord a) =&gt; Semigroup (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</span> <a href="#t:TempRes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempRes:Semigroup:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p><p class="src"><a href="#v:sconcat">sconcat</a> :: NonEmpty (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a) -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p><p class="src"><a href="#v:stimes">stimes</a> :: Integral b =&gt; b -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempRes:Monoid:5"></span> (Ord j, Ord a) =&gt; Monoid (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</span> <a href="#t:TempRes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempRes:Monoid:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a] -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempRes:JSON:6"></span> (JSON j, Ord j, JSON a, Ord a) =&gt; JSON (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</span> <a href="#t:TempRes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempRes:JSON:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readJSON">readJSON</a> :: JSValue -&gt; Result (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a)</p><p class="src"><a href="#v:showJSON">showJSON</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; JSValue</p><p class="src"><a href="#v:readJSONs">readJSONs</a> :: JSValue -&gt; Result [<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a]</p><p class="src"><a href="#v:showJSONs">showJSONs</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a] -&gt; JSValue</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempRes:Arbitrary:7"></span> (Arbitrary k, Ord k, Arbitrary v, Ord v) =&gt; Arbitrary (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> k v)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempRes:Arbitrary:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-Ganeti-WConfd-TempRes.html">Test.Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> k v)</p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> k v -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> k v]</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mkTempRes" class="def">mkTempRes</a> :: <a href="Ganeti-Utils-MultiMap.html#t:MultiMap" title="Ganeti.Utils.MultiMap">MultiMap</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a <a href="Ganeti/WConfd/TempRes.html#mkTempRes" class="link">Source</a> <a href="#v:mkTempRes" class="selflink">#</a></p><div class="doc"><p>Create a temporary reservations from a given multi-map.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TempResState" class="def">TempResState</a> <a href="Ganeti/WConfd/TempRes.html#TempResState" class="link">Source</a> <a href="#t:TempResState" class="selflink">#</a></p><div class="doc"><p>The state of the temporary reservations</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TempResState" class="def">TempResState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:trsDRBD" class="def">trsDRBD</a> :: <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap" title="Ganeti.WConfd.TempRes">DRBDMap</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:trsMACs" class="def">trsMACs</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:trsDRBDSecrets" class="def">trsDRBDSecrets</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:DRBDSecret" title="Ganeti.Objects.Disk">DRBDSecret</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:trsLVs" class="def">trsLVs</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:trsIPv4s" class="def">trsIPv4s</a> :: (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TempResState">Instances</h4><details id="i:TempResState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempResState:Eq:1"></span> Eq <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></span> <a href="#t:TempResState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempResState:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempResState:Show:2"></span> Show <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></span> <a href="#t:TempResState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempResState:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempResState:JSON:3"></span> JSON <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></span> <a href="#t:TempResState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempResState:JSON:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readJSON">readJSON</a> :: JSValue -&gt; Result <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></p><p class="src"><a href="#v:showJSON">showJSON</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; JSValue</p><p class="src"><a href="#v:readJSONs">readJSONs</a> :: JSValue -&gt; Result [<a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a>]</p><p class="src"><a href="#v:showJSONs">showJSONs</a> :: [<a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a>] -&gt; JSValue</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempResState:ArrayObject:4"></span> <a href="Ganeti-JSON.html#t:ArrayObject" title="Ganeti.JSON">ArrayObject</a> <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></span> <a href="#t:TempResState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempResState:ArrayObject:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toJSArray">toJSArray</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; [JSValue] <a href="Ganeti/JSON.html#toJSArray" class="link">Source</a> <a href="#v:toJSArray" class="selflink">#</a></p><p class="src"><a href="#v:fromJSArray">fromJSArray</a> :: [JSValue] -&gt; Result <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> <a href="Ganeti/JSON.html#fromJSArray" class="link">Source</a> <a href="#v:fromJSArray" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempResState:DictObject:5"></span> <a href="Ganeti-JSON.html#t:DictObject" title="Ganeti.JSON">DictObject</a> <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></span> <a href="#t:TempResState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempResState:DictObject:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ganeti-WConfd-TempRes.html">Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toDict">toDict</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; [(String, JSValue)] <a href="Ganeti/JSON.html#toDict" class="link">Source</a> <a href="#v:toDict" class="selflink">#</a></p><p class="src"><a href="#v:fromDictWKeys">fromDictWKeys</a> :: [(String, JSValue)] -&gt; WriterT <a href="Ganeti-JSON.html#t:UsedKeys" title="Ganeti.JSON">UsedKeys</a> Result <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> <a href="Ganeti/JSON.html#fromDictWKeys" class="link">Source</a> <a href="#v:fromDictWKeys" class="selflink">#</a></p><p class="src"><a href="#v:fromDict">fromDict</a> :: [(String, JSValue)] -&gt; Result <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> <a href="Ganeti/JSON.html#fromDict" class="link">Source</a> <a href="#v:fromDict" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TempResState:Arbitrary:6"></span> Arbitrary <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TempResState:Arbitrary:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-Ganeti-WConfd-TempRes.html">Test.Ganeti.WConfd.TempRes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a>]</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:loadTempResState" class="def">loadTempResState</a> :: JSValue -&gt; Result <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> <a href="Ganeti/WConfd/TempRes.html#loadTempResState" class="link">Source</a> <a href="#v:loadTempResState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:saveTempResState" class="def">saveTempResState</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; JSValue <a href="Ganeti/WConfd/TempRes.html#saveTempResState" class="link">Source</a> <a href="#v:saveTempResState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emptyTempResState" class="def">emptyTempResState</a> :: <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> <a href="Ganeti/WConfd/TempRes.html#emptyTempResState" class="link">Source</a> <a href="#v:emptyTempResState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:trsMACsL" class="def">trsMACsL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a>) <a href="Ganeti/WConfd/TempRes.html#trsMACsL" class="link">Source</a> <a href="#v:trsMACsL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:trsLVsL" class="def">trsLVsL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a>) <a href="Ganeti/WConfd/TempRes.html#trsLVsL" class="link">Source</a> <a href="#v:trsLVsL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:trsIPv4sL" class="def">trsIPv4sL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a>) <a href="Ganeti/WConfd/TempRes.html#trsIPv4sL" class="link">Source</a> <a href="#v:trsIPv4sL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:trsDRBDSecretsL" class="def">trsDRBDSecretsL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> <a href="Ganeti-Objects-Disk.html#t:DRBDSecret" title="Ganeti.Objects.Disk">DRBDSecret</a>) <a href="Ganeti/WConfd/TempRes.html#trsDRBDSecretsL" class="link">Source</a> <a href="#v:trsDRBDSecretsL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:trsDRBDL" class="def">trsDRBDL</a> :: Lens' <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap" title="Ganeti.WConfd.TempRes">DRBDMap</a> <a href="Ganeti/WConfd/TempRes.html#trsDRBDL" class="link">Source</a> <a href="#v:trsDRBDL" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h2>Utility functions</h2></a><div class="top"><p class="src"><a id="v:resError" class="def">resError</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; String -&gt; m a <a href="Ganeti/WConfd/TempRes.html#resError" class="link">Source</a> <a href="#v:resError" class="selflink">#</a></p><div class="doc"><p>Issues a reservation error.</p></div></div><div class="top"><p class="src"><a id="v:toResError" class="def">toResError</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; m a -&gt; m a <a href="Ganeti/WConfd/TempRes.html#toResError" class="link">Source</a> <a href="#v:toResError" class="selflink">#</a></p><div class="doc"><p>Converts <code><a href="Ganeti-Errors.html#v:GenericError" title="Ganeti.Errors">GenericError</a></code> into a <code><a href="Ganeti-Errors.html#v:ReservationError" title="Ganeti.Errors">ReservationError</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:filterNested" class="def">filterNested</a> :: (Ord a, Ord b) =&gt; (c -&gt; Bool) -&gt; Map a (Map b c) -&gt; Map a (Map b c) <a href="Ganeti/WConfd/TempRes.html#filterNested" class="link">Source</a> <a href="#v:filterNested" class="selflink">#</a></p><div class="doc"><p>Filter values from the nested map and remove any nested maps
 that become empty.</p></div></div><div class="top"><p class="src"><a id="v:maybeLens" class="def">maybeLens</a> :: (Monoid a, Monoid b, Eq b) =&gt; Lens s t (Maybe a) (Maybe b) -&gt; Lens s t a b <a href="Ganeti/WConfd/TempRes.html#maybeLens" class="link">Source</a> <a href="#v:maybeLens" class="selflink">#</a></p><div class="doc"><p>Converts a lens that works on maybe values into a lens that works
 on regular ones. A missing value on the input is replaced by
 <code>mempty</code>.
 The output is is <code>Just something</code> iff <code>something /= mempty</code>.</p></div></div><a href="#g:5" id="g:5"><h1>DRBD functions</h1></a><div class="top"><p class="src"><a id="v:computeDRBDMap-39-" class="def">computeDRBDMap'</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; m <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap-39-" title="Ganeti.WConfd.TempRes">DRBDMap'</a> <a href="Ganeti/WConfd/TempRes.html#computeDRBDMap%27" class="link">Source</a> <a href="#v:computeDRBDMap-39-" class="selflink">#</a></p><div class="doc"><p>Compute the map of used DRBD minor/nodes, including possible
 duplicates.
 An error is returned if the configuration isn't consistent
 (for example if a referenced disk is missing etc.).</p></div></div><div class="top"><p class="src"><a id="v:computeDRBDMap" class="def">computeDRBDMap</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; m <a href="Ganeti-WConfd-TempRes.html#t:DRBDMap" title="Ganeti.WConfd.TempRes">DRBDMap</a> <a href="Ganeti/WConfd/TempRes.html#computeDRBDMap" class="link">Source</a> <a href="#v:computeDRBDMap" class="selflink">#</a></p><div class="doc"><p>Compute the map of used DRBD minor/nodes.
 Report any duplicate entries as an error.</p><p>Unlike <code><a href="Ganeti-WConfd-TempRes.html#v:computeDRBDMap-39-" title="Ganeti.WConfd.TempRes">computeDRBDMap'</a></code>, includes entries for all nodes, even if empty.</p></div></div><div class="top"><p class="src"><a id="v:allocateDRBDMinor" class="def">allocateDRBDMinor</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m) =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a> -&gt; [<a href="Ganeti-WConfd-TempRes.html#t:NodeUUID" title="Ganeti.WConfd.TempRes">NodeUUID</a>] -&gt; m [<a href="Ganeti-WConfd-TempRes.html#t:DRBDMinor" title="Ganeti.WConfd.TempRes">DRBDMinor</a>] <a href="Ganeti/WConfd/TempRes.html#allocateDRBDMinor" class="link">Source</a> <a href="#v:allocateDRBDMinor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:releaseDRBDMinors" class="def">releaseDRBDMinors</a> :: MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m =&gt; <a href="Ganeti-WConfd-TempRes.html#t:DiskUUID" title="Ganeti.WConfd.TempRes">DiskUUID</a> -&gt; m () <a href="Ganeti/WConfd/TempRes.html#releaseDRBDMinors" class="link">Source</a> <a href="#v:releaseDRBDMinors" class="selflink">#</a></p></div><a href="#g:6" id="g:6"><h1>Other temporary resources</h1></a><div class="top"><p class="src"><a id="v:isReserved" class="def">isReserved</a> :: (Ord a, Ord j) =&gt; a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Bool <a href="Ganeti/WConfd/TempRes.html#isReserved" class="link">Source</a> <a href="#v:isReserved" class="selflink">#</a></p><div class="doc"><p>Tests if a given value is reserved for a given job.</p></div></div><div class="top"><p class="src"><a id="v:reserve" class="def">reserve</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j) =&gt; j -&gt; a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (<a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a) <a href="Ganeti/WConfd/TempRes.html#reserve" class="link">Source</a> <a href="#v:reserve" class="selflink">#</a></p><div class="doc"><p>Tries to reserve a given value for a given job.</p></div></div><div class="top"><p class="src"><a id="v:dropReservationsFor" class="def">dropReservationsFor</a> :: (Ord a, Ord j) =&gt; j -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a <a href="Ganeti/WConfd/TempRes.html#dropReservationsFor" class="link">Source</a> <a href="#v:dropReservationsFor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:reservedFor" class="def">reservedFor</a> :: (Ord a, Ord j) =&gt; j -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Set a <a href="Ganeti/WConfd/TempRes.html#reservedFor" class="link">Source</a> <a href="#v:reservedFor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:reserved" class="def">reserved</a> :: (Ord a, Ord j) =&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; Set a <a href="Ganeti/WConfd/TempRes.html#reserved" class="link">Source</a> <a href="#v:reserved" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withReserved" class="def">withReserved</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j) =&gt; j -&gt; (Set a -&gt; m a) -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (a, <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a) <a href="Ganeti/WConfd/TempRes.html#withReserved" class="link">Source</a> <a href="#v:withReserved" class="selflink">#</a></p><div class="doc"><p>Computes the set of all reserved resources and passes it to
 the given function.
 This allows it to avoid resources that are already in use.</p></div></div><div class="top"><p class="src"><a id="v:generate" class="def">generate</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j) =&gt; j -&gt; Set a -&gt; m (Maybe a) -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (a, <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a) <a href="Ganeti/WConfd/TempRes.html#generate" class="link">Source</a> <a href="#v:generate" class="selflink">#</a></p><div class="doc"><p>Repeatedly tries to run a given monadic function until it succeeds
 and the returned value is free to reserve.
 If such a value is found, it's reserved and returned.
 Otherwise fails with an error.</p></div></div><div class="top"><p class="src"><a id="v:generateRand" class="def">generateRand</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Show a, Ord a, Ord j, RandomGen g) =&gt; g -&gt; j -&gt; Set a -&gt; (g -&gt; (Maybe a, g)) -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a -&gt; m (a, <a href="Ganeti-WConfd-TempRes.html#t:TempRes" title="Ganeti.WConfd.TempRes">TempRes</a> j a) <a href="Ganeti/WConfd/TempRes.html#generateRand" class="link">Source</a> <a href="#v:generateRand" class="selflink">#</a></p><div class="doc"><p>A variant of <code><a href="Ganeti-WConfd-TempRes.html#v:generate" title="Ganeti.WConfd.TempRes">generate</a></code> for randomized computations.</p></div></div><div class="top"><p class="src"><a id="v:stateM" class="def">stateM</a> :: MonadState s m =&gt; (s -&gt; m (a, s)) -&gt; m a <a href="Ganeti/WConfd/TempRes.html#stateM" class="link">Source</a> <a href="#v:stateM" class="selflink">#</a></p><div class="doc"><p>Embeds a stateful computation in a stateful monad.</p></div></div><div class="top"><p class="src"><a id="v:modifyM" class="def">modifyM</a> :: MonadState s m =&gt; (s -&gt; m s) -&gt; m () <a href="Ganeti/WConfd/TempRes.html#modifyM" class="link">Source</a> <a href="#v:modifyM" class="selflink">#</a></p><div class="doc"><p>Embeds a state-modifying computation in a stateful monad.</p></div></div><a href="#g:7" id="g:7"><h2>Functions common to all reservations</h2></a><div class="top"><p class="src"><a id="v:dropAllReservations" class="def">dropAllReservations</a> :: <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; State <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> () <a href="Ganeti/WConfd/TempRes.html#dropAllReservations" class="link">Source</a> <a href="#v:dropAllReservations" class="selflink">#</a></p><div class="doc"><p>Removes all resources reserved by a given job.</p><p>If a new reservation resource type is added, it must be added here as well.</p></div></div><div class="top"><p class="src"><a id="v:lookupNetwork" class="def">lookupNetwork</a> :: MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m =&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; m <a href="Ganeti-Objects.html#t:Network" title="Ganeti.Objects">Network</a> <a href="Ganeti/WConfd/TempRes.html#lookupNetwork" class="link">Source</a> <a href="#v:lookupNetwork" class="selflink">#</a></p><div class="doc"><p>Looks up a network by its UUID.</p></div></div><a href="#g:8" id="g:8"><h2>IDs</h2></a><a href="#g:9" id="g:9"><h2>MAC addresses</h2></a><div class="top"><p class="src"><a id="v:generateMAC" class="def">generateMAC</a> :: (RandomGen g, MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; g -&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; Maybe <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; StateT <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a> <a href="Ganeti/WConfd/TempRes.html#generateMAC" class="link">Source</a> <a href="#v:generateMAC" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:reserveMAC" class="def">reserveMAC</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-Config.html#t:MAC" title="Ganeti.Config">MAC</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m () <a href="Ganeti/WConfd/TempRes.html#reserveMAC" class="link">Source</a> <a href="#v:reserveMAC" class="selflink">#</a></p></div><a href="#g:10" id="g:10"><h2>DRBD secrets</h2></a><div class="top"><p class="src"><a id="v:generateDRBDSecret" class="def">generateDRBDSecret</a> :: (RandomGen g, MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; g -&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; StateT <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m <a href="Ganeti-Objects-Disk.html#t:DRBDSecret" title="Ganeti.Objects.Disk">DRBDSecret</a> <a href="Ganeti/WConfd/TempRes.html#generateDRBDSecret" class="link">Source</a> <a href="#v:generateDRBDSecret" class="selflink">#</a></p></div><a href="#g:11" id="g:11"><h2>LVs</h2></a><div class="top"><p class="src"><a id="v:reserveLV" class="def">reserveLV</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-Objects-Disk.html#t:LogicalVolume" title="Ganeti.Objects.Disk">LogicalVolume</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m () <a href="Ganeti/WConfd/TempRes.html#reserveLV" class="link">Source</a> <a href="#v:reserveLV" class="selflink">#</a></p></div><a href="#g:12" id="g:12"><h2>IPv4 addresses</h2></a><div class="top"><p class="src"><a id="v:usedIPv4Addrs" class="def">usedIPv4Addrs</a> :: <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; Set <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; Set <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a> <a href="Ganeti/WConfd/TempRes.html#usedIPv4Addrs" class="link">Source</a> <a href="#v:usedIPv4Addrs" class="selflink">#</a></p><div class="doc"><p>Lists all IPv4 addresses reserved for a given network.</p></div></div><div class="top"><p class="src"><a id="v:reserveIp" class="def">reserveIp</a> <a href="Ganeti/WConfd/TempRes.html#reserveIp" class="link">Source</a> <a href="#v:reserveIp" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>whether to check externally reserved IPs</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Reserve a given IPv4 address for use by an instance.</p></div></div><div class="top"><p class="src"><a id="v:releaseIp" class="def">releaseIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a> -&gt; m () <a href="Ganeti/WConfd/TempRes.html#releaseIp" class="link">Source</a> <a href="#v:releaseIp" class="selflink">#</a></p><div class="doc"><p>Give a specific IP address back to an IP pool.
 The IP address is returned to the IP pool designated by network id
 and marked as reserved.</p></div></div><div class="top"><p class="src"><a id="v:generateIp" class="def">generateIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, MonadState <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> m, Functor m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a> <a href="Ganeti/WConfd/TempRes.html#generateIp" class="link">Source</a> <a href="#v:generateIp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:commitIp" class="def">commitIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> <a href="Ganeti/WConfd/TempRes.html#commitIp" class="link">Source</a> <a href="#v:commitIp" class="selflink">#</a></p><div class="doc"><p>Commit a reserved/released IP address to an IP pool.
 The IP address is taken from the network's IP pool and marked as
 reserved/free for instances.</p></div></div><div class="top"><p class="src"><a id="v:commitReleaseIp" class="def">commitReleaseIp</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m) =&gt; <a href="Ganeti-WConfd-TempRes.html#t:NetworkUUID" title="Ganeti.WConfd.TempRes">NetworkUUID</a> -&gt; <a href="Ganeti-Objects.html#t:Ip4Address" title="Ganeti.Objects">Ip4Address</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> <a href="Ganeti/WConfd/TempRes.html#commitReleaseIp" class="link">Source</a> <a href="#v:commitReleaseIp" class="selflink">#</a></p><div class="doc"><p>Immediately release an IP address, without using the reservations pool.</p></div></div><div class="top"><p class="src"><a id="v:commitReservedIps" class="def">commitReservedIps</a> :: (MonadError <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a> m, Functor m, <a href="Ganeti-Logging.html#t:MonadLog" title="Ganeti.Logging">MonadLog</a> m) =&gt; <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; m <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> <a href="Ganeti/WConfd/TempRes.html#commitReservedIps" class="link">Source</a> <a href="#v:commitReservedIps" class="selflink">#</a></p><div class="doc"><p>Commit all reserved/released IP address to an IP pool.
 The IP addresses are taken from the network's IP pool and marked as
 reserved/free for instances.</p><p>Note that the reservations are kept, they are supposed to be cleaned
 when a job finishes.</p></div></div><div class="top"><p class="src"><a id="v:listReservedIps" class="def">listReservedIps</a> :: <a href="Ganeti-Locking-Locks.html#t:ClientId" title="Ganeti.Locking.Locks">ClientId</a> -&gt; <a href="Ganeti-WConfd-TempRes.html#t:TempResState" title="Ganeti.WConfd.TempRes">TempResState</a> -&gt; Set <a href="Ganeti-WConfd-TempRes.html#t:IPv4Reservation" title="Ganeti.WConfd.TempRes">IPv4Reservation</a> <a href="Ganeti/WConfd/TempRes.html#listReservedIps" class="link">Source</a> <a href="#v:listReservedIps" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>