<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.JQScheduler</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/JQScheduler.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.JQScheduler</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of a reader for the job queue.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:JQStatus">JQStatus</a> = <a href="#v:JQStatus">JQStatus</a> {<ul class="subs"><li><a href="#v:jqJobs">jqJobs</a> :: IORef <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a></li><li><a href="#v:jqConfig">jqConfig</a> :: IORef (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a>)</li><li><a href="#v:jqLivelock">jqLivelock</a> :: <a href="Ganeti-Utils-Livelock.html#t:Livelock" title="Ganeti.Utils.Livelock">Livelock</a></li><li><a href="#v:jqForkLock">jqForkLock</a> :: <a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a></li></ul>}</li><li class="src short"><a href="#v:emptyJQStatus">emptyJQStatus</a> :: IORef (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a>) -&gt; IO <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a></li><li class="src short"><a href="#v:onRunningJobs">onRunningJobs</a> :: ([<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]) -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a></li><li class="src short"><a href="#v:onQueuedJobs">onQueuedJobs</a> :: ([<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]) -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a></li><li class="src short"><a href="#v:unreadJob">unreadJob</a> :: <a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a></li><li class="src short"><a href="#v:watchInterval">watchInterval</a> :: Int</li><li class="src short"><a href="#v:getConfigValue">getConfigValue</a> :: (<a href="Ganeti-Objects.html#t:Cluster" title="Ganeti.Objects">Cluster</a> -&gt; a) -&gt; a -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO a</li><li class="src short"><a href="#v:getMaxRunningJobs">getMaxRunningJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO Int</li><li class="src short"><a href="#v:getMaxTrackedJobs">getMaxTrackedJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO Int</li><li class="src short"><a href="#v:getRQL">getRQL</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO Int</li><li class="src short"><a href="#v:modifyJobs">modifyJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>) -&gt; IO ()</li><li class="src short"><a href="#v:readJobStatus">readJobStatus</a> :: <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO (Maybe <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>)</li><li class="src short"><a href="#v:updateJobStatus">updateJobStatus</a> :: <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]</li><li class="src short"><a href="#v:updateJob">updateJob</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO ()</li><li class="src short"><a href="#v:moveJob">moveJob</a> :: Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, Maybe <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>)</li><li class="src short"><a href="#v:moveJobAtomic">moveJobAtomic</a> :: Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO (Maybe <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>)</li><li class="src short"><a href="#v:manipulateRunningJob">manipulateRunningJob</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO a -&gt; IO (Maybe a)</li><li class="src short"><a href="#v:sortoutFinishedJobs">sortoutFinishedJobs</a> :: <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>])</li><li class="src short"><a href="#v:cleanupFinishedJobs">cleanupFinishedJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO ()</li><li class="src short"><a href="#v:jobWatcher">jobWatcher</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; Event -&gt; IO ()</li><li class="src short"><a href="#v:attachWatcher">attachWatcher</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO ()</li><li class="src short"><a href="#v:jobEligible">jobEligible</a> :: <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; Bool</li><li class="src short"><a href="#v:selectJobsToRun">selectJobsToRun</a> :: Int -&gt; Set <a href="Ganeti-Objects.html#t:FilterRule" title="Ganeti.Objects">FilterRule</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>])</li><li class="src short"><a href="#v:logFailedJobs">logFailedJobs</a> :: <a href="Ganeti-Logging.html#t:MonadLog" title="Ganeti.Logging">MonadLog</a> m =&gt; [(<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>, <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a>)] -&gt; m (Set <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a>)</li><li class="src short"><a href="#v:failJobs">failJobs</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; [(<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>, <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a>)] -&gt; IO ()</li><li class="src short"><a href="#v:cancelRejectedJobs">cancelRejectedJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; Set <a href="Ganeti-Objects.html#t:FilterRule" title="Ganeti.Objects">FilterRule</a> -&gt; IO ()</li><li class="src short"><a href="#v:scheduleSomeJobs">scheduleSomeJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO ()</li><li class="src short"><a href="#v:showQueue">showQueue</a> :: <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; String</li><li class="src short"><a href="#v:checkForDeath">checkForDeath</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO Bool</li><li class="src short"><a href="#v:cleanupIfDead">cleanupIfDead</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO Bool</li><li class="src short"><a href="#v:updateStatusAndScheduleSomeJobs">updateStatusAndScheduleSomeJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO ()</li><li class="src short"><a href="#v:onTimeWatcher">onTimeWatcher</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO ()</li><li class="src short"><a href="#v:readJobFromDisk">readJobFromDisk</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>)</li><li class="src short"><a href="#v:readJobsFromDisk">readJobsFromDisk</a> :: IO [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]</li><li class="src short"><a href="#v:initJQScheduler">initJQScheduler</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO ()</li><li class="src short"><a href="#v:enqueueNewJobs">enqueueNewJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; [<a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a>] -&gt; IO ()</li><li class="src short"><a href="#v:rmJob">rmJob</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (Maybe <a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a>))</li><li class="src short"><a href="#v:dequeueJob">dequeueJob</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> Bool)</li><li class="src short"><a href="#v:setJobPriority">setJobPriority</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; Int -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (Maybe <a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a>))</li><li class="src short"><a href="#v:configChangeNeedsRescheduling">configChangeNeedsRescheduling</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; Bool</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:JQStatus" class="def">JQStatus</a> <a href="Ganeti/JQScheduler.html#JQStatus" class="link">Source</a> <a href="#t:JQStatus" class="selflink">#</a></p><div class="doc"><p>Representation of the job queue</p><p>We keep two lists of jobs (together with information about the last
fstat result observed): the jobs that are enqueued, but not yet handed
over for execution, and the jobs already handed over for execution. They
are kept together in a single IORef, so that we can atomically update
both, in particular when scheduling jobs to be handed over for execution.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:JQStatus" class="def">JQStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:jqJobs" class="def">jqJobs</a> :: IORef <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:jqConfig" class="def">jqConfig</a> :: IORef (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:jqLivelock" class="def">jqLivelock</a> :: <a href="Ganeti-Utils-Livelock.html#t:Livelock" title="Ganeti.Utils.Livelock">Livelock</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:jqForkLock" class="def">jqForkLock</a> :: <a href="Ganeti-Utils-MVarLock.html#t:Lock" title="Ganeti.Utils.MVarLock">Lock</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:emptyJQStatus" class="def">emptyJQStatus</a> :: IORef (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a>) -&gt; IO <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> <a href="Ganeti/JQScheduler.html#emptyJQStatus" class="link">Source</a> <a href="#v:emptyJQStatus" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:onRunningJobs" class="def">onRunningJobs</a> :: ([<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]) -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> <a href="Ganeti/JQScheduler.html#onRunningJobs" class="link">Source</a> <a href="#v:onRunningJobs" class="selflink">#</a></p><div class="doc"><p>Apply a function on the running jobs.</p></div></div><div class="top"><p class="src"><a id="v:onQueuedJobs" class="def">onQueuedJobs</a> :: ([<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]) -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> <a href="Ganeti/JQScheduler.html#onQueuedJobs" class="link">Source</a> <a href="#v:onQueuedJobs" class="selflink">#</a></p><div class="doc"><p>Apply a function on the queued jobs.</p></div></div><div class="top"><p class="src"><a id="v:unreadJob" class="def">unreadJob</a> :: <a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> <a href="Ganeti/JQScheduler.html#unreadJob" class="link">Source</a> <a href="#v:unreadJob" class="selflink">#</a></p><div class="doc"><p>Obtain a JobWithStat from a QueuedJob.</p></div></div><div class="top"><p class="src"><a id="v:watchInterval" class="def">watchInterval</a> :: Int <a href="Ganeti/JQScheduler.html#watchInterval" class="link">Source</a> <a href="#v:watchInterval" class="selflink">#</a></p><div class="doc"><p>Reload interval for polling the running jobs for updates in microseconds.</p></div></div><div class="top"><p class="src"><a id="v:getConfigValue" class="def">getConfigValue</a> :: (<a href="Ganeti-Objects.html#t:Cluster" title="Ganeti.Objects">Cluster</a> -&gt; a) -&gt; a -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO a <a href="Ganeti/JQScheduler.html#getConfigValue" class="link">Source</a> <a href="#v:getConfigValue" class="selflink">#</a></p><div class="doc"><p>Read a cluster parameter from the configuration, using a default if the
 configuration is not available.</p></div></div><div class="top"><p class="src"><a id="v:getMaxRunningJobs" class="def">getMaxRunningJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO Int <a href="Ganeti/JQScheduler.html#getMaxRunningJobs" class="link">Source</a> <a href="#v:getMaxRunningJobs" class="selflink">#</a></p><div class="doc"><p>Get the maximual number of jobs to be run simultaneously from the
 configuration. If the configuration is not available, be conservative
 and use the smallest possible value, i.e., 1.</p></div></div><div class="top"><p class="src"><a id="v:getMaxTrackedJobs" class="def">getMaxTrackedJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO Int <a href="Ganeti/JQScheduler.html#getMaxTrackedJobs" class="link">Source</a> <a href="#v:getMaxTrackedJobs" class="selflink">#</a></p><div class="doc"><p>Get the maximual number of jobs to be tracked simultaneously from the
 configuration. If the configuration is not available, be conservative
 and use the smallest possible value, i.e., 1.</p></div></div><div class="top"><p class="src"><a id="v:getRQL" class="def">getRQL</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO Int <a href="Ganeti/JQScheduler.html#getRQL" class="link">Source</a> <a href="#v:getRQL" class="selflink">#</a></p><div class="doc"><p>Get the number of jobs currently running.</p></div></div><div class="top"><p class="src"><a id="v:modifyJobs" class="def">modifyJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>) -&gt; IO () <a href="Ganeti/JQScheduler.html#modifyJobs" class="link">Source</a> <a href="#v:modifyJobs" class="selflink">#</a></p><div class="doc"><p>Wrapper function to atomically update the jobs in the queue status.</p></div></div><div class="top"><p class="src"><a id="v:readJobStatus" class="def">readJobStatus</a> :: <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO (Maybe <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>) <a href="Ganeti/JQScheduler.html#readJobStatus" class="link">Source</a> <a href="#v:readJobStatus" class="selflink">#</a></p><div class="doc"><p>Reread a job from disk, if the file has changed.</p></div></div><div class="top"><p class="src"><a id="v:updateJobStatus" class="def">updateJobStatus</a> :: <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] -&gt; [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] <a href="Ganeti/JQScheduler.html#updateJobStatus" class="link">Source</a> <a href="#v:updateJobStatus" class="selflink">#</a></p><div class="doc"><p>Update a job in the job queue, if it is still there. This is the
 pure function for inserting a previously read change into the queue.
 as the change contains its time stamp, we don't have to worry about a
 later read change overwriting a newer read state. If this happens, the
 fstat value will be outdated, so the next poller run will fix this.</p></div></div><div class="top"><p class="src"><a id="v:updateJob" class="def">updateJob</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#updateJob" class="link">Source</a> <a href="#v:updateJob" class="selflink">#</a></p><div class="doc"><p>Update a single job by reading it from disk, if necessary.</p></div></div><div class="top"><p class="src"><a id="v:moveJob" class="def">moveJob</a> <a href="Ganeti/JQScheduler.html#moveJob" class="link">Source</a> <a href="#v:moveJob" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]</td><td class="doc"><p>from queue</p></td></tr><tr><td class="src">-&gt; Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]</td><td class="doc"><p>to queue</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, Maybe <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Move a job from one part of the queue to another.
 Return the job that was moved, or <code>Nothing</code> if it wasn't found in
 the queue.</p></div></div><div class="top"><p class="src"><a id="v:moveJobAtomic" class="def">moveJobAtomic</a> <a href="Ganeti/JQScheduler.html#moveJobAtomic" class="link">Source</a> <a href="#v:moveJobAtomic" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]</td><td class="doc"><p>from queue</p></td></tr><tr><td class="src">-&gt; Lens' <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]</td><td class="doc"><p>to queue</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; IO (Maybe <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Atomically move a job from one part of the queue to another.
 Return the job that was moved, or <code>Nothing</code> if it wasn't found in
 the queue.</p></div></div><div class="top"><p class="src"><a id="v:manipulateRunningJob" class="def">manipulateRunningJob</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO a -&gt; IO (Maybe a) <a href="Ganeti/JQScheduler.html#manipulateRunningJob" class="link">Source</a> <a href="#v:manipulateRunningJob" class="selflink">#</a></p><div class="doc"><p>Manipulate a running job by atomically moving it from <code><a href="Ganeti-JQScheduler-Types.html#v:qRunning" title="Ganeti.JQScheduler.Types">qRunning</a></code>
 into <code><a href="Ganeti-JQScheduler-Types.html#v:qManipulated" title="Ganeti.JQScheduler.Types">qManipulated</a></code>, running a given IO action and then atomically
 returning it back.</p><p>Returns the result of the IO action, or <code>Nothing</code>, if the job wasn't found
 in the queue.</p></div></div><div class="top"><p class="src"><a id="v:sortoutFinishedJobs" class="def">sortoutFinishedJobs</a> :: <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>]) <a href="Ganeti/JQScheduler.html#sortoutFinishedJobs" class="link">Source</a> <a href="#v:sortoutFinishedJobs" class="selflink">#</a></p><div class="doc"><p>Sort out the finished jobs from the monitored part of the queue.
 This is the pure part, splitting the queue into a remaining queue
 and the jobs that were removed.</p></div></div><div class="top"><p class="src"><a id="v:cleanupFinishedJobs" class="def">cleanupFinishedJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#cleanupFinishedJobs" class="link">Source</a> <a href="#v:cleanupFinishedJobs" class="selflink">#</a></p><div class="doc"><p>Actually clean up the finished jobs. This is the IO wrapper around
 the pure <code><a href="Ganeti-JQScheduler.html#v:sortoutFinishedJobs" title="Ganeti.JQScheduler">sortoutFinishedJobs</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:jobWatcher" class="def">jobWatcher</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; Event -&gt; IO () <a href="Ganeti/JQScheduler.html#jobWatcher" class="link">Source</a> <a href="#v:jobWatcher" class="selflink">#</a></p><div class="doc"><p>Watcher task for a job, to update it on file changes. It also
 reinstantiates itself upon receiving an Ignored event.</p></div></div><div class="top"><p class="src"><a id="v:attachWatcher" class="def">attachWatcher</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#attachWatcher" class="link">Source</a> <a href="#v:attachWatcher" class="selflink">#</a></p><div class="doc"><p>Attach the job watcher to a running job.</p></div></div><div class="top"><p class="src"><a id="v:jobEligible" class="def">jobEligible</a> :: <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; Bool <a href="Ganeti/JQScheduler.html#jobEligible" class="link">Source</a> <a href="#v:jobEligible" class="selflink">#</a></p><div class="doc"><p>For a queued job, determine whether it is eligible to run, i.e.,
 if no jobs it depends on are either enqueued or running.</p></div></div><div class="top"><p class="src"><a id="v:selectJobsToRun" class="def">selectJobsToRun</a> <a href="Ganeti/JQScheduler.html#selectJobsToRun" class="link">Source</a> <a href="#v:selectJobsToRun" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Int</td><td class="doc"><p>How many jobs are allowed to run at the
 same time.</p></td></tr><tr><td class="src">-&gt; Set <a href="Ganeti-Objects.html#t:FilterRule" title="Ganeti.Objects">FilterRule</a></td><td class="doc"><p>Filter rules to respect for scheduling</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>])</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Decide on which jobs to schedule next for execution. This is the
 pure function doing the scheduling.</p></div></div><div class="top"><p class="src"><a id="v:logFailedJobs" class="def">logFailedJobs</a> :: <a href="Ganeti-Logging.html#t:MonadLog" title="Ganeti.Logging">MonadLog</a> m =&gt; [(<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>, <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a>)] -&gt; m (Set <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a>) <a href="Ganeti/JQScheduler.html#logFailedJobs" class="link">Source</a> <a href="#v:logFailedJobs" class="selflink">#</a></p><div class="doc"><p>Logs errors of failed jobs and returns the set of job IDs.</p></div></div><div class="top"><p class="src"><a id="v:failJobs" class="def">failJobs</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; [(<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>, <a href="Ganeti-Errors.html#t:GanetiException" title="Ganeti.Errors">GanetiException</a>)] -&gt; IO () <a href="Ganeti/JQScheduler.html#failJobs" class="link">Source</a> <a href="#v:failJobs" class="selflink">#</a></p><div class="doc"><p>Fail jobs that were previously selected for execution
 but couldn't be started.</p></div></div><div class="top"><p class="src"><a id="v:cancelRejectedJobs" class="def">cancelRejectedJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; Set <a href="Ganeti-Objects.html#t:FilterRule" title="Ganeti.Objects">FilterRule</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#cancelRejectedJobs" class="link">Source</a> <a href="#v:cancelRejectedJobs" class="selflink">#</a></p><div class="doc"><p>Checks if any jobs match a REJECT filter rule, and cancels them.</p></div></div><div class="top"><p class="src"><a id="v:scheduleSomeJobs" class="def">scheduleSomeJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#scheduleSomeJobs" class="link">Source</a> <a href="#v:scheduleSomeJobs" class="selflink">#</a></p><div class="doc"><p>Schedule jobs to be run. This is the IO wrapper around the
 pure <code><a href="Ganeti-JQScheduler.html#v:selectJobsToRun" title="Ganeti.JQScheduler">selectJobsToRun</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:showQueue" class="def">showQueue</a> :: <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; String <a href="Ganeti/JQScheduler.html#showQueue" class="link">Source</a> <a href="#v:showQueue" class="selflink">#</a></p><div class="doc"><p>Format the job queue status in a compact, human readable way.</p></div></div><div class="top"><p class="src"><a id="v:checkForDeath" class="def">checkForDeath</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a> -&gt; IO Bool <a href="Ganeti/JQScheduler.html#checkForDeath" class="link">Source</a> <a href="#v:checkForDeath" class="selflink">#</a></p><div class="doc"><p>Check if a job died, and clean up if so. Return True, if
 the job was found dead.</p></div></div><div class="top"><p class="src"><a id="v:cleanupIfDead" class="def">cleanupIfDead</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO Bool <a href="Ganeti/JQScheduler.html#cleanupIfDead" class="link">Source</a> <a href="#v:cleanupIfDead" class="selflink">#</a></p><div class="doc"><p>Trigger job detection for the job with the given job id.
 Return True, if the job is dead.</p></div></div><div class="top"><p class="src"><a id="v:updateStatusAndScheduleSomeJobs" class="def">updateStatusAndScheduleSomeJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#updateStatusAndScheduleSomeJobs" class="link">Source</a> <a href="#v:updateStatusAndScheduleSomeJobs" class="selflink">#</a></p><div class="doc"><p>Force the queue to check the state of all jobs.</p></div></div><div class="top"><p class="src"><a id="v:onTimeWatcher" class="def">onTimeWatcher</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#onTimeWatcher" class="link">Source</a> <a href="#v:onTimeWatcher" class="selflink">#</a></p><div class="doc"><p>Time-based watcher for updating the job queue.</p></div></div><div class="top"><p class="src"><a id="v:readJobFromDisk" class="def">readJobFromDisk</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>) <a href="Ganeti/JQScheduler.html#readJobFromDisk" class="link">Source</a> <a href="#v:readJobFromDisk" class="selflink">#</a></p><div class="doc"><p>Read a single, non-archived, job, specified by its id, from disk.</p></div></div><div class="top"><p class="src"><a id="v:readJobsFromDisk" class="def">readJobsFromDisk</a> :: IO [<a href="Ganeti-JQScheduler-Types.html#t:JobWithStat" title="Ganeti.JQScheduler.Types">JobWithStat</a>] <a href="Ganeti/JQScheduler.html#readJobsFromDisk" class="link">Source</a> <a href="#v:readJobsFromDisk" class="selflink">#</a></p><div class="doc"><p>Read all non-finalized jobs from disk.</p></div></div><div class="top"><p class="src"><a id="v:initJQScheduler" class="def">initJQScheduler</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; IO () <a href="Ganeti/JQScheduler.html#initJQScheduler" class="link">Source</a> <a href="#v:initJQScheduler" class="selflink">#</a></p><div class="doc"><p>Set up the job scheduler. This will also start the monitoring
 of changes to the running jobs.</p></div></div><div class="top"><p class="src"><a id="v:enqueueNewJobs" class="def">enqueueNewJobs</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; [<a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a>] -&gt; IO () <a href="Ganeti/JQScheduler.html#enqueueNewJobs" class="link">Source</a> <a href="#v:enqueueNewJobs" class="selflink">#</a></p><div class="doc"><p>Enqueue new jobs. This will guarantee that the jobs will be executed
 eventually.</p></div></div><div class="top"><p class="src"><a id="v:rmJob" class="def">rmJob</a> :: <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; <a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a> -&gt; (<a href="Ganeti-JQScheduler-Types.html#t:Queue" title="Ganeti.JQScheduler.Types">Queue</a>, <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (Maybe <a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a>)) <a href="Ganeti/JQScheduler.html#rmJob" class="link">Source</a> <a href="#v:rmJob" class="selflink">#</a></p><div class="doc"><p>Pure function for removing a queued job from the job queue by
 atomicModifyIORef. The answer is Just the job if the job could be removed
 before being handed over to execution, Nothing if it already was started
 and a Bad result if the job is not found in the queue.</p></div></div><div class="top"><p class="src"><a id="v:dequeueJob" class="def">dequeueJob</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> Bool) <a href="Ganeti/JQScheduler.html#dequeueJob" class="link">Source</a> <a href="#v:dequeueJob" class="selflink">#</a></p><div class="doc"><p>Try to remove a queued job from the job queue. Return True, if
 the job could be removed from the queue before being handed over
 to execution, False if the job already started, and a Bad result
 if the job is unknown.</p></div></div><div class="top"><p class="src"><a id="v:setJobPriority" class="def">setJobPriority</a> :: <a href="Ganeti-JQScheduler.html#t:JQStatus" title="Ganeti.JQScheduler">JQStatus</a> -&gt; <a href="Ganeti-Types.html#t:JobId" title="Ganeti.Types">JobId</a> -&gt; Int -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (Maybe <a href="Ganeti-JQueue-Objects.html#t:QueuedJob" title="Ganeti.JQueue.Objects">QueuedJob</a>)) <a href="Ganeti/JQScheduler.html#setJobPriority" class="link">Source</a> <a href="#v:setJobPriority" class="selflink">#</a></p><div class="doc"><p>Change the priority of a queued job (once the job is handed over
 to execution, the job itself needs to be informed). To avoid the
 job being started unmodified, it is temporarily unqueued during the
 change. Return the modified job, if the job's priority was sucessfully
 modified, Nothing, if the job already started, and a Bad value, if the job
 is unkown.</p></div></div><div class="top"><p class="src"><a id="v:configChangeNeedsRescheduling" class="def">configChangeNeedsRescheduling</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; Bool <a href="Ganeti/JQScheduler.html#configChangeNeedsRescheduling" class="link">Source</a> <a href="#v:configChangeNeedsRescheduling" class="selflink">#</a></p><div class="doc"><p>Given old and new configs, determines if the changes between them should
 trigger the scheduler to run.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>