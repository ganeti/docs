<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.Metad.Config</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/Metad/Config.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.Metad.Config</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:mergeConfig">mergeConfig</a> :: <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a> -&gt; <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a> -&gt; <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a></li><li class="src short"><a href="#v:getOsParams">getOsParams</a> :: String -&gt; String -&gt; JSObject JSValue -&gt; Result (JSObject JSValue)</li><li class="src short"><a href="#v:getPublicOsParams">getPublicOsParams</a> :: JSObject JSValue -&gt; Result (JSObject JSValue)</li><li class="src short"><a href="#v:getPrivateOsParams">getPrivateOsParams</a> :: JSObject JSValue -&gt; Result (JSObject JSValue)</li><li class="src short"><a href="#v:getSecretOsParams">getSecretOsParams</a> :: JSObject JSValue -&gt; Result (JSObject JSValue)</li><li class="src short"><a href="#v:makeInstanceParams">makeInstanceParams</a> :: JSObject JSValue -&gt; JSObject JSValue -&gt; JSObject JSValue -&gt; JSValue</li><li class="src short"><a href="#v:getOsParamsWithVisibility">getOsParamsWithVisibility</a> :: JSValue -&gt; Result JSValue</li><li class="src short"><a href="#v:getInstanceCommunicationIp">getInstanceCommunicationIp</a> :: JSObject JSValue -&gt; Result (Maybe String)</li><li class="src short"><a href="#v:getInstanceParams">getInstanceParams</a> :: JSValue -&gt; Result (String, Maybe <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:mergeConfig" class="def">mergeConfig</a> :: <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a> -&gt; <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a> -&gt; <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a> <a href="Ganeti/Metad/Config.html#mergeConfig" class="link">Source</a> <a href="#v:mergeConfig" class="selflink">#</a></p><div class="doc"><p>Merges two instance configurations into one.</p><p>In the case where instance IPs (i.e., map keys) are repeated, the
 old instance configuration is thrown away by <code>union</code> and
 replaced by the new configuration.  As a result, the old private
 and secret OS parameters are completely lost.</p></div></div><div class="top"><p class="src"><a id="v:getOsParams" class="def">getOsParams</a> :: String -&gt; String -&gt; JSObject JSValue -&gt; Result (JSObject JSValue) <a href="Ganeti/Metad/Config.html#getOsParams" class="link">Source</a> <a href="#v:getOsParams" class="selflink">#</a></p><div class="doc"><p>Extracts the OS parameters (public, private, secret) from a JSON
 object.</p><p>This function checks whether the OS parameters are in fact a JSON
 object.</p></div></div><div class="top"><p class="src"><a id="v:getPublicOsParams" class="def">getPublicOsParams</a> :: JSObject JSValue -&gt; Result (JSObject JSValue) <a href="Ganeti/Metad/Config.html#getPublicOsParams" class="link">Source</a> <a href="#v:getPublicOsParams" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPrivateOsParams" class="def">getPrivateOsParams</a> :: JSObject JSValue -&gt; Result (JSObject JSValue) <a href="Ganeti/Metad/Config.html#getPrivateOsParams" class="link">Source</a> <a href="#v:getPrivateOsParams" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getSecretOsParams" class="def">getSecretOsParams</a> :: JSObject JSValue -&gt; Result (JSObject JSValue) <a href="Ganeti/Metad/Config.html#getSecretOsParams" class="link">Source</a> <a href="#v:getSecretOsParams" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:makeInstanceParams" class="def">makeInstanceParams</a> :: JSObject JSValue -&gt; JSObject JSValue -&gt; JSObject JSValue -&gt; JSValue <a href="Ganeti/Metad/Config.html#makeInstanceParams" class="link">Source</a> <a href="#v:makeInstanceParams" class="selflink">#</a></p><div class="doc"><p>Merges the OS parameters (public, private, secret) in a single
 data structure containing all parameters and their visibility.</p><p>Example:</p><pre>{ &quot;os-image&quot;: [&quot;http://example.com/disk.img&quot;, &quot;public&quot;],
  &quot;os-password&quot;: [&quot;mypassword&quot;, &quot;secret&quot;] }</pre></div></div><div class="top"><p class="src"><a id="v:getOsParamsWithVisibility" class="def">getOsParamsWithVisibility</a> :: JSValue -&gt; Result JSValue <a href="Ganeti/Metad/Config.html#getOsParamsWithVisibility" class="link">Source</a> <a href="#v:getOsParamsWithVisibility" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getInstanceCommunicationIp" class="def">getInstanceCommunicationIp</a> :: JSObject JSValue -&gt; Result (Maybe String) <a href="Ganeti/Metad/Config.html#getInstanceCommunicationIp" class="link">Source</a> <a href="#v:getInstanceCommunicationIp" class="selflink">#</a></p><div class="doc"><p>Finds the IP address of the instance communication NIC in the
 instance's NICs. If the corresponding NIC isn't found, <code>Nothing</code> is returned.</p></div></div><div class="top"><p class="src"><a id="v:getInstanceParams" class="def">getInstanceParams</a> :: JSValue -&gt; Result (String, Maybe <a href="Ganeti-Metad-Types.html#t:InstanceParams" title="Ganeti.Metad.Types">InstanceParams</a>) <a href="Ganeti/Metad/Config.html#getInstanceParams" class="link">Source</a> <a href="#v:getInstanceParams" class="selflink">#</a></p><div class="doc"><p>Extracts the OS parameters from the instance's parameters and
 returns a data structure containing all the OS parameters and their
 visibility indexed by the instance's IP address which is used in
 the instance communication NIC.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>