<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.HTools.Backend.MonD</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/HTools/Backend/MonD.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.HTools.Backend.MonD</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">General definitions</a></li><li><a href="#g:2">Node-total CPU load average data collector</a></li><li><a href="#g:3">Xen instance CPU-usage collector</a></li><li><a href="#g:4">Collector choice</a></li><li><a href="#g:5">Querying infrastructure</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Monitoring daemon backend</p><p>This module holds implements the querying of the monitoring daemons
for dynamic utilisation data.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Report">Report</a><ul class="subs"><li>= <a href="#v:CPUavgloadReport">CPUavgloadReport</a> <a href="Ganeti-Cpu-Types.html#t:CPUavgload" title="Ganeti.Cpu.Types">CPUavgload</a></li><li>| <a href="#v:InstanceCpuReport">InstanceCpuReport</a> (Map String Double)</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:DataCollector">DataCollector</a> = <a href="#v:DataCollector">DataCollector</a> {<ul class="subs"><li><a href="#v:dName">dName</a> :: String</li><li><a href="#v:dCategory">dCategory</a> :: Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCCategory" title="Ganeti.DataCollectors.Types">DCCategory</a></li><li><a href="#v:dMkReport">dMkReport</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a></li><li><a href="#v:dUse">dUse</a> :: [(<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>)] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>)</li></ul>}</li><li class="src short"><a href="#v:mkCpuReport">mkCpuReport</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a></li><li class="src short"><a href="#v:updateNodeCpuFromReport">updateNodeCpuFromReport</a> :: (<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>) -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a></li><li class="src short"><a href="#v:updateCpuUtilDataFromNode">updateCpuUtilDataFromNode</a> :: <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a></li><li class="src short"><a href="#v:useNodeTotalCPU">useNodeTotalCPU</a> :: [(<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>)] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>)</li><li class="src short"><a href="#v:totalCPUCollector">totalCPUCollector</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a></li><li class="src short"><a href="#v:mkXenCpuReport">mkXenCpuReport</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a></li><li class="src short"><a href="#v:useInstanceCpuData">useInstanceCpuData</a> :: [(<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>)] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>)</li><li class="src short"><a href="#v:xenCPUCollector">xenCPUCollector</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a></li><li class="src short"><a href="#v:collectors">collectors</a> :: <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; [<a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a>]</li><li class="src short"><a href="#v:mkReport">mkReport</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MonDData">MonDData</a> = (String, [<a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a>])</li><li class="src short"><span class="keyword">type</span> <a href="#t:MapMonDData">MapMonDData</a> = Map String [<a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a>]</li><li class="src short"><a href="#v:fromFile">fromFile</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Backend-MonD.html#t:MapMonDData" title="Ganeti.HTools.Backend.MonD">MapMonDData</a> -&gt; Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a></li><li class="src short"><a href="#v:getDCCName">getDCCName</a> :: Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCCategory" title="Ganeti.DataCollectors.Types">DCCategory</a> -&gt; String</li><li class="src short"><a href="#v:prepareUrl">prepareUrl</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; URLString</li><li class="src short"><a href="#v:fromCurl">fromCurl</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; IO (Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a>)</li><li class="src short"><a href="#v:pMonDN">pMonDN</a> :: <a href="Ganeti-JSON.html#t:JSRecord" title="Ganeti.JSON">JSRecord</a> -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-HTools-Backend-MonD.html#t:MonDData" title="Ganeti.HTools.Backend.MonD">MonDData</a></li><li class="src short"><a href="#v:pMonDData">pMonDData</a> :: String -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [<a href="Ganeti-HTools-Backend-MonD.html#t:MonDData" title="Ganeti.HTools.Backend.MonD">MonDData</a>]</li><li class="src short"><a href="#v:queryAMonD">queryAMonD</a> :: Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:MapMonDData" title="Ganeti.HTools.Backend.MonD">MapMonDData</a> -&gt; <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; IO (Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>)</li><li class="src short"><a href="#v:queryAllMonDs">queryAllMonDs</a> :: Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:MapMonDData" title="Ganeti.HTools.Backend.MonD">MapMonDData</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; WriterT All IO (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>)</li><li class="src short"><a href="#v:queryAllMonDDCs">queryAllMonDDCs</a> :: <a href="Ganeti-HTools-Loader.html#t:ClusterData" title="Ganeti.HTools.Loader">ClusterData</a> -&gt; <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; WriterT All IO <a href="Ganeti-HTools-Loader.html#t:ClusterData" title="Ganeti.HTools.Loader">ClusterData</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>General definitions</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Report" class="def">Report</a> <a href="Ganeti/HTools/Backend/MonD.html#Report" class="link">Source</a> <a href="#t:Report" class="selflink">#</a></p><div class="doc"><p>The actual data types for MonD's Data Collectors.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CPUavgloadReport" class="def">CPUavgloadReport</a> <a href="Ganeti-Cpu-Types.html#t:CPUavgload" title="Ganeti.Cpu.Types">CPUavgload</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:InstanceCpuReport" class="def">InstanceCpuReport</a> (Map String Double)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DataCollector" class="def">DataCollector</a> <a href="Ganeti/HTools/Backend/MonD.html#DataCollector" class="link">Source</a> <a href="#t:DataCollector" class="selflink">#</a></p><div class="doc"><p>Type describing a data collector basic information.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DataCollector" class="def">DataCollector</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:dName" class="def">dName</a> :: String</dfn><div class="doc"><p>Name of the data collector</p></div></li><li><dfn class="src"><a id="v:dCategory" class="def">dCategory</a> :: Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCCategory" title="Ganeti.DataCollectors.Types">DCCategory</a></dfn><div class="doc"><p>The name of the category</p></div></li><li><dfn class="src"><a id="v:dMkReport" class="def">dMkReport</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a></dfn><div class="doc"><p>How to parse a monitor report</p></div></li><li><dfn class="src"><a id="v:dUse" class="def">dUse</a> :: [(<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>)] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>)</dfn><div class="doc"><p>How the collector reports are to be used to bring dynamic
 data into a cluster</p></div></li></ul></div></td></tr></table></div></div><a href="#g:2" id="g:2"><h1>Node-total CPU load average data collector</h1></a><div class="top"><p class="src"><a id="v:mkCpuReport" class="def">mkCpuReport</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a> <a href="Ganeti/HTools/Backend/MonD.html#mkCpuReport" class="link">Source</a> <a href="#v:mkCpuReport" class="selflink">#</a></p><div class="doc"><p>Parse a DCReport for the node-total CPU collector.</p></div></div><div class="top"><p class="src"><a id="v:updateNodeCpuFromReport" class="def">updateNodeCpuFromReport</a> :: (<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>) -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> <a href="Ganeti/HTools/Backend/MonD.html#updateNodeCpuFromReport" class="link">Source</a> <a href="#v:updateNodeCpuFromReport" class="selflink">#</a></p><div class="doc"><p>Take reports of node CPU values and update a node accordingly.</p></div></div><div class="top"><p class="src"><a id="v:updateCpuUtilDataFromNode" class="def">updateCpuUtilDataFromNode</a> :: <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> <a href="Ganeti/HTools/Backend/MonD.html#updateCpuUtilDataFromNode" class="link">Source</a> <a href="#v:updateCpuUtilDataFromNode" class="selflink">#</a></p><div class="doc"><p>Update the instance CPU-utilization data, asuming that each virtual
 CPU contributes equally to the node CPU load.</p></div></div><div class="top"><p class="src"><a id="v:useNodeTotalCPU" class="def">useNodeTotalCPU</a> :: [(<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>)] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) <a href="Ganeti/HTools/Backend/MonD.html#useNodeTotalCPU" class="link">Source</a> <a href="#v:useNodeTotalCPU" class="selflink">#</a></p><div class="doc"><p>Update cluster data from node CPU load reports.</p></div></div><div class="top"><p class="src"><a id="v:totalCPUCollector" class="def">totalCPUCollector</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> <a href="Ganeti/HTools/Backend/MonD.html#totalCPUCollector" class="link">Source</a> <a href="#v:totalCPUCollector" class="selflink">#</a></p><div class="doc"><p>The node-total CPU collector.</p></div></div><a href="#g:3" id="g:3"><h1>Xen instance CPU-usage collector</h1></a><div class="top"><p class="src"><a id="v:mkXenCpuReport" class="def">mkXenCpuReport</a> :: <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a> <a href="Ganeti/HTools/Backend/MonD.html#mkXenCpuReport" class="link">Source</a> <a href="#v:mkXenCpuReport" class="selflink">#</a></p><div class="doc"><p>Parse results of the Xen-Cpu-load data collector.</p></div></div><div class="top"><p class="src"><a id="v:useInstanceCpuData" class="def">useInstanceCpuData</a> :: [(<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>, <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>)] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) <a href="Ganeti/HTools/Backend/MonD.html#useInstanceCpuData" class="link">Source</a> <a href="#v:useInstanceCpuData" class="selflink">#</a></p><div class="doc"><p>Update cluster data based on the per-instance CPU usage
 reports</p></div></div><div class="top"><p class="src"><a id="v:xenCPUCollector" class="def">xenCPUCollector</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> <a href="Ganeti/HTools/Backend/MonD.html#xenCPUCollector" class="link">Source</a> <a href="#v:xenCPUCollector" class="selflink">#</a></p><div class="doc"><p>Collector for per-instance CPU data as observed by Xen</p></div></div><a href="#g:4" id="g:4"><h1>Collector choice</h1></a><div class="top"><p class="src"><a id="v:collectors" class="def">collectors</a> :: <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; [<a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a>] <a href="Ganeti/HTools/Backend/MonD.html#collectors" class="link">Source</a> <a href="#v:collectors" class="selflink">#</a></p><div class="doc"><p>The list of Data Collectors used by hail and hbal.</p></div></div><a href="#g:5" id="g:5"><h1>Querying infrastructure</h1></a><div class="top"><p class="src"><a id="v:mkReport" class="def">mkReport</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> -&gt; Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a> <a href="Ganeti/HTools/Backend/MonD.html#mkReport" class="link">Source</a> <a href="#v:mkReport" class="selflink">#</a></p><div class="doc"><p>Return the data from correct combination of a Data Collector
 and a DCReport.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MonDData" class="def">MonDData</a> = (String, [<a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a>]) <a href="Ganeti/HTools/Backend/MonD.html#MonDData" class="link">Source</a> <a href="#t:MonDData" class="selflink">#</a></p><div class="doc"><p>MonDs Data parsed by a mock file. Representing (node name, list of reports
 produced by MonDs Data Collectors).</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MapMonDData" class="def">MapMonDData</a> = Map String [<a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a>] <a href="Ganeti/HTools/Backend/MonD.html#MapMonDData" class="link">Source</a> <a href="#t:MapMonDData" class="selflink">#</a></p><div class="doc"><p>A map storing MonDs data.</p></div></div><div class="top"><p class="src"><a id="v:fromFile" class="def">fromFile</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; <a href="Ganeti-HTools-Backend-MonD.html#t:MapMonDData" title="Ganeti.HTools.Backend.MonD">MapMonDData</a> -&gt; Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a> <a href="Ganeti/HTools/Backend/MonD.html#fromFile" class="link">Source</a> <a href="#v:fromFile" class="selflink">#</a></p><div class="doc"><p>Get data report for the specified Data Collector and Node from the map.</p></div></div><div class="top"><p class="src"><a id="v:getDCCName" class="def">getDCCName</a> :: Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCCategory" title="Ganeti.DataCollectors.Types">DCCategory</a> -&gt; String <a href="Ganeti/HTools/Backend/MonD.html#getDCCName" class="link">Source</a> <a href="#v:getDCCName" class="selflink">#</a></p><div class="doc"><p>Get Category Name.</p></div></div><div class="top"><p class="src"><a id="v:prepareUrl" class="def">prepareUrl</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; URLString <a href="Ganeti/HTools/Backend/MonD.html#prepareUrl" class="link">Source</a> <a href="#v:prepareUrl" class="selflink">#</a></p><div class="doc"><p>Prepare url to query a single collector.</p></div></div><div class="top"><p class="src"><a id="v:fromCurl" class="def">fromCurl</a> :: <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; IO (Maybe <a href="Ganeti-DataCollectors-Types.html#t:DCReport" title="Ganeti.DataCollectors.Types">DCReport</a>) <a href="Ganeti/HTools/Backend/MonD.html#fromCurl" class="link">Source</a> <a href="#v:fromCurl" class="selflink">#</a></p><div class="doc"><p>Query a specified MonD for a Data Collector.</p></div></div><div class="top"><p class="src"><a id="v:pMonDN" class="def">pMonDN</a> :: <a href="Ganeti-JSON.html#t:JSRecord" title="Ganeti.JSON">JSRecord</a> -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> <a href="Ganeti-HTools-Backend-MonD.html#t:MonDData" title="Ganeti.HTools.Backend.MonD">MonDData</a> <a href="Ganeti/HTools/Backend/MonD.html#pMonDN" class="link">Source</a> <a href="#v:pMonDN" class="selflink">#</a></p><div class="doc"><p>Parse a node's JSON record.</p></div></div><div class="top"><p class="src"><a id="v:pMonDData" class="def">pMonDData</a> :: String -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [<a href="Ganeti-HTools-Backend-MonD.html#t:MonDData" title="Ganeti.HTools.Backend.MonD">MonDData</a>] <a href="Ganeti/HTools/Backend/MonD.html#pMonDData" class="link">Source</a> <a href="#v:pMonDData" class="selflink">#</a></p><div class="doc"><p>Parse MonD data file contents.</p></div></div><div class="top"><p class="src"><a id="v:queryAMonD" class="def">queryAMonD</a> :: Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:MapMonDData" title="Ganeti.HTools.Backend.MonD">MapMonDData</a> -&gt; <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; IO (Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:Report" title="Ganeti.HTools.Backend.MonD">Report</a>) <a href="Ganeti/HTools/Backend/MonD.html#queryAMonD" class="link">Source</a> <a href="#v:queryAMonD" class="selflink">#</a></p><div class="doc"><p>Query a single MonD for a single Data Collector.</p></div></div><div class="top"><p class="src"><a id="v:queryAllMonDs" class="def">queryAllMonDs</a> :: Maybe <a href="Ganeti-HTools-Backend-MonD.html#t:MapMonDData" title="Ganeti.HTools.Backend.MonD">MapMonDData</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-HTools-Backend-MonD.html#t:DataCollector" title="Ganeti.HTools.Backend.MonD">DataCollector</a> -&gt; WriterT All IO (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) <a href="Ganeti/HTools/Backend/MonD.html#queryAllMonDs" class="link">Source</a> <a href="#v:queryAllMonDs" class="selflink">#</a></p><div class="doc"><p>Query all MonDs for a single Data Collector. Return the updated
 cluster, as well as a bit inidicating wether the collector succeeded.</p></div></div><div class="top"><p class="src"><a id="v:queryAllMonDDCs" class="def">queryAllMonDDCs</a> :: <a href="Ganeti-HTools-Loader.html#t:ClusterData" title="Ganeti.HTools.Loader">ClusterData</a> -&gt; <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; WriterT All IO <a href="Ganeti-HTools-Loader.html#t:ClusterData" title="Ganeti.HTools.Loader">ClusterData</a> <a href="Ganeti/HTools/Backend/MonD.html#queryAllMonDDCs" class="link">Source</a> <a href="#v:queryAllMonDDCs" class="selflink">#</a></p><div class="doc"><p>Query all MonDs for all Data Collector. Return the cluster enriched
 by dynamic data, as well as a bit indicating wether all collectors
 could be queried successfully.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>