<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.HTools.Program.Hsqueeze</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/HTools/Program/Hsqueeze.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.HTools.Program.Hsqueeze</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Node freeing scheduler</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:options">options</a> :: IO [<a href="Ganeti-HTools-CLI.html#t:OptType" title="Ganeti.HTools.CLI">OptType</a>]</li><li class="src short"><a href="#v:arguments">arguments</a> :: [<a href="Ganeti-Common.html#t:ArgCompletion" title="Ganeti.Common">ArgCompletion</a>]</li><li class="src short"><a href="#v:annotateOpCode">annotateOpCode</a> :: <a href="Ganeti-JQueue-Objects.html#t:Timestamp" title="Ganeti.JQueue.Objects">Timestamp</a> -&gt; String -&gt; <a href="Ganeti-Jobs.html#t:Annotator" title="Ganeti.Jobs">Annotator</a></li><li class="src short"><a href="#v:onlyExternal">onlyExternal</a> :: (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool</li><li class="src short"><a href="#v:noSecondaries">noSecondaries</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool</li><li class="src short"><a href="#v:allInstancesOnOnlineNodes">allInstancesOnOnlineNodes</a> :: (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; Bool</li><li class="src short"><a href="#v:allNodesCapacityFor">allNodesCapacityFor</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; Bool</li><li class="src short"><a href="#v:balance">balance</a> :: (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>])</li><li class="src short"><a href="#v:onlineOfflineNode">onlineOfflineNode</a> :: Bool -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>)</li><li class="src short"><a href="#v:onlineOfflineNodes">onlineOfflineNodes</a> :: Bool -&gt; [<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>])</li><li class="src short"><a href="#v:offlineNodes">offlineNodes</a> :: [<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>])</li><li class="src short"><a href="#v:onlineNodes">onlineNodes</a> :: [<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>])</li><li class="src short"><a href="#v:canOnlineOffline">canOnlineOffline</a> :: Bool -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Bool</li><li class="src short"><a href="#v:canOffline">canOffline</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Bool</li><li class="src short"><a href="#v:sufficesOnline">sufficesOnline</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Bool</li><li class="src short"><a href="#v:greedyOfflineNodes">greedyOfflineNodes</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>]</li><li class="src short"><a href="#v:tryOnline">tryOnline</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Maybe [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>]</li><li class="src short"><a href="#v:instanceFromSpecAndFactor">instanceFromSpecAndFactor</a> :: String -&gt; Double -&gt; <a href="Ganeti-HTools-Types.html#t:ISpec" title="Ganeti.HTools.Types">ISpec</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a></li><li class="src short"><a href="#v:getMoveOpCodes">getMoveOpCodes</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; [<a href="Ganeti-HTools-Types.html#t:JobSet" title="Ganeti.HTools.Types">JobSet</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)]</li><li class="src short"><a href="#v:getTagOpCodes">getTagOpCodes</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)]</li><li class="src short"><a href="#v:getPowerOffOpCodes">getPowerOffOpCodes</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)]</li><li class="src short"><a href="#v:getPowerOnOpCodes">getPowerOnOpCodes</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)]</li><li class="src short"><a href="#v:maybeExecJobs">maybeExecJobs</a> :: <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; String -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)] -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> ())</li><li class="src short"><a href="#v:main">main</a> :: <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; [String] -&gt; IO ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:options" class="def">options</a> :: IO [<a href="Ganeti-HTools-CLI.html#t:OptType" title="Ganeti.HTools.CLI">OptType</a>] <a href="Ganeti/HTools/Program/Hsqueeze.html#options" class="link">Source</a> <a href="#v:options" class="selflink">#</a></p><div class="doc"><p>Options list and functions.</p></div></div><div class="top"><p class="src"><a id="v:arguments" class="def">arguments</a> :: [<a href="Ganeti-Common.html#t:ArgCompletion" title="Ganeti.Common">ArgCompletion</a>] <a href="Ganeti/HTools/Program/Hsqueeze.html#arguments" class="link">Source</a> <a href="#v:arguments" class="selflink">#</a></p><div class="doc"><p>The list of arguments supported by the program.</p></div></div><div class="top"><p class="src"><a id="v:annotateOpCode" class="def">annotateOpCode</a> :: <a href="Ganeti-JQueue-Objects.html#t:Timestamp" title="Ganeti.JQueue.Objects">Timestamp</a> -&gt; String -&gt; <a href="Ganeti-Jobs.html#t:Annotator" title="Ganeti.Jobs">Annotator</a> <a href="Ganeti/HTools/Program/Hsqueeze.html#annotateOpCode" class="link">Source</a> <a href="#v:annotateOpCode" class="selflink">#</a></p><div class="doc"><p>Wraps an <code><a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a></code> in a <code><a href="Ganeti-OpCodes.html#t:MetaOpCode" title="Ganeti.OpCodes">MetaOpCode</a></code> while also adding a comment
 about what generated the opcode.</p></div></div><div class="top"><p class="src"><a id="v:onlyExternal" class="def">onlyExternal</a> :: (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool <a href="Ganeti/HTools/Program/Hsqueeze.html#onlyExternal" class="link">Source</a> <a href="#v:onlyExternal" class="selflink">#</a></p><div class="doc"><p>Within a cluster configuration, decide if the node hosts only
 externally-mirrored instances.</p></div></div><div class="top"><p class="src"><a id="v:noSecondaries" class="def">noSecondaries</a> :: <a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a> -&gt; Bool <a href="Ganeti/HTools/Program/Hsqueeze.html#noSecondaries" class="link">Source</a> <a href="#v:noSecondaries" class="selflink">#</a></p><div class="doc"><p>Predicate of not being secondary node for any instance</p></div></div><div class="top"><p class="src"><a id="v:allInstancesOnOnlineNodes" class="def">allInstancesOnOnlineNodes</a> :: (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; Bool <a href="Ganeti/HTools/Program/Hsqueeze.html#allInstancesOnOnlineNodes" class="link">Source</a> <a href="#v:allInstancesOnOnlineNodes" class="selflink">#</a></p><div class="doc"><p>Predicate whether, in a configuration, all running instances are on
 online nodes.</p></div></div><div class="top"><p class="src"><a id="v:allNodesCapacityFor" class="def">allNodesCapacityFor</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; Bool <a href="Ganeti/HTools/Program/Hsqueeze.html#allNodesCapacityFor" class="link">Source</a> <a href="#v:allNodesCapacityFor" class="selflink">#</a></p><div class="doc"><p>Predicate whether, in a configuration, each node has enough resources 
 to additionally host the given instance.</p></div></div><div class="top"><p class="src"><a id="v:balance" class="def">balance</a> :: (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>]) <a href="Ganeti/HTools/Program/Hsqueeze.html#balance" class="link">Source</a> <a href="#v:balance" class="selflink">#</a></p><div class="doc"><p>Balance a configuration, possible for 0 steps, till no further improvement
 is possible.</p></div></div><div class="top"><p class="src"><a id="v:onlineOfflineNode" class="def">onlineOfflineNode</a> :: Bool -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; <a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) <a href="Ganeti/HTools/Program/Hsqueeze.html#onlineOfflineNode" class="link">Source</a> <a href="#v:onlineOfflineNode" class="selflink">#</a></p><div class="doc"><p>In a configuration, mark a node as online or offline.</p></div></div><div class="top"><p class="src"><a id="v:onlineOfflineNodes" class="def">onlineOfflineNodes</a> :: Bool -&gt; [<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>]) <a href="Ganeti/HTools/Program/Hsqueeze.html#onlineOfflineNodes" class="link">Source</a> <a href="#v:onlineOfflineNodes" class="selflink">#</a></p><div class="doc"><p>Offline or online a list nodes, and return the state after a balancing
 attempt together with the sequence of moves that lead there.</p></div></div><div class="top"><p class="src"><a id="v:offlineNodes" class="def">offlineNodes</a> :: [<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>]) <a href="Ganeti/HTools/Program/Hsqueeze.html#offlineNodes" class="link">Source</a> <a href="#v:offlineNodes" class="selflink">#</a></p><div class="doc"><p>Offline a list of nodes, and return the state after balancing with
 the sequence of moves that lead there.</p></div></div><div class="top"><p class="src"><a id="v:onlineNodes" class="def">onlineNodes</a> :: [<a href="Ganeti-HTools-Types.html#t:Ndx" title="Ganeti.HTools.Types">Ndx</a>] -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; ((<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>), [<a href="Ganeti-HTools-Types.html#t:MoveJob" title="Ganeti.HTools.Types">MoveJob</a>]) <a href="Ganeti/HTools/Program/Hsqueeze.html#onlineNodes" class="link">Source</a> <a href="#v:onlineNodes" class="selflink">#</a></p><div class="doc"><p>Online a list of nodes, and return the state after balancing with
 the sequence of moves that lead there.</p></div></div><div class="top"><p class="src"><a id="v:canOnlineOffline" class="def">canOnlineOffline</a> :: Bool -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Bool <a href="Ganeti/HTools/Program/Hsqueeze.html#canOnlineOffline" class="link">Source</a> <a href="#v:canOnlineOffline" class="selflink">#</a></p><div class="doc"><p>Predicate on whether a list of nodes can be offlined or onlined
 simultaneously in a given configuration, while still leaving enough
 capacity on every node for the given instance.</p></div></div><div class="top"><p class="src"><a id="v:canOffline" class="def">canOffline</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Bool <a href="Ganeti/HTools/Program/Hsqueeze.html#canOffline" class="link">Source</a> <a href="#v:canOffline" class="selflink">#</a></p><div class="doc"><p>Predicate on whether a list of nodes can be offlined simultaneously.</p></div></div><div class="top"><p class="src"><a id="v:sufficesOnline" class="def">sufficesOnline</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Bool <a href="Ganeti/HTools/Program/Hsqueeze.html#sufficesOnline" class="link">Source</a> <a href="#v:sufficesOnline" class="selflink">#</a></p><div class="doc"><p>Predicate on whether onlining a list of nodes suffices to get enough
 free resources for given instance.</p></div></div><div class="top"><p class="src"><a id="v:greedyOfflineNodes" class="def">greedyOfflineNodes</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] <a href="Ganeti/HTools/Program/Hsqueeze.html#greedyOfflineNodes" class="link">Source</a> <a href="#v:greedyOfflineNodes" class="selflink">#</a></p><div class="doc"><p>Greedily offline the nodes, starting from the last element, and return
 the list of nodes that could simultaneously be offlined, while keeping
 the resources specified by an instance.</p></div></div><div class="top"><p class="src"><a id="v:tryOnline" class="def">tryOnline</a> :: <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> -&gt; (<a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a>, <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a>) -&gt; [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; Maybe [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] <a href="Ganeti/HTools/Program/Hsqueeze.html#tryOnline" class="link">Source</a> <a href="#v:tryOnline" class="selflink">#</a></p><div class="doc"><p>Try to provide enough resources by onlining an initial segment of
 a list of nodes. Return Nothing, if even onlining all of them is not
 enough.</p></div></div><div class="top"><p class="src"><a id="v:instanceFromSpecAndFactor" class="def">instanceFromSpecAndFactor</a> :: String -&gt; Double -&gt; <a href="Ganeti-HTools-Types.html#t:ISpec" title="Ganeti.HTools.Types">ISpec</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:Instance" title="Ganeti.HTools.Instance">Instance</a> <a href="Ganeti/HTools/Program/Hsqueeze.html#instanceFromSpecAndFactor" class="link">Source</a> <a href="#v:instanceFromSpecAndFactor" class="selflink">#</a></p><div class="doc"><p>From a specification, name, and factor create an instance that uses that
 factor times the specification, rounded down.</p></div></div><div class="top"><p class="src"><a id="v:getMoveOpCodes" class="def">getMoveOpCodes</a> :: <a href="Ganeti-HTools-Node.html#t:List" title="Ganeti.HTools.Node">List</a> -&gt; <a href="Ganeti-HTools-Instance.html#t:List" title="Ganeti.HTools.Instance">List</a> -&gt; [<a href="Ganeti-HTools-Types.html#t:JobSet" title="Ganeti.HTools.Types">JobSet</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)] <a href="Ganeti/HTools/Program/Hsqueeze.html#getMoveOpCodes" class="link">Source</a> <a href="#v:getMoveOpCodes" class="selflink">#</a></p><div class="doc"><p>Get opcodes for the given move job.</p></div></div><div class="top"><p class="src"><a id="v:getTagOpCodes" class="def">getTagOpCodes</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)] <a href="Ganeti/HTools/Program/Hsqueeze.html#getTagOpCodes" class="link">Source</a> <a href="#v:getTagOpCodes" class="selflink">#</a></p><div class="doc"><p>Get opcodes for tagging nodes with standby.</p></div></div><div class="top"><p class="src"><a id="v:getPowerOffOpCodes" class="def">getPowerOffOpCodes</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)] <a href="Ganeti/HTools/Program/Hsqueeze.html#getPowerOffOpCodes" class="link">Source</a> <a href="#v:getPowerOffOpCodes" class="selflink">#</a></p><div class="doc"><p>Get opcodes for powering off nodes</p></div></div><div class="top"><p class="src"><a id="v:getPowerOnOpCodes" class="def">getPowerOnOpCodes</a> :: [<a href="Ganeti-HTools-Node.html#t:Node" title="Ganeti.HTools.Node">Node</a>] -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)] <a href="Ganeti/HTools/Program/Hsqueeze.html#getPowerOnOpCodes" class="link">Source</a> <a href="#v:getPowerOnOpCodes" class="selflink">#</a></p><div class="doc"><p>Get opcodes for powering on nodes</p></div></div><div class="top"><p class="src"><a id="v:maybeExecJobs" class="def">maybeExecJobs</a> :: <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; String -&gt; <a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> [([[<a href="Ganeti-OpCodes.html#t:OpCode" title="Ganeti.OpCodes">OpCode</a>]], String)] -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result" title="Ganeti.BasicTypes">Result</a> ()) <a href="Ganeti/HTools/Program/Hsqueeze.html#maybeExecJobs" class="link">Source</a> <a href="#v:maybeExecJobs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:main" class="def">main</a> :: <a href="Ganeti-HTools-CLI.html#t:Options" title="Ganeti.HTools.CLI">Options</a> -&gt; [String] -&gt; IO () <a href="Ganeti/HTools/Program/Hsqueeze.html#main" class="link">Source</a> <a href="#v:main" class="selflink">#</a></p><div class="doc"><p>Main function.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>