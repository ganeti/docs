<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ganeti.Query.Instance</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ganeti</span><ul class="links" id="page-menu"><li><a href="Ganeti/Query/Instance.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.Query.Instance</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Helper functions for node property retrieval</a></li><li><a href="#g:2">Various helper functions for property retrieval</a></li><li><a href="#g:3">Live fields functionality</a></li><li><a href="#g:4">Functionality related to status and operational status extraction</a></li><li><a href="#g:5">Helper functions extracting information as necessary for the generic query</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of the Ganeti Query2 instance queries.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:LiveInfo">LiveInfo</a> = (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool), Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo" title="Ganeti.Rpc">InstanceConsoleInfo</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Runtime">Runtime</a> = Either <a href="Ganeti-Rpc.html#t:RpcError" title="Ganeti.Rpc">RpcError</a> <a href="Ganeti-Query-Instance.html#t:LiveInfo" title="Ganeti.Query.Instance">LiveInfo</a></li><li class="src short"><a href="#v:fieldsMap">fieldsMap</a> :: <a href="Ganeti-Query-Types.html#t:FieldMap" title="Ganeti.Query.Types">FieldMap</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:instanceAliases">instanceAliases</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>)]</li><li class="src short"><a href="#v:aliasedFields">aliasedFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:instanceFields">instanceFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:nicDescSuffix">nicDescSuffix</a> :: String</li><li class="src short"><a href="#v:nicAggDescPrefix">nicAggDescPrefix</a> :: String</li><li class="src short"><a href="#v:getNetworkName">getNetworkName</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; String -&gt; <a href="Ganeti-Types.html#t:NonEmptyString" title="Ganeti.Types">NonEmptyString</a></li><li class="src short"><a href="#v:getNicBridge">getNicBridge</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; Maybe String</li><li class="src short"><a href="#v:getNicVlan">getNicVlan</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; Maybe String</li><li class="src short"><a href="#v:fillNicParamsFromConfig">fillNicParamsFromConfig</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:PartialNicParams" title="Ganeti.Objects.Nic">PartialNicParams</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a></li><li class="src short"><a href="#v:getDefaultNicParams">getDefaultNicParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a></li><li class="src short"><a href="#v:getDiskSizeRequirements">getDiskSizeRequirements</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getDiskSizes">getDiskSizes</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getDiskSpindles">getDiskSpindles</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getDiskNames">getDiskNames</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getDiskUuids">getDiskUuids</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getIndexedOptionalConfField">getIndexedOptionalConfField</a> :: JSON b =&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [a]) -&gt; (a -&gt; Maybe b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getIndexedConfField">getIndexedConfField</a> :: JSON b =&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [a]) -&gt; (a -&gt; b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getIndexedNicNetworkNameField">getIndexedNicNetworkNameField</a> :: Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getIndexedNicField">getIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getOptionalIndexedNicField">getOptionalIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; Maybe a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getIndexedFieldWithDefault">getIndexedFieldWithDefault</a> :: JSON c =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; [a]) -&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; b) -&gt; (b -&gt; a -&gt; b) -&gt; (b -&gt; Maybe c) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getIndexedOptionalField">getIndexedOptionalField</a> :: JSON b =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; [a]) -&gt; (a -&gt; Maybe b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getIndexedField">getIndexedField</a> :: JSON b =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; [a]) -&gt; (a -&gt; b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:maybeAt">maybeAt</a> :: Int -&gt; [a] -&gt; Maybe a</li><li class="src short"><a href="#v:fieldDefinitionCompleter">fieldDefinitionCompleter</a> :: PrintfArg t1 =&gt; PrintfArg t2 =&gt; <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldTitle" title="Ganeti.Query.Language">FieldTitle</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldType" title="Ganeti.Query.Language">FieldType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldDoc" title="Ganeti.Query.Language">FieldDoc</a> -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition" title="Ganeti.Query.Language">FieldDefinition</a></li><li class="src short"><a href="#v:fillIncompleteFields">fillIncompleteFields</a> :: (t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition" title="Ganeti.Query.Language">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode" title="Ganeti.Query.Types">QffMode</a>) -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Types.html#t:FieldData" title="Ganeti.Query.Types">FieldData</a> a b</li><li class="src short"><a href="#v:instantiateIndexedFields">instantiateIndexedFields</a> :: (Show t1, Integral t1) =&gt; Int -&gt; [(t1 -&gt; String -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition" title="Ganeti.Query.Language">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode" title="Ganeti.Query.Types">QffMode</a>)] -&gt; <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> a b</li><li class="src short"><a href="#v:getPrimaryNode">getPrimaryNode</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> <a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a></li><li class="src short"><a href="#v:getPrimaryNodeName">getPrimaryNodeName</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getPrimaryNodeGroup">getPrimaryNodeGroup</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> <a href="Ganeti-Objects.html#t:NodeGroup" title="Ganeti.Objects">NodeGroup</a></li><li class="src short"><a href="#v:getPrimaryNodeGroupName">getPrimaryNodeGroupName</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getPrimaryNodeGroupUuid">getPrimaryNodeGroupUuid</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getSecondaryNodes">getSecondaryNodes</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>]</li><li class="src short"><a href="#v:getSecondaryNodeAttribute">getSecondaryNodeAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:getSecondaryNodeGroups">getSecondaryNodeGroups</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [<a href="Ganeti-Objects.html#t:NodeGroup" title="Ganeti.Objects">NodeGroup</a>]</li><li class="src short"><a href="#v:getSecondaryNodeGroupAttribute">getSecondaryNodeGroupAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:NodeGroup" title="Ganeti.Objects">NodeGroup</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:beParamGetter">beParamGetter</a> :: String -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:hvParamGetter">hvParamGetter</a> :: String -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:instanceLiveFieldsDefs">instanceLiveFieldsDefs</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle" title="Ganeti.Query.Language">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType" title="Ganeti.Query.Language">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc" title="Ganeti.Query.Language">FieldDoc</a>)]</li><li class="src short"><a href="#v:instanceLiveFieldExtract">instanceLiveFieldExtract</a> :: <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; JSValue</li><li class="src short"><a href="#v:instanceLiveRpcCall">instanceLiveRpcCall</a> :: <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:instanceLiveFieldBuilder">instanceLiveFieldBuilder</a> :: (<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle" title="Ganeti.Query.Language">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType" title="Ganeti.Query.Language">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc" title="Ganeti.Query.Language">FieldDoc</a>) -&gt; <a href="Ganeti-Query-Types.html#t:FieldData" title="Ganeti.Query.Types">FieldData</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:statusDocText">statusDocText</a> :: String</li><li class="src short"><a href="#v:isPrimaryOffline">isPrimaryOffline</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; Bool</li><li class="src short"><a href="#v:userShutdownEnabled">userShutdownEnabled</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; Bool</li><li class="src short"><a href="#v:liveInstanceStatus">liveInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool) -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus" title="Ganeti.Types">InstanceStatus</a></li><li class="src short"><a href="#v:deadInstanceStatus">deadInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus" title="Ganeti.Types">InstanceStatus</a></li><li class="src short"><a href="#v:determineInstanceStatus">determineInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus" title="Ganeti.Types">InstanceStatus</a></li><li class="src short"><a href="#v:statusExtract">statusExtract</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:operStatusExtract">operStatusExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:consoleExtract">consoleExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li><li class="src short"><a href="#v:checkForNodeError">checkForNodeError</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> a)] -&gt; String -&gt; Maybe <a href="Ganeti-Rpc.html#t:RpcError" title="Ganeti.Rpc">RpcError</a></li><li class="src short"><a href="#v:findInfoInNodeResult">findInfoInNodeResult</a> :: <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a></li><li class="src short"><a href="#v:getInstanceInfo">getInstanceInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool))</li><li class="src short"><a href="#v:getConsoleInfo">getConsoleInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo" title="Ganeti.Rpc">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo" title="Ganeti.Rpc">InstanceConsoleInfo</a></li><li class="src short"><a href="#v:extractLiveInfo">extractLiveInfo</a> :: [(<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a>)] -&gt; [(<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo" title="Ganeti.Rpc">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getAllConsoleParams">getAllConsoleParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>] -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a>]</li><li class="src short"><a href="#v:compareParamsByNode">compareParamsByNode</a> :: <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a> -&gt; Bool</li><li class="src short"><a href="#v:consoleParamsToCalls">consoleParamsToCalls</a> :: [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a>] -&gt; [(<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>, <a href="Ganeti-Rpc.html#t:RpcCallInstanceConsoleInfo" title="Ganeti.Rpc">RpcCallInstanceConsoleInfo</a>)]</li><li class="src short"><a href="#v:getHypervisorSpecs">getHypervisorSpecs</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>] -&gt; [(<a href="Ganeti-Types.html#t:Hypervisor" title="Ganeti.Types">Hypervisor</a>, <a href="Ganeti-Types.html#t:HvParams" title="Ganeti.Types">HvParams</a>)]</li><li class="src short"><a href="#v:collectLiveData">collectLiveData</a> :: Bool -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; [String] -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>] -&gt; IO [(<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>, <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a>)]</li><li class="src short"><a href="#v:getDiskTemplate">getDiskTemplate</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LiveInfo" class="def">LiveInfo</a> = (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool), Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo" title="Ganeti.Rpc">InstanceConsoleInfo</a>) <a href="Ganeti/Query/Instance.html#LiveInfo" class="link">Source</a> <a href="#t:LiveInfo" class="selflink">#</a></p><div class="doc"><p>The LiveInfo consists of two entries whose presence is independent.
 The <code><a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a></code> is the live instance information, accompanied by a bool
 signifying if it was found on its designated primary node or not.
 The <code><a href="Ganeti-Rpc.html#t:InstanceConsoleInfo" title="Ganeti.Rpc">InstanceConsoleInfo</a></code> describes how to connect to an instance.
 Any combination of these may or may not be present, depending on node and
 instance availability.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Runtime" class="def">Runtime</a> = Either <a href="Ganeti-Rpc.html#t:RpcError" title="Ganeti.Rpc">RpcError</a> <a href="Ganeti-Query-Instance.html#t:LiveInfo" title="Ganeti.Query.Instance">LiveInfo</a> <a href="Ganeti/Query/Instance.html#Runtime" class="link">Source</a> <a href="#t:Runtime" class="selflink">#</a></p><div class="doc"><p>Runtime containing the <code><a href="Ganeti-Query-Instance.html#t:LiveInfo" title="Ganeti.Query.Instance">LiveInfo</a></code>. See the genericQuery function in
 the Query.hs file for an explanation of the terms used.</p></div></div><div class="top"><p class="src"><a id="v:fieldsMap" class="def">fieldsMap</a> :: <a href="Ganeti-Query-Types.html#t:FieldMap" title="Ganeti.Query.Types">FieldMap</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#fieldsMap" class="link">Source</a> <a href="#v:fieldsMap" class="selflink">#</a></p><div class="doc"><p>The instance fields map.</p></div></div><div class="top"><p class="src"><a id="v:instanceAliases" class="def">instanceAliases</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>)] <a href="Ganeti/Query/Instance.html#instanceAliases" class="link">Source</a> <a href="#v:instanceAliases" class="selflink">#</a></p><div class="doc"><p>The instance aliases.</p></div></div><div class="top"><p class="src"><a id="v:aliasedFields" class="def">aliasedFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#aliasedFields" class="link">Source</a> <a href="#v:aliasedFields" class="selflink">#</a></p><div class="doc"><p>The aliased instance fields.</p></div></div><div class="top"><p class="src"><a id="v:instanceFields" class="def">instanceFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#instanceFields" class="link">Source</a> <a href="#v:instanceFields" class="selflink">#</a></p><div class="doc"><p>The instance fields.</p></div></div><a href="#g:1" id="g:1"><h1>Helper functions for node property retrieval</h1></a><div class="top"><p class="src"><a id="v:nicDescSuffix" class="def">nicDescSuffix</a> :: String <a href="Ganeti/Query/Instance.html#nicDescSuffix" class="link">Source</a> <a href="#v:nicDescSuffix" class="selflink">#</a></p><div class="doc"><p>Constant suffix of network interface field descriptions.</p></div></div><div class="top"><p class="src"><a id="v:nicAggDescPrefix" class="def">nicAggDescPrefix</a> :: String <a href="Ganeti/Query/Instance.html#nicAggDescPrefix" class="link">Source</a> <a href="#v:nicAggDescPrefix" class="selflink">#</a></p><div class="doc"><p>Almost-constant suffix of aggregate network interface field descriptions.</p></div></div><div class="top"><p class="src"><a id="v:getNetworkName" class="def">getNetworkName</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; String -&gt; <a href="Ganeti-Types.html#t:NonEmptyString" title="Ganeti.Types">NonEmptyString</a> <a href="Ganeti/Query/Instance.html#getNetworkName" class="link">Source</a> <a href="#v:getNetworkName" class="selflink">#</a></p><div class="doc"><p>Given a network name id, returns the network's name.</p></div></div><div class="top"><p class="src"><a id="v:getNicBridge" class="def">getNicBridge</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; Maybe String <a href="Ganeti/Query/Instance.html#getNicBridge" class="link">Source</a> <a href="#v:getNicBridge" class="selflink">#</a></p><div class="doc"><p>Gets the bridge of a NIC.</p></div></div><div class="top"><p class="src"><a id="v:getNicVlan" class="def">getNicVlan</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; Maybe String <a href="Ganeti/Query/Instance.html#getNicVlan" class="link">Source</a> <a href="#v:getNicVlan" class="selflink">#</a></p><div class="doc"><p>Gets the VLAN of a NIC.</p></div></div><div class="top"><p class="src"><a id="v:fillNicParamsFromConfig" class="def">fillNicParamsFromConfig</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:PartialNicParams" title="Ganeti.Objects.Nic">PartialNicParams</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> <a href="Ganeti/Query/Instance.html#fillNicParamsFromConfig" class="link">Source</a> <a href="#v:fillNicParamsFromConfig" class="selflink">#</a></p><div class="doc"><p>Fill partial NIC params by using the defaults from the configuration.</p></div></div><div class="top"><p class="src"><a id="v:getDefaultNicParams" class="def">getDefaultNicParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> <a href="Ganeti/Query/Instance.html#getDefaultNicParams" class="link">Source</a> <a href="#v:getDefaultNicParams" class="selflink">#</a></p><div class="doc"><p>Retrieves the default network interface parameters.</p></div></div><div class="top"><p class="src"><a id="v:getDiskSizeRequirements" class="def">getDiskSizeRequirements</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getDiskSizeRequirements" class="link">Source</a> <a href="#v:getDiskSizeRequirements" class="selflink">#</a></p><div class="doc"><p>Retrieves the real disk size requirements for all the disks of the
 instance. This includes the metadata etc. and is different from the values
 visible to the instance.</p></div></div><div class="top"><p class="src"><a id="v:getDiskSizes" class="def">getDiskSizes</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getDiskSizes" class="link">Source</a> <a href="#v:getDiskSizes" class="selflink">#</a></p><div class="doc"><p>Get a list of disk sizes for an instance</p></div></div><div class="top"><p class="src"><a id="v:getDiskSpindles" class="def">getDiskSpindles</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getDiskSpindles" class="link">Source</a> <a href="#v:getDiskSpindles" class="selflink">#</a></p><div class="doc"><p>Get a list of disk spindles</p></div></div><div class="top"><p class="src"><a id="v:getDiskNames" class="def">getDiskNames</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getDiskNames" class="link">Source</a> <a href="#v:getDiskNames" class="selflink">#</a></p><div class="doc"><p>Get a list of disk names for an instance</p></div></div><div class="top"><p class="src"><a id="v:getDiskUuids" class="def">getDiskUuids</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getDiskUuids" class="link">Source</a> <a href="#v:getDiskUuids" class="selflink">#</a></p><div class="doc"><p>Get a list of disk UUIDs for an instance</p></div></div><div class="top"><p class="src"><a id="v:getIndexedOptionalConfField" class="def">getIndexedOptionalConfField</a> <a href="Ganeti/Query/Instance.html#getIndexedOptionalConfField" class="link">Source</a> <a href="#v:getIndexedOptionalConfField" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: JSON b</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [a])</td><td class="doc"><p>Extracts a list of objects</p></td></tr><tr><td class="src">-&gt; (a -&gt; Maybe b)</td><td class="doc"><p>Possibly gets a property
 from an object</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Index in list to use</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></td><td class="doc"><p>Result</p></td></tr></table></div><div class="doc"><p>Creates a functions which produces a FieldConfig <code><a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a></code> when fed
 an index. Works for fields that may not return a value, expressed through
 the Maybe monad.</p></div></div><div class="top"><p class="src"><a id="v:getIndexedConfField" class="def">getIndexedConfField</a> <a href="Ganeti/Query/Instance.html#getIndexedConfField" class="link">Source</a> <a href="#v:getIndexedConfField" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: JSON b</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [a])</td><td class="doc"><p>Extracts a list of objects</p></td></tr><tr><td class="src">-&gt; (a -&gt; b)</td><td class="doc"><p>Gets a property from an object</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Index in list to use</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></td><td class="doc"><p>Result</p></td></tr></table></div><div class="doc"><p>Creates a function which produces a FieldConfig <code><a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a></code> when fed
 an index. Works only for fields that surely return a value.</p></div></div><div class="top"><p class="src"><a id="v:getIndexedNicNetworkNameField" class="def">getIndexedNicNetworkNameField</a> :: Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#getIndexedNicNetworkNameField" class="link">Source</a> <a href="#v:getIndexedNicNetworkNameField" class="selflink">#</a></p><div class="doc"><p>Returns a field that retrieves a given NIC's network name.</p></div></div><div class="top"><p class="src"><a id="v:getIndexedNicField" class="def">getIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#getIndexedNicField" class="link">Source</a> <a href="#v:getIndexedNicField" class="selflink">#</a></p><div class="doc"><p>Gets a fillable NIC field.</p></div></div><div class="top"><p class="src"><a id="v:getOptionalIndexedNicField" class="def">getOptionalIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams" title="Ganeti.Objects.Nic">FilledNicParams</a> -&gt; Maybe a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#getOptionalIndexedNicField" class="link">Source</a> <a href="#v:getOptionalIndexedNicField" class="selflink">#</a></p><div class="doc"><p>Gets an optional fillable NIC field.</p></div></div><div class="top"><p class="src"><a id="v:getIndexedFieldWithDefault" class="def">getIndexedFieldWithDefault</a> <a href="Ganeti/Query/Instance.html#getIndexedFieldWithDefault" class="link">Source</a> <a href="#v:getIndexedFieldWithDefault" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: JSON c</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; [a])</td><td class="doc"><p>Extracts a list of incomplete objects</p></td></tr><tr><td class="src">-&gt; (<a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; b)</td><td class="doc"><p>Extracts the default object</p></td></tr><tr><td class="src">-&gt; (b -&gt; a -&gt; b)</td><td class="doc"><p>Fills the default object</p></td></tr><tr><td class="src">-&gt; (b -&gt; Maybe c)</td><td class="doc"><p>Extracts an obj property</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Index in list to use</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></td><td class="doc"><p>Result</p></td></tr></table></div><div class="doc"><p>Creates a function which produces a <code><a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a></code> when fed an index. Works
 for fields that should be filled out through the use of a default.</p></div></div><div class="top"><p class="src"><a id="v:getIndexedOptionalField" class="def">getIndexedOptionalField</a> <a href="Ganeti/Query/Instance.html#getIndexedOptionalField" class="link">Source</a> <a href="#v:getIndexedOptionalField" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: JSON b</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; [a])</td><td class="doc"><p>Extracts a list of objects</p></td></tr><tr><td class="src">-&gt; (a -&gt; Maybe b)</td><td class="doc"><p>Possibly gets a property
 from an object</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Index in list to use</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></td><td class="doc"><p>Result</p></td></tr></table></div><div class="doc"><p>Creates a function which produces a <code><a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a></code> when fed an index. Works
 for fields that may not return a value, expressed through the Maybe monad.</p></div></div><div class="top"><p class="src"><a id="v:getIndexedField" class="def">getIndexedField</a> <a href="Ganeti/Query/Instance.html#getIndexedField" class="link">Source</a> <a href="#v:getIndexedField" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: JSON b</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; [a])</td><td class="doc"><p>Extracts a list of objects</p></td></tr><tr><td class="src">-&gt; (a -&gt; b)</td><td class="doc"><p>Gets a property from an object</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Index in list to use</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></td><td class="doc"><p>Result</p></td></tr></table></div><div class="doc"><p>Creates a function which produces a <code><a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a></code> when fed an index.
 Works only for fields that surely return a value.</p></div></div><div class="top"><p class="src"><a id="v:maybeAt" class="def">maybeAt</a> :: Int -&gt; [a] -&gt; Maybe a <a href="Ganeti/Query/Instance.html#maybeAt" class="link">Source</a> <a href="#v:maybeAt" class="selflink">#</a></p><div class="doc"><p>Retrieves a value from an array at an index, using the Maybe monad to
 indicate failure.</p></div></div><div class="top"><p class="src"><a id="v:fieldDefinitionCompleter" class="def">fieldDefinitionCompleter</a> :: PrintfArg t1 =&gt; PrintfArg t2 =&gt; <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldTitle" title="Ganeti.Query.Language">FieldTitle</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldType" title="Ganeti.Query.Language">FieldType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldDoc" title="Ganeti.Query.Language">FieldDoc</a> -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition" title="Ganeti.Query.Language">FieldDefinition</a> <a href="Ganeti/Query/Instance.html#fieldDefinitionCompleter" class="link">Source</a> <a href="#v:fieldDefinitionCompleter" class="selflink">#</a></p><div class="doc"><p>Primed with format strings for everything but the type, it consumes two
 values and uses them to complete the FieldDefinition.
 Warning: a bit unsafe as it uses printf. Handle with care.</p></div></div><div class="top"><p class="src"><a id="v:fillIncompleteFields" class="def">fillIncompleteFields</a> :: (t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition" title="Ganeti.Query.Language">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode" title="Ganeti.Query.Types">QffMode</a>) -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Types.html#t:FieldData" title="Ganeti.Query.Types">FieldData</a> a b <a href="Ganeti/Query/Instance.html#fillIncompleteFields" class="link">Source</a> <a href="#v:fillIncompleteFields" class="selflink">#</a></p><div class="doc"><p>Given an incomplete field definition and values that can complete it,
 return a fully functional FieldData. Cannot work for all cases, should be
 extended as necessary.</p></div></div><div class="top"><p class="src"><a id="v:instantiateIndexedFields" class="def">instantiateIndexedFields</a> <a href="Ganeti/Query/Instance.html#instantiateIndexedFields" class="link">Source</a> <a href="#v:instantiateIndexedFields" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (Show t1, Integral t1)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; Int</td><td class="doc"><p>The size of the list</p></td></tr><tr><td class="src">-&gt; [(t1 -&gt; String -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition" title="Ganeti.Query.Language">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter" title="Ganeti.Query.Types">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode" title="Ganeti.Query.Types">QffMode</a>)]</td><td class="doc"><p>The indexed fields</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> a b</td><td class="doc"><p>A list of complete fields</p></td></tr></table></div><div class="doc"><p>Given indexed fields that describe lists, complete / instantiate them for
 a given list size.</p></div></div><a href="#g:2" id="g:2"><h1>Various helper functions for property retrieval</h1></a><div class="top"><p class="src"><a id="v:getPrimaryNode" class="def">getPrimaryNode</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> <a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a> <a href="Ganeti/Query/Instance.html#getPrimaryNode" class="link">Source</a> <a href="#v:getPrimaryNode" class="selflink">#</a></p><div class="doc"><p>Helper function for primary node retrieval</p></div></div><div class="top"><p class="src"><a id="v:getPrimaryNodeName" class="def">getPrimaryNodeName</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getPrimaryNodeName" class="link">Source</a> <a href="#v:getPrimaryNodeName" class="selflink">#</a></p><div class="doc"><p>Get primary node hostname</p></div></div><div class="top"><p class="src"><a id="v:getPrimaryNodeGroup" class="def">getPrimaryNodeGroup</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> <a href="Ganeti-Objects.html#t:NodeGroup" title="Ganeti.Objects">NodeGroup</a> <a href="Ganeti/Query/Instance.html#getPrimaryNodeGroup" class="link">Source</a> <a href="#v:getPrimaryNodeGroup" class="selflink">#</a></p><div class="doc"><p>Get primary node group</p></div></div><div class="top"><p class="src"><a id="v:getPrimaryNodeGroupName" class="def">getPrimaryNodeGroupName</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getPrimaryNodeGroupName" class="link">Source</a> <a href="#v:getPrimaryNodeGroupName" class="selflink">#</a></p><div class="doc"><p>Get primary node group name</p></div></div><div class="top"><p class="src"><a id="v:getPrimaryNodeGroupUuid" class="def">getPrimaryNodeGroupUuid</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getPrimaryNodeGroupUuid" class="link">Source</a> <a href="#v:getPrimaryNodeGroupUuid" class="selflink">#</a></p><div class="doc"><p>Get primary node group uuid</p></div></div><div class="top"><p class="src"><a id="v:getSecondaryNodes" class="def">getSecondaryNodes</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>] <a href="Ganeti/Query/Instance.html#getSecondaryNodes" class="link">Source</a> <a href="#v:getSecondaryNodes" class="selflink">#</a></p><div class="doc"><p>Get secondary nodes - the configuration objects themselves</p></div></div><div class="top"><p class="src"><a id="v:getSecondaryNodeAttribute" class="def">getSecondaryNodeAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getSecondaryNodeAttribute" class="link">Source</a> <a href="#v:getSecondaryNodeAttribute" class="selflink">#</a></p><div class="doc"><p>Get attributes of the secondary nodes</p></div></div><div class="top"><p class="src"><a id="v:getSecondaryNodeGroups" class="def">getSecondaryNodeGroups</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [<a href="Ganeti-Objects.html#t:NodeGroup" title="Ganeti.Objects">NodeGroup</a>] <a href="Ganeti/Query/Instance.html#getSecondaryNodeGroups" class="link">Source</a> <a href="#v:getSecondaryNodeGroups" class="selflink">#</a></p><div class="doc"><p>Get secondary node groups</p></div></div><div class="top"><p class="src"><a id="v:getSecondaryNodeGroupAttribute" class="def">getSecondaryNodeGroupAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:NodeGroup" title="Ganeti.Objects">NodeGroup</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getSecondaryNodeGroupAttribute" class="link">Source</a> <a href="#v:getSecondaryNodeGroupAttribute" class="selflink">#</a></p><div class="doc"><p>Get attributes of secondary node groups</p></div></div><div class="top"><p class="src"><a id="v:beParamGetter" class="def">beParamGetter</a> <a href="Ganeti/Query/Instance.html#beParamGetter" class="link">Source</a> <a href="#v:beParamGetter" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The field we are building the getter for</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc"><p>The configuration object</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a></td><td class="doc"><p>The instance configuration object</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></td><td class="doc"><p>The result</p></td></tr></table></div><div class="doc"><p>Beparam getter builder: given a field, it returns a FieldConfig
 getter, that is a function that takes the config and the object and
 returns the Beparam field specified when the getter was built.</p></div></div><div class="top"><p class="src"><a id="v:hvParamGetter" class="def">hvParamGetter</a> <a href="Ganeti/Query/Instance.html#hvParamGetter" class="link">Source</a> <a href="#v:hvParamGetter" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The field we're building the getter for</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Hvparam getter builder: given a field, it returns a FieldConfig
 getter, that is a function that takes the config and the object and
 returns the Hvparam field specified when the getter was built.</p></div></div><a href="#g:3" id="g:3"><h1>Live fields functionality</h1></a><div class="top"><p class="src"><a id="v:instanceLiveFieldsDefs" class="def">instanceLiveFieldsDefs</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle" title="Ganeti.Query.Language">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType" title="Ganeti.Query.Language">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc" title="Ganeti.Query.Language">FieldDoc</a>)] <a href="Ganeti/Query/Instance.html#instanceLiveFieldsDefs" class="link">Source</a> <a href="#v:instanceLiveFieldsDefs" class="selflink">#</a></p><div class="doc"><p>List of node live fields.</p></div></div><div class="top"><p class="src"><a id="v:instanceLiveFieldExtract" class="def">instanceLiveFieldExtract</a> :: <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; JSValue <a href="Ganeti/Query/Instance.html#instanceLiveFieldExtract" class="link">Source</a> <a href="#v:instanceLiveFieldExtract" class="selflink">#</a></p><div class="doc"><p>Map each name to a function that extracts that value from the RPC result.</p></div></div><div class="top"><p class="src"><a id="v:instanceLiveRpcCall" class="def">instanceLiveRpcCall</a> :: <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#instanceLiveRpcCall" class="link">Source</a> <a href="#v:instanceLiveRpcCall" class="selflink">#</a></p><div class="doc"><p>Helper for extracting an instance live field from the RPC results.</p></div></div><div class="top"><p class="src"><a id="v:instanceLiveFieldBuilder" class="def">instanceLiveFieldBuilder</a> :: (<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle" title="Ganeti.Query.Language">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType" title="Ganeti.Query.Language">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc" title="Ganeti.Query.Language">FieldDoc</a>) -&gt; <a href="Ganeti-Query-Types.html#t:FieldData" title="Ganeti.Query.Types">FieldData</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#instanceLiveFieldBuilder" class="link">Source</a> <a href="#v:instanceLiveFieldBuilder" class="selflink">#</a></p><div class="doc"><p>Builder for node live fields.</p></div></div><a href="#g:4" id="g:4"><h1>Functionality related to status and operational status extraction</h1></a><div class="top"><p class="src"><a id="v:statusDocText" class="def">statusDocText</a> :: String <a href="Ganeti/Query/Instance.html#statusDocText" class="link">Source</a> <a href="#v:statusDocText" class="selflink">#</a></p><div class="doc"><p>The documentation text for the instance status field</p></div></div><div class="top"><p class="src"><a id="v:isPrimaryOffline" class="def">isPrimaryOffline</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; Bool <a href="Ganeti/Query/Instance.html#isPrimaryOffline" class="link">Source</a> <a href="#v:isPrimaryOffline" class="selflink">#</a></p><div class="doc"><p>Checks if the primary node of an instance is offline</p></div></div><div class="top"><p class="src"><a id="v:userShutdownEnabled" class="def">userShutdownEnabled</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; Bool <a href="Ganeti/Query/Instance.html#userShutdownEnabled" class="link">Source</a> <a href="#v:userShutdownEnabled" class="selflink">#</a></p><div class="doc"><p>Determines if user shutdown reporting is enabled</p></div></div><div class="top"><p class="src"><a id="v:liveInstanceStatus" class="def">liveInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool) -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus" title="Ganeti.Types">InstanceStatus</a> <a href="Ganeti/Query/Instance.html#liveInstanceStatus" class="link">Source</a> <a href="#v:liveInstanceStatus" class="selflink">#</a></p><div class="doc"><p>Determines the status of a live instance</p></div></div><div class="top"><p class="src"><a id="v:deadInstanceStatus" class="def">deadInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus" title="Ganeti.Types">InstanceStatus</a> <a href="Ganeti/Query/Instance.html#deadInstanceStatus" class="link">Source</a> <a href="#v:deadInstanceStatus" class="selflink">#</a></p><div class="doc"><p>Determines the status of a dead instance.</p></div></div><div class="top"><p class="src"><a id="v:determineInstanceStatus" class="def">determineInstanceStatus</a> <a href="Ganeti/Query/Instance.html#determineInstanceStatus" class="link">Source</a> <a href="#v:determineInstanceStatus" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc"><p>The configuration data</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></td><td class="doc"><p>All the data from the live call</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a></td><td class="doc"><p>Static instance configuration</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Types.html#t:InstanceStatus" title="Ganeti.Types">InstanceStatus</a></td><td class="doc"><p>Result</p></td></tr></table></div><div class="doc"><p>Determines the status of the instance, depending on whether it is possible
 to communicate with its primary node, on which node it is, and its
 configuration.</p></div></div><div class="top"><p class="src"><a id="v:statusExtract" class="def">statusExtract</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#statusExtract" class="link">Source</a> <a href="#v:statusExtract" class="selflink">#</a></p><div class="doc"><p>Extracts the instance status, retrieving it using the functions above and
 transforming it into a <code><a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:operStatusExtract" class="def">operStatusExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#operStatusExtract" class="link">Source</a> <a href="#v:operStatusExtract" class="selflink">#</a></p><div class="doc"><p>Extracts the operational status of the instance.</p></div></div><div class="top"><p class="src"><a id="v:consoleExtract" class="def">consoleExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#consoleExtract" class="link">Source</a> <a href="#v:consoleExtract" class="selflink">#</a></p><div class="doc"><p>Extracts the console connection information</p></div></div><a href="#g:5" id="g:5"><h1>Helper functions extracting information as necessary for the generic query</h1></a><div class="top"><p class="src"><a id="v:checkForNodeError" class="def">checkForNodeError</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> a)] -&gt; String -&gt; Maybe <a href="Ganeti-Rpc.html#t:RpcError" title="Ganeti.Rpc">RpcError</a> <a href="Ganeti/Query/Instance.html#checkForNodeError" class="link">Source</a> <a href="#v:checkForNodeError" class="selflink">#</a></p><div class="doc"><p>This function checks if a node with a given uuid has experienced an error
 or not.</p></div></div><div class="top"><p class="src"><a id="v:findInfoInNodeResult" class="def">findInfoInNodeResult</a> :: <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a> <a href="Ganeti/Query/Instance.html#findInfoInNodeResult" class="link">Source</a> <a href="#v:findInfoInNodeResult" class="selflink">#</a></p><div class="doc"><p>Finds information about the instance in the info delivered by a node</p></div></div><div class="top"><p class="src"><a id="v:getInstanceInfo" class="def">getInstanceInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool)) <a href="Ganeti/Query/Instance.html#getInstanceInfo" class="link">Source</a> <a href="#v:getInstanceInfo" class="selflink">#</a></p><div class="doc"><p>Retrieves the instance information if it is present anywhere in the all
 instances RPC result. Notes if it originates from the primary node.
 An error is delivered if there is no result, and the primary node is down.</p></div></div><div class="top"><p class="src"><a id="v:getConsoleInfo" class="def">getConsoleInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo" title="Ganeti.Rpc">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo" title="Ganeti.Rpc">InstanceConsoleInfo</a> <a href="Ganeti/Query/Instance.html#getConsoleInfo" class="link">Source</a> <a href="#v:getConsoleInfo" class="selflink">#</a></p><div class="doc"><p>Retrieves the console information if present anywhere in the given results</p></div></div><div class="top"><p class="src"><a id="v:extractLiveInfo" class="def">extractLiveInfo</a> :: [(<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a>)] -&gt; [(<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo" title="Ganeti.Rpc">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#extractLiveInfo" class="link">Source</a> <a href="#v:extractLiveInfo" class="selflink">#</a></p><div class="doc"><p>Extracts all the live information that can be extracted.</p></div></div><div class="top"><p class="src"><a id="v:getAllConsoleParams" class="def">getAllConsoleParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>] -&gt; <a href="Ganeti-Errors.html#t:ErrorResult" title="Ganeti.Errors">ErrorResult</a> [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a>] <a href="Ganeti/Query/Instance.html#getAllConsoleParams" class="link">Source</a> <a href="#v:getAllConsoleParams" class="selflink">#</a></p><div class="doc"><p>Retrieves all the parameters for the console calls.</p></div></div><div class="top"><p class="src"><a id="v:compareParamsByNode" class="def">compareParamsByNode</a> :: <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a> -&gt; Bool <a href="Ganeti/Query/Instance.html#compareParamsByNode" class="link">Source</a> <a href="#v:compareParamsByNode" class="selflink">#</a></p><div class="doc"><p>Compares two params according to their node, needed for grouping.</p></div></div><div class="top"><p class="src"><a id="v:consoleParamsToCalls" class="def">consoleParamsToCalls</a> :: [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams" title="Ganeti.Rpc">InstanceConsoleInfoParams</a>] -&gt; [(<a href="Ganeti-Objects.html#t:Node" title="Ganeti.Objects">Node</a>, <a href="Ganeti-Rpc.html#t:RpcCallInstanceConsoleInfo" title="Ganeti.Rpc">RpcCallInstanceConsoleInfo</a>)] <a href="Ganeti/Query/Instance.html#consoleParamsToCalls" class="link">Source</a> <a href="#v:consoleParamsToCalls" class="selflink">#</a></p><div class="doc"><p>Groups instance information calls heading out to the same nodes.</p></div></div><div class="top"><p class="src"><a id="v:getHypervisorSpecs" class="def">getHypervisorSpecs</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>] -&gt; [(<a href="Ganeti-Types.html#t:Hypervisor" title="Ganeti.Types">Hypervisor</a>, <a href="Ganeti-Types.html#t:HvParams" title="Ganeti.Types">HvParams</a>)] <a href="Ganeti/Query/Instance.html#getHypervisorSpecs" class="link">Source</a> <a href="#v:getHypervisorSpecs" class="selflink">#</a></p><div class="doc"><p>Retrieves a list of all the hypervisors and params used by the given
 instances.</p></div></div><div class="top"><p class="src"><a id="v:collectLiveData" class="def">collectLiveData</a> <a href="Ganeti/Query/Instance.html#collectLiveData" class="link">Source</a> <a href="#v:collectLiveData" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Bool</td><td class="doc"><p>Live queries allowed</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc"><p>The cluster config</p></td></tr><tr><td class="src">-&gt; [String]</td><td class="doc"><p>The requested fields</p></td></tr><tr><td class="src">-&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>]</td><td class="doc"><p>The instance objects</p></td></tr><tr><td class="src">-&gt; IO [(<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>, <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a>)]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Collect live data from RPC query if enabled.</p></div></div><div class="top"><p class="src"><a id="v:getDiskTemplate" class="def">getDiskTemplate</a> :: <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry" title="Ganeti.Query.Language">ResultEntry</a> <a href="Ganeti/Query/Instance.html#getDiskTemplate" class="link">Source</a> <a href="#v:getDiskTemplate" class="selflink">#</a></p><div class="doc"><p>An aggregate disk attribute for backward compatibility.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>