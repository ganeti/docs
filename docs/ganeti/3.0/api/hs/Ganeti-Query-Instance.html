<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.Query.Instance</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/Query/Instance.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Ganeti.Query.Instance</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Helper functions for node property retrieval</a></li><li><a href="#g:2">Various helper functions for property retrieval</a></li><li><a href="#g:3">Live fields functionality</a></li><li><a href="#g:4">Functionality related to status and operational status extraction</a></li><li><a href="#g:5">Helper functions extracting information as necessary for the generic query</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of the Ganeti Query2 instance queries.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Runtime">Runtime</a> = Either <a href="Ganeti-Rpc.html#t:RpcError" title="Ganeti.Rpc">RpcError</a> LiveInfo</li><li class="src short"><a href="#v:fieldsMap">fieldsMap</a> :: <a href="Ganeti-Query-Types.html#t:FieldMap" title="Ganeti.Query.Types">FieldMap</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:instanceAliases">instanceAliases</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>)]</li><li class="src short"><a href="#v:instanceFields">instanceFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a></li><li class="src short"><a href="#v:getInstanceInfo">getInstanceInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool))</li><li class="src short"><a href="#v:collectLiveData">collectLiveData</a> :: Bool -&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a> -&gt; [String] -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>] -&gt; IO [(<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>, <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a>)]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Runtime" class="def">Runtime</a> = Either <a href="Ganeti-Rpc.html#t:RpcError" title="Ganeti.Rpc">RpcError</a> LiveInfo <a href="Ganeti/Query/Instance.html#Runtime" class="link">Source</a> <a href="#t:Runtime" class="selflink">#</a></p><div class="doc"><p>Runtime containing the <code>LiveInfo</code>. See the genericQuery function in
 the Query.hs file for an explanation of the terms used.</p></div></div><div class="top"><p class="src"><a id="v:fieldsMap" class="def">fieldsMap</a> :: <a href="Ganeti-Query-Types.html#t:FieldMap" title="Ganeti.Query.Types">FieldMap</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#fieldsMap" class="link">Source</a> <a href="#v:fieldsMap" class="selflink">#</a></p><div class="doc"><p>The instance fields map.</p></div></div><div class="top"><p class="src"><a id="v:instanceAliases" class="def">instanceAliases</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldName" title="Ganeti.Query.Language">FieldName</a>)] <a href="Ganeti/Query/Instance.html#instanceAliases" class="link">Source</a> <a href="#v:instanceAliases" class="selflink">#</a></p><div class="doc"><p>The instance aliases.</p></div></div><div class="top"><p class="src"><a id="v:instanceFields" class="def">instanceFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList" title="Ganeti.Query.Types">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a> <a href="Ganeti/Query/Instance.html#instanceFields" class="link">Source</a> <a href="#v:instanceFields" class="selflink">#</a></p><div class="doc"><p>The instance fields.</p></div></div><a href="#g:1" id="g:1"><h1>Helper functions for node property retrieval</h1></a><a href="#g:2" id="g:2"><h1>Various helper functions for property retrieval</h1></a><a href="#g:3" id="g:3"><h1>Live fields functionality</h1></a><a href="#g:4" id="g:4"><h1>Functionality related to status and operational status extraction</h1></a><a href="#g:5" id="g:5"><h1>Helper functions extracting information as necessary for the generic query</h1></a><div class="top"><p class="src"><a id="v:getInstanceInfo" class="def">getInstanceInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo" title="Ganeti.Rpc">RpcResultAllInstancesInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError" title="Ganeti.Rpc">ERpcError</a> (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo" title="Ganeti.Rpc">InstanceInfo</a>, Bool)) <a href="Ganeti/Query/Instance.html#getInstanceInfo" class="link">Source</a> <a href="#v:getInstanceInfo" class="selflink">#</a></p><div class="doc"><p>Retrieves the instance information if it is present anywhere in the all
 instances RPC result. Notes if it originates from the primary node.
 An error is delivered if there is no result, and the primary node is down.</p></div></div><div class="top"><p class="src"><a id="v:collectLiveData" class="def">collectLiveData</a> <a href="Ganeti/Query/Instance.html#collectLiveData" class="link">Source</a> <a href="#v:collectLiveData" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Bool</td><td class="doc"><p>Live queries allowed</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:ConfigData" title="Ganeti.Objects">ConfigData</a></td><td class="doc"><p>The cluster config</p></td></tr><tr><td class="src">-&gt; [String]</td><td class="doc"><p>The requested fields</p></td></tr><tr><td class="src">-&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>]</td><td class="doc"><p>The instance objects</p></td></tr><tr><td class="src">-&gt; IO [(<a href="Ganeti-Objects-Instance.html#t:Instance" title="Ganeti.Objects.Instance">Instance</a>, <a href="Ganeti-Query-Instance.html#t:Runtime" title="Ganeti.Query.Instance">Runtime</a>)]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Collect live data from RPC query if enabled.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.20.0</p></div></body></html>