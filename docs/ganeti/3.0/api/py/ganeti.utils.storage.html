<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>ganeti.utils.storage</title>
    <meta name="generator" content="pydoctor 22.9.1"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default mainnavbar">
      
  
  <div class="container-fluid">


    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          ganeti/server <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <div id="search-box-container">
          <div class="input-group">
            <input id="search-box" type="search" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" autocomplete="off" />
            
            <span class="input-group-btn">
              <a style="display: none;" class="btn btn-default" id="search-clear-button" title="Clear" onclick="clearSearch()"><img src="fonts/x-circle.svg" alt="Clear" /></a>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help" /></a>
            </span>
          </div>
        </div>

      </div>

      <div id="search-results-container" style="display: none;">
        
        <div id="search-buttons">
          <span class="label label-default" id="search-docstrings-button">
          <label class="checkbox-inline">
            <input type="checkbox" id="toggle-search-in-docstrings-checkbox" value="false" onclick="toggleSearchInDocstrings()">
              search in docstrings
            </input>
          </label>
          </span>
          
        </div>
        
        <noscript>
            <h1>Cannot search: JavaScript is not supported/enabled in your browser.</h1>
        </noscript>

        <div class="hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”: <code>+foo bar -baz</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”: <code>foo*</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all objects 
                  in "twisted.mail" that matches “search”: <code>+qname:twisted.mail.* +search</code>

                  <p>
                    Possible fields: 'name', 'qname' (fully qualified name), 'docstring', and 'kind'.
                    Last two fields are only applicable if "search in docstrings" is enabled.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”: <code>foo~1</code>
                </li>
            </ul>

          </p>
        </div>

        <div id="search-status"> </div>

        <div class="warning" id="search-warn-box" style="display: none;">
          <p class="rst-last"><span id="search-warn"></span></p>
        </div>

        <table id="search-results">
          <!-- Filled dynamically by JS -->
        </table>
        
        <div style="margin-top: 8px;">
          <p>Results provided by <a href="https://lunrjs.com">Lunr.js</a></p>
        </div>
      </div>

    </div>


  </div>
</nav>
    
    <div class="container-fluid">

      <!-- Side navigation -->
      <div class="sidebarcontainer" style="display: none;">
        
        <div class="sidebar"><nav class="sidebar">
  

  <div>

      <div class="thingTitle">
        <span>Module</span>
        <code class="thisobject"><a href="ganeti.utils.storage.html" class="internal-link" title="This module">storage</a></code> 
      </div>
      
      <div>
        

        
         

        
        

        <div class="childrenKindTitle">Functions</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="#CreateBdevPartitionMapping" class="internal-link" title="ganeti.utils.storage.CreateBdevPartitionMapping"><wbr></wbr>Create<wbr></wbr>Bdev<wbr></wbr>Partition<wbr></wbr>Mapping</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#DiskTemplateSupportsSpaceReporting" class="internal-link" title="ganeti.utils.storage.DiskTemplateSupportsSpaceReporting"><wbr></wbr>Disk<wbr></wbr>Template<wbr></wbr>Supports<wbr></wbr>Space<wbr></wbr>Reporting</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#GetDiskLabels" class="internal-link" title="ganeti.utils.storage.GetDiskLabels"><wbr></wbr>Get<wbr></wbr>Disk<wbr></wbr>Labels</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#GetDiskTemplatesOfStorageTypes" class="internal-link" title="ganeti.utils.storage.GetDiskTemplatesOfStorageTypes"><wbr></wbr>Get<wbr></wbr>Disk<wbr></wbr>Templates<wbr></wbr>Of<wbr></wbr>Storage<wbr></wbr>Types</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#GetStorageUnits" class="internal-link" title="ganeti.utils.storage.GetStorageUnits"><wbr></wbr>Get<wbr></wbr>Storage<wbr></wbr>Units</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#IsDiskTemplateEnabled" class="internal-link" title="ganeti.utils.storage.IsDiskTemplateEnabled"><wbr></wbr>Is<wbr></wbr>Disk<wbr></wbr>Template<wbr></wbr>Enabled</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#IsFileStorageEnabled" class="internal-link" title="ganeti.utils.storage.IsFileStorageEnabled"><wbr></wbr>Is<wbr></wbr>File<wbr></wbr>Storage<wbr></wbr>Enabled</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#IsLvmEnabled" class="internal-link" title="ganeti.utils.storage.IsLvmEnabled"><wbr></wbr>Is<wbr></wbr>Lvm<wbr></wbr>Enabled</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#IsSharedFileStorageEnabled" class="internal-link" title="ganeti.utils.storage.IsSharedFileStorageEnabled"><wbr></wbr>Is<wbr></wbr>Shared<wbr></wbr>File<wbr></wbr>Storage<wbr></wbr>Enabled</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#LookupSpaceInfoByDiskTemplate" class="internal-link" title="ganeti.utils.storage.LookupSpaceInfoByDiskTemplate"><wbr></wbr>Lookup<wbr></wbr>Space<wbr></wbr>Info<wbr></wbr>By<wbr></wbr>Disk<wbr></wbr>Template</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#LookupSpaceInfoByStorageType" class="internal-link" title="ganeti.utils.storage.LookupSpaceInfoByStorageType"><wbr></wbr>Lookup<wbr></wbr>Space<wbr></wbr>Info<wbr></wbr>By<wbr></wbr>Storage<wbr></wbr>Type</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#LvmGetsEnabled" class="internal-link" title="ganeti.utils.storage.LvmGetsEnabled"><wbr></wbr>Lvm<wbr></wbr>Gets<wbr></wbr>Enabled</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#osminor" class="internal-link" title="ganeti.utils.storage.osminor">osminor</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#ReleaseBdevPartitionMapping" class="internal-link" title="ganeti.utils.storage.ReleaseBdevPartitionMapping"><wbr></wbr>Release<wbr></wbr>Bdev<wbr></wbr>Partition<wbr></wbr>Mapping</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_GetDefaultStorageUnitForDiskTemplate" class="internal-link" title="ganeti.utils.storage._GetDefaultStorageUnitForDiskTemplate">_<wbr></wbr>Get<wbr></wbr>Default<wbr></wbr>Storage<wbr></wbr>Unit<wbr></wbr>For<wbr></wbr>Disk<wbr></wbr>Template</a></code>
            </div>
        

    </li>
</ul> 

        
         

        
         

        
         
        
      </div>
  </div><div>

      <div class="thingTitle">
        <span>Package</span>
        <code><a href="ganeti.utils.html" class="internal-link" title="The parent of this module">utils</a></code> 
      </div>
      
      <div>
        

        <div class="childrenKindTitle">Modules</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.algo.html" class="internal-link" title="ganeti.utils.algo">algo</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.bitarrays.html" class="internal-link" title="ganeti.utils.bitarrays">bitarrays</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.filelock.html" class="internal-link" title="ganeti.utils.filelock">filelock</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.hash.html" class="internal-link" title="ganeti.utils.hash">hash</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.io.html" class="internal-link" title="ganeti.utils.io">io</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.livelock.html" class="internal-link" title="ganeti.utils.livelock">livelock</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.log.html" class="internal-link" title="ganeti.utils.log">log</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.lvm.html" class="internal-link" title="ganeti.utils.lvm">lvm</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.mlock.html" class="internal-link" title="ganeti.utils.mlock">mlock</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.nodesetup.html" class="internal-link" title="ganeti.utils.nodesetup">nodesetup</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.process.html" class="internal-link" title="ganeti.utils.process">process</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.retry.html" class="internal-link" title="ganeti.utils.retry">retry</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.security.html" class="internal-link" title="ganeti.utils.security">security</a></code>
            </div>
        

    </li><li class=" thisobject">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.storage.html" class="internal-link" title="ganeti.utils.storage">storage</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.tags.html" class="internal-link" title="ganeti.utils.tags">tags</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.text.html" class="internal-link" title="ganeti.utils.text">text</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.version.html" class="internal-link" title="ganeti.utils.version">version</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.wrapper.html" class="internal-link" title="ganeti.utils.wrapper">wrapper</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.x509.html" class="internal-link" title="ganeti.utils.x509">x509</a></code>
            </div>
        

    </li>
</ul> 

        <div class="childrenKindTitle">Classes</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.FdConditionWaiterHelper.html" class="internal-link" title="ganeti.utils.FdConditionWaiterHelper"><wbr></wbr>Fd<wbr></wbr>Condition<wbr></wbr>Waiter<wbr></wbr>Helper</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.FieldSet.html" class="internal-link" title="ganeti.utils.FieldSet"><wbr></wbr>Field<wbr></wbr>Set</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.SignalHandler.html" class="internal-link" title="ganeti.utils.SignalHandler"><wbr></wbr>Signal<wbr></wbr>Handler</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.SignalWakeupFd.html" class="internal-link" title="ganeti.utils.SignalWakeupFd"><wbr></wbr>Signal<wbr></wbr>Wakeup<wbr></wbr>Fd</a></code>
            </div>
        

    </li>
</ul>

        <div class="childrenKindTitle">Functions</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#AllDiskOfType" class="internal-link" title="ganeti.utils.AllDiskOfType"><wbr></wbr>All<wbr></wbr>Disk<wbr></wbr>Of<wbr></wbr>Type</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#AnyDiskOfType" class="internal-link" title="ganeti.utils.AnyDiskOfType"><wbr></wbr>Any<wbr></wbr>Disk<wbr></wbr>Of<wbr></wbr>Type</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#BridgeExists" class="internal-link" title="ganeti.utils.BridgeExists"><wbr></wbr>Bridge<wbr></wbr>Exists</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#EnsureDaemon" class="internal-link" title="ganeti.utils.EnsureDaemon"><wbr></wbr>Ensure<wbr></wbr>Daemon</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#EpochNano" class="internal-link" title="ganeti.utils.EpochNano"><wbr></wbr>Epoch<wbr></wbr>Nano</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#FindMatch" class="internal-link" title="ganeti.utils.FindMatch"><wbr></wbr>Find<wbr></wbr>Match</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#FirstFree" class="internal-link" title="ganeti.utils.FirstFree"><wbr></wbr>First<wbr></wbr>Free</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#ForceDictType" class="internal-link" title="ganeti.utils.ForceDictType"><wbr></wbr>Force<wbr></wbr>Dict<wbr></wbr>Type</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#GetDiskTemplate" class="internal-link" title="ganeti.utils.GetDiskTemplate"><wbr></wbr>Get<wbr></wbr>Disk<wbr></wbr>Template</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#GetDiskTemplateString" class="internal-link" title="ganeti.utils.GetDiskTemplateString"><wbr></wbr>Get<wbr></wbr>Disk<wbr></wbr>Template<wbr></wbr>String</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#GetHomeDir" class="internal-link" title="ganeti.utils.GetHomeDir"><wbr></wbr>Get<wbr></wbr>Home<wbr></wbr>Dir</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#GetMounts" class="internal-link" title="ganeti.utils.GetMounts"><wbr></wbr>Get<wbr></wbr>Mounts</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#ListVolumeGroups" class="internal-link" title="ganeti.utils.ListVolumeGroups"><wbr></wbr>List<wbr></wbr>Volume<wbr></wbr>Groups</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#MergeTime" class="internal-link" title="ganeti.utils.MergeTime"><wbr></wbr>Merge<wbr></wbr>Time</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#ParseCpuMask" class="internal-link" title="ganeti.utils.ParseCpuMask"><wbr></wbr>Parse<wbr></wbr>Cpu<wbr></wbr>Mask</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#ParseMultiCpuMask" class="internal-link" title="ganeti.utils.ParseMultiCpuMask"><wbr></wbr>Parse<wbr></wbr>Multi<wbr></wbr>Cpu<wbr></wbr>Mask</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#SendFds" class="internal-link" title="ganeti.utils.SendFds"><wbr></wbr>Send<wbr></wbr>Fds</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#SignalHandled" class="internal-link" title="ganeti.utils.SignalHandled"><wbr></wbr>Signal<wbr></wbr>Handled</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#SingleWaitForFdCondition" class="internal-link" title="ganeti.utils.SingleWaitForFdCondition"><wbr></wbr>Single<wbr></wbr>Wait<wbr></wbr>For<wbr></wbr>Fd<wbr></wbr>Condition</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#SplitTime" class="internal-link" title="ganeti.utils.SplitTime"><wbr></wbr>Split<wbr></wbr>Time</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#StopDaemon" class="internal-link" title="ganeti.utils.StopDaemon"><wbr></wbr>Stop<wbr></wbr>Daemon</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#TimeoutExpired" class="internal-link" title="ganeti.utils.TimeoutExpired"><wbr></wbr>Timeout<wbr></wbr>Expired</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#TryConvert" class="internal-link" title="ganeti.utils.TryConvert"><wbr></wbr>Try<wbr></wbr>Convert</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#ValidateDeviceNames" class="internal-link" title="ganeti.utils.ValidateDeviceNames"><wbr></wbr>Validate<wbr></wbr>Device<wbr></wbr>Names</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#ValidateServiceName" class="internal-link" title="ganeti.utils.ValidateServiceName"><wbr></wbr>Validate<wbr></wbr>Service<wbr></wbr>Name</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#VerifyDictOptions" class="internal-link" title="ganeti.utils.VerifyDictOptions"><wbr></wbr>Verify<wbr></wbr>Dict<wbr></wbr>Options</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#WaitForFdCondition" class="internal-link" title="ganeti.utils.WaitForFdCondition"><wbr></wbr>Wait<wbr></wbr>For<wbr></wbr>Fd<wbr></wbr>Condition</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#_ComputeMissingKeys" class="internal-link" title="ganeti.utils._ComputeMissingKeys">_<wbr></wbr>Compute<wbr></wbr>Missing<wbr></wbr>Keys</a></code>
            </div>
        

    </li>
</ul> 

        
         

        <div class="childrenKindTitle">Variables</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#UUID_RE" class="internal-link" title="ganeti.utils.UUID_RE">UUID<wbr></wbr>_RE</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.utils.html#_VALID_SERVICE_NAME_RE" class="internal-link" title="ganeti.utils._VALID_SERVICE_NAME_RE">_VALID<wbr></wbr>_SERVICE<wbr></wbr>_NAME<wbr></wbr>_RE</a></code>
            </div>
        

    </li>
</ul> 

        
         
        
      </div>
  </div>

</nav>
        </div>
        <div id="collapseSideBar">
          <a class="btn btn-link" onclick="toggleSideBarCollapse()" title="Toggle Sidebar Collapse">
          </a>
        </div> 
        <script src="sidebartoggle.js" type="text/javascript"></script>
       
      </div>

      <div id="main" class="">
        

        

        <div class="page-header">
          <h1 class="module"><code><code><a href="ganeti.html" class="internal-link">ganeti</a></code><wbr></wbr>.<code><a href="ganeti.utils.html" class="internal-link" title="ganeti.utils">utils</a></code><wbr></wbr>.<code><a href="ganeti.utils.storage.html" class="internal-link" title="ganeti.utils.storage">storage</a></code></code></h1>
          <div id="showPrivate">
            <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
          </div>
        </div>

        <div class="categoryHeader">
          module documentation
        </div>

        <div class="extrasDocstring">
          
          <p></p>
        </div>

        <div class="moduleDocstring">
          <div><p>Utility functions for storage.</p>
</div>
        </div>

        <div id="splitTables">
          <table class="children sortable" id="id1376">
  
  
  <tr class="function">
    
    <td>Function</td>
    <td><code><a href="#CreateBdevPartitionMapping" class="internal-link" title="ganeti.utils.storage.CreateBdevPartitionMapping"><wbr></wbr>Create<wbr></wbr>Bdev<wbr></wbr>Partition<wbr></wbr>Mapping</a></code></td>
    <td>Create dm device for each partition of disk image.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#DiskTemplateSupportsSpaceReporting" class="internal-link" title="ganeti.utils.storage.DiskTemplateSupportsSpaceReporting"><wbr></wbr>Disk<wbr></wbr>Template<wbr></wbr>Supports<wbr></wbr>Space<wbr></wbr>Reporting</a></code></td>
    <td>Check whether the disk template supports storage space reporting.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#GetDiskLabels" class="internal-link" title="ganeti.utils.storage.GetDiskLabels"><wbr></wbr>Get<wbr></wbr>Disk<wbr></wbr>Labels</a></code></td>
    <td>Generate disk labels for a number of disks</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#GetDiskTemplatesOfStorageTypes" class="internal-link" title="ganeti.utils.storage.GetDiskTemplatesOfStorageTypes"><wbr></wbr>Get<wbr></wbr>Disk<wbr></wbr>Templates<wbr></wbr>Of<wbr></wbr>Storage<wbr></wbr>Types</a></code></td>
    <td>Given the storage type, returns a list of disk templates based on that storage type.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#GetStorageUnits" class="internal-link" title="ganeti.utils.storage.GetStorageUnits"><wbr></wbr>Get<wbr></wbr>Storage<wbr></wbr>Units</a></code></td>
    <td>Get the cluster's storage units for the given disk templates.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#IsDiskTemplateEnabled" class="internal-link" title="ganeti.utils.storage.IsDiskTemplateEnabled"><wbr></wbr>Is<wbr></wbr>Disk<wbr></wbr>Template<wbr></wbr>Enabled</a></code></td>
    <td>Checks if a particular disk template is enabled.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#IsFileStorageEnabled" class="internal-link" title="ganeti.utils.storage.IsFileStorageEnabled"><wbr></wbr>Is<wbr></wbr>File<wbr></wbr>Storage<wbr></wbr>Enabled</a></code></td>
    <td>Checks if file storage is enabled.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#IsLvmEnabled" class="internal-link" title="ganeti.utils.storage.IsLvmEnabled"><wbr></wbr>Is<wbr></wbr>Lvm<wbr></wbr>Enabled</a></code></td>
    <td>Check whether or not any lvm-based disk templates are enabled.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#IsSharedFileStorageEnabled" class="internal-link" title="ganeti.utils.storage.IsSharedFileStorageEnabled"><wbr></wbr>Is<wbr></wbr>Shared<wbr></wbr>File<wbr></wbr>Storage<wbr></wbr>Enabled</a></code></td>
    <td>Checks if shared file storage is enabled.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#LookupSpaceInfoByDiskTemplate" class="internal-link" title="ganeti.utils.storage.LookupSpaceInfoByDiskTemplate"><wbr></wbr>Lookup<wbr></wbr>Space<wbr></wbr>Info<wbr></wbr>By<wbr></wbr>Disk<wbr></wbr>Template</a></code></td>
    <td>Looks up the storage space info for a given disk template.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#LookupSpaceInfoByStorageType" class="internal-link" title="ganeti.utils.storage.LookupSpaceInfoByStorageType"><wbr></wbr>Lookup<wbr></wbr>Space<wbr></wbr>Info<wbr></wbr>By<wbr></wbr>Storage<wbr></wbr>Type</a></code></td>
    <td>Looks up the storage space info for a given storage type.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#LvmGetsEnabled" class="internal-link" title="ganeti.utils.storage.LvmGetsEnabled"><wbr></wbr>Lvm<wbr></wbr>Gets<wbr></wbr>Enabled</a></code></td>
    <td>Checks whether lvm was not enabled before, but will be enabled after the operation.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#osminor" class="internal-link" title="ganeti.utils.storage.osminor">osminor</a></code></td>
    <td>Return the device minor number from a raw device number.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#ReleaseBdevPartitionMapping" class="internal-link" title="ganeti.utils.storage.ReleaseBdevPartitionMapping"><wbr></wbr>Release<wbr></wbr>Bdev<wbr></wbr>Partition<wbr></wbr>Mapping</a></code></td>
    <td>Release allocated dm devices and loopback devices.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_GetDefaultStorageUnitForDiskTemplate" class="internal-link" title="ganeti.utils.storage._GetDefaultStorageUnitForDiskTemplate">_<wbr></wbr>Get<wbr></wbr>Default<wbr></wbr>Storage<wbr></wbr>Unit<wbr></wbr>For<wbr></wbr>Disk<wbr></wbr>Template</a></code></td>
    <td>Retrieves the identifier of the default storage entity for the given storage type.</td>
  </tr>
</table>
          

            
        </div>

        <div id="childList">
          <div class="basefunction">
  
  
  <a name="ganeti.utils.storage.CreateBdevPartitionMapping">
    
  </a>
  <a name="CreateBdevPartitionMapping">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">CreateBdevPartitionMapping</span>(image_path):
    
    <a class="headerLink" href="#CreateBdevPartitionMapping" title="ganeti.utils.storage.CreateBdevPartitionMapping">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Create dm device for each partition of disk image.</p>
<p>This operation will allocate a loopback and a device-mapper device to map partitions. You must call <code><a href="#ReleaseBdevPartitionMapping" class="internal-link" title="ganeti.utils.storage.ReleaseBdevPartitionMapping">ReleaseBdevPartitionMapping</a></code> to clean up resources allocated by this function call.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">image<wbr></wbr>_path:</span>string</td><td class="fieldArgDesc">path of multi-partition disk image</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer">tuple(string, list(string)) or NoneType</td><td class="fieldArgDesc">returns the tuple(loopback_device, list(device_mapper_files)) if image_path is a multi-partition disk image. otherwise, returns None.</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.DiskTemplateSupportsSpaceReporting">
    
  </a>
  <a name="DiskTemplateSupportsSpaceReporting">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">DiskTemplateSupportsSpaceReporting</span>(disk_template):
    
    <a class="headerLink" href="#DiskTemplateSupportsSpaceReporting" title="ganeti.utils.storage.DiskTemplateSupportsSpaceReporting">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Check whether the disk template supports storage space reporting.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.GetDiskLabels">
    
  </a>
  <a name="GetDiskLabels">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">GetDiskLabels</span>(prefix, num_disks, start=0):
    
    <a class="headerLink" href="#GetDiskLabels" title="ganeti.utils.storage.GetDiskLabels">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Generate disk labels for a number of disks</p>
<p>Note that disk labels are generated in the range [start..num_disks[ (e.g., as in range(start, num_disks))</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">prefix:</span>string</td><td class="fieldArgDesc">disk label prefix (e.g., "/dev/sd")</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">num<wbr></wbr>_disks:</span>int</td><td class="fieldArgDesc">number of disks (i.e., disk labels)</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">start:</span>int</td><td class="fieldArgDesc">optional start index</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer">generator</td><td class="fieldArgDesc">generator for the disk labels</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.GetDiskTemplatesOfStorageTypes">
    
  </a>
  <a name="GetDiskTemplatesOfStorageTypes">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">GetDiskTemplatesOfStorageTypes</span>(*storage_types):
    
    <a class="headerLink" href="#GetDiskTemplatesOfStorageTypes" title="ganeti.utils.storage.GetDiskTemplatesOfStorageTypes">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Given the storage type, returns a list of disk templates based on that storage type.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.GetStorageUnits">
    
  </a>
  <a name="GetStorageUnits">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">GetStorageUnits</span>(cfg, disk_templates):
    
    <a class="headerLink" href="#GetStorageUnits" title="ganeti.utils.storage.GetStorageUnits">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Get the cluster's storage units for the given disk templates.</p>
<p>If any lvm-based disk template is requested, spindle information is added to the request.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">cfg:</span><code><a href="ganeti.config.ConfigWriter.html" class="internal-link" title="ganeti.config.ConfigWriter">config.ConfigWriter</a></code></td><td class="fieldArgDesc">Cluster configuration</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">disk<wbr></wbr>_templates:</span>list of string</td><td class="fieldArgDesc">list of disk templates for which the storage units will be computed</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer">list of tuples (string, string)</td><td class="fieldArgDesc">list of storage units, each storage unit being a tuple of (storage_type, storage_key); storage_type is in <tt class="rst-docutils literal">constants.STORAGE_TYPES</tt> and the storage_key a string to identify an entity of that storage type, for example a volume group name for LVM storage or a file for file storage.</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.IsDiskTemplateEnabled">
    
  </a>
  <a name="IsDiskTemplateEnabled">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">IsDiskTemplateEnabled</span>(disk_template, enabled_disk_templates):
    
    <a class="headerLink" href="#IsDiskTemplateEnabled" title="ganeti.utils.storage.IsDiskTemplateEnabled">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Checks if a particular disk template is enabled.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.IsFileStorageEnabled">
    
  </a>
  <a name="IsFileStorageEnabled">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">IsFileStorageEnabled</span>(enabled_disk_templates):
    
    <a class="headerLink" href="#IsFileStorageEnabled" title="ganeti.utils.storage.IsFileStorageEnabled">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Checks if file storage is enabled.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.IsLvmEnabled">
    
  </a>
  <a name="IsLvmEnabled">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">IsLvmEnabled</span>(enabled_disk_templates):
    
    <a class="headerLink" href="#IsLvmEnabled" title="ganeti.utils.storage.IsLvmEnabled">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Check whether or not any lvm-based disk templates are enabled.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.IsSharedFileStorageEnabled">
    
  </a>
  <a name="IsSharedFileStorageEnabled">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">IsSharedFileStorageEnabled</span>(enabled_disk_templates):
    
    <a class="headerLink" href="#IsSharedFileStorageEnabled" title="ganeti.utils.storage.IsSharedFileStorageEnabled">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Checks if shared file storage is enabled.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.LookupSpaceInfoByDiskTemplate">
    
  </a>
  <a name="LookupSpaceInfoByDiskTemplate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">LookupSpaceInfoByDiskTemplate</span>(storage_space_info, disk_template):
    
    <a class="headerLink" href="#LookupSpaceInfoByDiskTemplate" title="ganeti.utils.storage.LookupSpaceInfoByDiskTemplate">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Looks up the storage space info for a given disk template.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">storage<wbr></wbr>_space<wbr></wbr>_info:</span>list of dicts</td><td class="fieldArgDesc">result of <tt class="rst-docutils literal">GetNodeInfo</tt></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">disk<wbr></wbr>_template:</span>string</td><td class="fieldArgDesc">disk template to get storage space info</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer">tuple</td><td class="fieldArgDesc">returns the element of storage_space_info that matches the given disk template</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.LookupSpaceInfoByStorageType">
    
  </a>
  <a name="LookupSpaceInfoByStorageType">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">LookupSpaceInfoByStorageType</span>(storage_space_info, storage_type):
    
    <a class="headerLink" href="#LookupSpaceInfoByStorageType" title="ganeti.utils.storage.LookupSpaceInfoByStorageType">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Looks up the storage space info for a given storage type.</p>
<p>Note that this lookup can be ambiguous if storage space reporting for several units of the same storage type was requested. This function is only supposed to be used for legacy code in situations where it actually is unambiguous.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">storage<wbr></wbr>_space<wbr></wbr>_info:</span>list of dicts</td><td class="fieldArgDesc">result of <tt class="rst-docutils literal">GetNodeInfo</tt></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">storage<wbr></wbr>_type:</span>string</td><td class="fieldArgDesc">a storage type, which is included in the storage_units list</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer">tuple</td><td class="fieldArgDesc">returns the element of storage_space_info that matches the given storage type</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.LvmGetsEnabled">
    
  </a>
  <a name="LvmGetsEnabled">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">LvmGetsEnabled</span>(enabled_disk_templates, new_enabled_disk_templates):
    
    <a class="headerLink" href="#LvmGetsEnabled" title="ganeti.utils.storage.LvmGetsEnabled">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Checks whether lvm was not enabled before, but will be enabled after the operation.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.osminor">
    
  </a>
  <a name="osminor">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">osminor</span>(dev):
    
    <a class="headerLink" href="#osminor" title="ganeti.utils.storage.osminor">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return the device minor number from a raw device number.</p>
<p>This is a replacement for os.minor working around the issue that Python's os.minor still has the old definition. See Ganeti issue 1058 for more details.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="ganeti.utils.storage.ReleaseBdevPartitionMapping">
    
  </a>
  <a name="ReleaseBdevPartitionMapping">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">ReleaseBdevPartitionMapping</span>(loop_dev_path):
    
    <a class="headerLink" href="#ReleaseBdevPartitionMapping" title="ganeti.utils.storage.ReleaseBdevPartitionMapping">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Release allocated dm devices and loopback devices.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">loop<wbr></wbr>_dev<wbr></wbr>_path:</span>string</td><td class="fieldArgDesc">path of loopback device returned by <code><a href="#CreateBdevPartitionMapping" class="internal-link" title="ganeti.utils.storage.CreateBdevPartitionMapping">CreateBdevPartitionMapping</a></code></td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="ganeti.utils.storage._GetDefaultStorageUnitForDiskTemplate">
    
  </a>
  <a name="_GetDefaultStorageUnitForDiskTemplate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_GetDefaultStorageUnitForDiskTemplate</span>(cfg, disk_template):
    
    <a class="headerLink" href="#_GetDefaultStorageUnitForDiskTemplate" title="ganeti.utils.storage._GetDefaultStorageUnitForDiskTemplate">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Retrieves the identifier of the default storage entity for the given storage type.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">cfg:</span><tt class="rst-docutils literal">objects.ConfigData</tt></td><td class="fieldArgDesc">the configuration data</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">disk<wbr></wbr>_template:</span>string</td><td class="fieldArgDesc">a disk template, for example 'drbd'</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer">string</td><td class="fieldArgDesc">identifier for a storage unit, for example the vg_name for lvm storage</td></tr></table></div>
  </div>
</div>
        </div>
      
      </div>
    </div>

    <footer class="navbar navbar-default">

  
  <div class="container">
    <a href="index.html">API Documentation</a> for ganeti/server,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.9.1 at 2024-05-06 13:21:37.
  </div>

  <!-- Search related scripts needs to be loaded at the end of HTML 
    parsing not to introduce overhead and display HTML data asap -->
  <script src="ajax.js" type="text/javascript"></script>
  <script src="searchlib.js" type="text/javascript"></script>
  <script src="search.js" type="text/javascript"></script>

</footer>
  
    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>