<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>ganeti.workerpool.WorkerPool</title>
    <meta name="generator" content="pydoctor 22.9.1"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default mainnavbar">
      
  
  <div class="container-fluid">


    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          ganeti/server <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <div id="search-box-container">
          <div class="input-group">
            <input id="search-box" type="search" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" autocomplete="off" />
            
            <span class="input-group-btn">
              <a style="display: none;" class="btn btn-default" id="search-clear-button" title="Clear" onclick="clearSearch()"><img src="fonts/x-circle.svg" alt="Clear" /></a>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help" /></a>
            </span>
          </div>
        </div>

      </div>

      <div id="search-results-container" style="display: none;">
        
        <div id="search-buttons">
          <span class="label label-default" id="search-docstrings-button">
          <label class="checkbox-inline">
            <input type="checkbox" id="toggle-search-in-docstrings-checkbox" value="false" onclick="toggleSearchInDocstrings()">
              search in docstrings
            </input>
          </label>
          </span>
          
        </div>
        
        <noscript>
            <h1>Cannot search: JavaScript is not supported/enabled in your browser.</h1>
        </noscript>

        <div class="hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”: <code>+foo bar -baz</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”: <code>foo*</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all objects 
                  in "twisted.mail" that matches “search”: <code>+qname:twisted.mail.* +search</code>

                  <p>
                    Possible fields: 'name', 'qname' (fully qualified name), 'docstring', and 'kind'.
                    Last two fields are only applicable if "search in docstrings" is enabled.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”: <code>foo~1</code>
                </li>
            </ul>

          </p>
        </div>

        <div id="search-status"> </div>

        <div class="warning" id="search-warn-box" style="display: none;">
          <p class="rst-last"><span id="search-warn"></span></p>
        </div>

        <table id="search-results">
          <!-- Filled dynamically by JS -->
        </table>
        
        <div style="margin-top: 8px;">
          <p>Results provided by <a href="https://lunrjs.com">Lunr.js</a></p>
        </div>
      </div>

    </div>


  </div>
</nav>
    
    <div class="container-fluid">

      <!-- Side navigation -->
      <div class="sidebarcontainer" style="display: none;">
        
        <div class="sidebar"><nav class="sidebar">
  

  <div>

      <div class="thingTitle">
        <span>Class</span>
        <code class="thisobject"><a href="ganeti.workerpool.WorkerPool.html" class="internal-link" title="This class"><wbr></wbr>Worker<wbr></wbr>Pool</a></code> 
      </div>
      
      <div>
        

        
         

        
        

        <div class="childrenKindTitle">Methods</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="#__init__" class="internal-link" title="ganeti.workerpool.WorkerPool.__init__">__init__</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#AddManyTasks" class="internal-link" title="ganeti.workerpool.WorkerPool.AddManyTasks"><wbr></wbr>Add<wbr></wbr>Many<wbr></wbr>Tasks</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#AddTask" class="internal-link" title="ganeti.workerpool.WorkerPool.AddTask"><wbr></wbr>Add<wbr></wbr>Task</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#ChangeTaskPriority" class="internal-link" title="ganeti.workerpool.WorkerPool.ChangeTaskPriority"><wbr></wbr>Change<wbr></wbr>Task<wbr></wbr>Priority</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#HasRunningTasks" class="internal-link" title="ganeti.workerpool.WorkerPool.HasRunningTasks"><wbr></wbr>Has<wbr></wbr>Running<wbr></wbr>Tasks</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#Quiesce" class="internal-link" title="ganeti.workerpool.WorkerPool.Quiesce"><wbr></wbr>Quiesce</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#Resize" class="internal-link" title="ganeti.workerpool.WorkerPool.Resize"><wbr></wbr>Resize</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#TerminateWorkers" class="internal-link" title="ganeti.workerpool.WorkerPool.TerminateWorkers"><wbr></wbr>Terminate<wbr></wbr>Workers</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_AddTaskUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._AddTaskUnlocked">_<wbr></wbr>Add<wbr></wbr>Task<wbr></wbr>Unlocked</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_HasRunningTasksUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._HasRunningTasksUnlocked">_<wbr></wbr>Has<wbr></wbr>Running<wbr></wbr>Tasks<wbr></wbr>Unlocked</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_NewWorkerIdUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._NewWorkerIdUnlocked">_<wbr></wbr>New<wbr></wbr>Worker<wbr></wbr>Id<wbr></wbr>Unlocked</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_ResizeUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._ResizeUnlocked">_<wbr></wbr>Resize<wbr></wbr>Unlocked</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_ShouldWorkerTerminateUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._ShouldWorkerTerminateUnlocked">_<wbr></wbr>Should<wbr></wbr>Worker<wbr></wbr>Terminate<wbr></wbr>Unlocked</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_WaitForTaskUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._WaitForTaskUnlocked">_<wbr></wbr>Wait<wbr></wbr>For<wbr></wbr>Task<wbr></wbr>Unlocked</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_WaitWhileQuiescingUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._WaitWhileQuiescingUnlocked">_<wbr></wbr>Wait<wbr></wbr>While<wbr></wbr>Quiescing<wbr></wbr>Unlocked</a></code>
            </div>
        

    </li>
</ul> 

        
         

        <div class="childrenKindTitle">Attributes</div>
        <ul>
    
    <li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_counter" class="internal-link" title="ganeti.workerpool.WorkerPool._counter">_counter</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_last_worker_id" class="internal-link" title="ganeti.workerpool.WorkerPool._last_worker_id">_last<wbr></wbr>_worker<wbr></wbr>_id</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_lock" class="internal-link" title="ganeti.workerpool.WorkerPool._lock">_lock</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_name" class="internal-link" title="ganeti.workerpool.WorkerPool._name">_name</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_pool_to_pool" class="internal-link" title="ganeti.workerpool.WorkerPool._pool_to_pool">_pool<wbr></wbr>_to<wbr></wbr>_pool</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_pool_to_worker" class="internal-link" title="ganeti.workerpool.WorkerPool._pool_to_worker">_pool<wbr></wbr>_to<wbr></wbr>_worker</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_quiescing" class="internal-link" title="ganeti.workerpool.WorkerPool._quiescing">_quiescing</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_taskdata" class="internal-link" title="ganeti.workerpool.WorkerPool._taskdata">_taskdata</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_tasks" class="internal-link" title="ganeti.workerpool.WorkerPool._tasks">_tasks</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_termworkers" class="internal-link" title="ganeti.workerpool.WorkerPool._termworkers">_termworkers</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_worker_class" class="internal-link" title="ganeti.workerpool.WorkerPool._worker_class">_worker<wbr></wbr>_class</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_worker_to_pool" class="internal-link" title="ganeti.workerpool.WorkerPool._worker_to_pool">_worker<wbr></wbr>_to<wbr></wbr>_pool</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_workers" class="internal-link" title="ganeti.workerpool.WorkerPool._workers">_workers</a></code>
            </div>
        

    </li>
</ul> 

        
         
        
      </div>
  </div><div>

      <div class="thingTitle">
        <span>Module</span>
        <code><a href="ganeti.workerpool.html" class="internal-link" title="The parent of this class">workerpool</a></code> 
      </div>
      
      <div>
        

        
         

        <div class="childrenKindTitle">Classes</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.workerpool.BaseWorker.html" class="internal-link" title="ganeti.workerpool.BaseWorker"><wbr></wbr>Base<wbr></wbr>Worker</a></code>
            </div>
        

    </li><li class=" thisobject">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.workerpool.WorkerPool.html" class="internal-link" title="ganeti.workerpool.WorkerPool"><wbr></wbr>Worker<wbr></wbr>Pool</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.workerpool.DeferTask.html" class="internal-link" title="ganeti.workerpool.DeferTask"><wbr></wbr>Defer<wbr></wbr>Task</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.workerpool.NoSuchTask.html" class="internal-link" title="ganeti.workerpool.NoSuchTask"><wbr></wbr>No<wbr></wbr>Such<wbr></wbr>Task</a></code>
            </div>
        

    </li>
</ul>

        
         

        
         

        <div class="childrenKindTitle">Variables</div>
        <ul>
    
    <li class="private">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.workerpool.html#_DEFAULT_PRIORITY" class="internal-link" title="ganeti.workerpool._DEFAULT_PRIORITY">_DEFAULT<wbr></wbr>_PRIORITY</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="ganeti.workerpool.html#_TERMINATE" class="internal-link" title="ganeti.workerpool._TERMINATE">_TERMINATE</a></code>
            </div>
        

    </li>
</ul> 

        
         
        
      </div>
  </div>

</nav>
        </div>
        <div id="collapseSideBar">
          <a class="btn btn-link" onclick="toggleSideBarCollapse()" title="Toggle Sidebar Collapse">
          </a>
        </div> 
        <script src="sidebartoggle.js" type="text/javascript"></script>
       
      </div>

      <div id="main" class="">
        

        

        <div class="page-header">
          <h1 class="class"><code><code><a href="ganeti.html" class="internal-link">ganeti</a></code><wbr></wbr>.<code><a href="ganeti.workerpool.html" class="internal-link" title="ganeti.workerpool">workerpool</a></code><wbr></wbr>.<code><a href="ganeti.workerpool.WorkerPool.html" class="internal-link" title="ganeti.workerpool.WorkerPool">WorkerPool</a></code></code></h1>
          <div id="showPrivate">
            <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
          </div>
        </div>

        <div class="categoryHeader">
          class documentation
        </div>

        <div class="extrasDocstring">
          <p><code><span class="py-keyword">class</span> <span class="py-defname">WorkerPool</span>(object):</code></p>
          <p><a href="classIndex.html#ganeti.workerpool.WorkerPool">View In Hierarchy</a></p>
        </div>

        <div class="moduleDocstring">
          <div><p>Worker pool with a queue.</p>
<p>This class is thread-safe.</p>
<p>Tasks are guaranteed to be started in the order in which they're added to the pool. Due to the nature of threading, they're not guaranteed to finish in the same order.</p>
</div>
        </div>

        <div id="splitTables">
          <table class="children sortable" id="id1405">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__" class="internal-link" title="ganeti.workerpool.WorkerPool.__init__">__init__</a></code></td>
    <td>Constructor for worker pool.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#AddManyTasks" class="internal-link" title="ganeti.workerpool.WorkerPool.AddManyTasks"><wbr></wbr>Add<wbr></wbr>Many<wbr></wbr>Tasks</a></code></td>
    <td>Add a list of tasks to the queue.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#AddTask" class="internal-link" title="ganeti.workerpool.WorkerPool.AddTask"><wbr></wbr>Add<wbr></wbr>Task</a></code></td>
    <td>Adds a task to the queue.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#ChangeTaskPriority" class="internal-link" title="ganeti.workerpool.WorkerPool.ChangeTaskPriority"><wbr></wbr>Change<wbr></wbr>Task<wbr></wbr>Priority</a></code></td>
    <td>Changes a task's priority.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#HasRunningTasks" class="internal-link" title="ganeti.workerpool.WorkerPool.HasRunningTasks"><wbr></wbr>Has<wbr></wbr>Running<wbr></wbr>Tasks</a></code></td>
    <td>Checks whether there's at least one task running.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#Quiesce" class="internal-link" title="ganeti.workerpool.WorkerPool.Quiesce"><wbr></wbr>Quiesce</a></code></td>
    <td>Waits until the task queue is empty.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#Resize" class="internal-link" title="ganeti.workerpool.WorkerPool.Resize"><wbr></wbr>Resize</a></code></td>
    <td>Changes the number of workers in the pool.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#TerminateWorkers" class="internal-link" title="ganeti.workerpool.WorkerPool.TerminateWorkers"><wbr></wbr>Terminate<wbr></wbr>Workers</a></code></td>
    <td>Terminate all worker threads.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_AddTaskUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._AddTaskUnlocked">_<wbr></wbr>Add<wbr></wbr>Task<wbr></wbr>Unlocked</a></code></td>
    <td>Adds a task to the internal queue.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_HasRunningTasksUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._HasRunningTasksUnlocked">_<wbr></wbr>Has<wbr></wbr>Running<wbr></wbr>Tasks<wbr></wbr>Unlocked</a></code></td>
    <td>Checks whether there's a task running in a worker.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_NewWorkerIdUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._NewWorkerIdUnlocked">_<wbr></wbr>New<wbr></wbr>Worker<wbr></wbr>Id<wbr></wbr>Unlocked</a></code></td>
    <td>Return an identifier for a new worker.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_ResizeUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._ResizeUnlocked">_<wbr></wbr>Resize<wbr></wbr>Unlocked</a></code></td>
    <td>Changes the number of workers.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_ShouldWorkerTerminateUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._ShouldWorkerTerminateUnlocked">_<wbr></wbr>Should<wbr></wbr>Worker<wbr></wbr>Terminate<wbr></wbr>Unlocked</a></code></td>
    <td>Returns whether a worker should terminate.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_WaitForTaskUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._WaitForTaskUnlocked">_<wbr></wbr>Wait<wbr></wbr>For<wbr></wbr>Task<wbr></wbr>Unlocked</a></code></td>
    <td>Waits for a task for a worker.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_WaitWhileQuiescingUnlocked" class="internal-link" title="ganeti.workerpool.WorkerPool._WaitWhileQuiescingUnlocked">_<wbr></wbr>Wait<wbr></wbr>While<wbr></wbr>Quiescing<wbr></wbr>Unlocked</a></code></td>
    <td>Wait until the worker pool has finished quiescing.</td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_counter" class="internal-link" title="ganeti.workerpool.WorkerPool._counter">_counter</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_last_worker_id" class="internal-link" title="ganeti.workerpool.WorkerPool._last_worker_id">_last<wbr></wbr>_worker<wbr></wbr>_id</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_lock" class="internal-link" title="ganeti.workerpool.WorkerPool._lock">_lock</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_name" class="internal-link" title="ganeti.workerpool.WorkerPool._name">_name</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_pool_to_pool" class="internal-link" title="ganeti.workerpool.WorkerPool._pool_to_pool">_pool<wbr></wbr>_to<wbr></wbr>_pool</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_pool_to_worker" class="internal-link" title="ganeti.workerpool.WorkerPool._pool_to_worker">_pool<wbr></wbr>_to<wbr></wbr>_worker</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_quiescing" class="internal-link" title="ganeti.workerpool.WorkerPool._quiescing">_quiescing</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_taskdata" class="internal-link" title="ganeti.workerpool.WorkerPool._taskdata">_taskdata</a></code></td>
    <td>Mapping from task IDs to entries in <code><a href="ganeti.workerpool.WorkerPool.html#_tasks" class="internal-link" title="ganeti.workerpool.WorkerPool._tasks">_tasks</a></code></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_tasks" class="internal-link" title="ganeti.workerpool.WorkerPool._tasks">_tasks</a></code></td>
    <td>Each tuple has the format (priority, order ID, task ID, arguments). Priority and order ID are numeric and essentially control the sort order. The order ID is an increasing number denoting the order in which tasks are added to the queue...</td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_termworkers" class="internal-link" title="ganeti.workerpool.WorkerPool._termworkers">_termworkers</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_worker_class" class="internal-link" title="ganeti.workerpool.WorkerPool._worker_class">_worker<wbr></wbr>_class</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_worker_to_pool" class="internal-link" title="ganeti.workerpool.WorkerPool._worker_to_pool">_worker<wbr></wbr>_to<wbr></wbr>_pool</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_workers" class="internal-link" title="ganeti.workerpool.WorkerPool._workers">_workers</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

            
        </div>

        <div id="childList">
          <div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, name, num_workers, worker_class):
    
    <a class="headerLink" href="#__init__" title="ganeti.workerpool.WorkerPool.__init__">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Constructor for worker pool.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">name</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">num<wbr></wbr>_workers</span></td><td class="fieldArgDesc">number of workers to be started (dynamic resizing is not yet implemented)</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">worker<wbr></wbr>_class</span></td><td class="fieldArgDesc">the class to be instantiated for workers; should derive from <code><a href="ganeti.workerpool.BaseWorker.html" class="internal-link" title="ganeti.workerpool.BaseWorker">BaseWorker</a></code></td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.AddManyTasks">
    
  </a>
  <a name="AddManyTasks">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">AddManyTasks</span>(self, tasks, priority=<a href="ganeti.workerpool.html#_DEFAULT_PRIORITY" class="internal-link" title="ganeti.workerpool._DEFAULT_PRIORITY">_DEFAULT_PRIORITY</a>, task_id=None):
    
    <a class="headerLink" href="#AddManyTasks" title="ganeti.workerpool.WorkerPool.AddManyTasks">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Add a list of tasks to the queue.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">tasks:</span>list of tuples</td><td class="fieldArgDesc">list of args passed to <code><a href="ganeti.workerpool.BaseWorker.html#RunTask" class="internal-link" title="ganeti.workerpool.BaseWorker.RunTask">BaseWorker.RunTask</a></code></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">priority:</span>number or list of numbers</td><td class="fieldArgDesc">Priority for all added tasks or a list with the priority for each task</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">task<wbr></wbr>_id:</span>list</td><td class="fieldArgDesc">List with the ID for each task</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Note</td></tr><tr><td colspan="2">See <code><a href="#AddTask" class="internal-link" title="ganeti.workerpool.WorkerPool.AddTask">AddTask</a></code> for a note on task IDs.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.AddTask">
    
  </a>
  <a name="AddTask">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">AddTask</span>(self, args, priority=<a href="ganeti.workerpool.html#_DEFAULT_PRIORITY" class="internal-link" title="ganeti.workerpool._DEFAULT_PRIORITY">_DEFAULT_PRIORITY</a>, task_id=None):
    
    <a class="headerLink" href="#AddTask" title="ganeti.workerpool.WorkerPool.AddTask">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Adds a task to the queue.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">args:</span>sequence</td><td class="fieldArgDesc">arguments passed to <code><a href="ganeti.workerpool.BaseWorker.html#RunTask" class="internal-link" title="ganeti.workerpool.BaseWorker.RunTask">BaseWorker.RunTask</a></code></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">priority:</span>number</td><td class="fieldArgDesc">Task priority</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">task<wbr></wbr>_id</span></td><td class="fieldArgDesc">Task ID</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Note</td></tr><tr><td colspan="2">The task ID can be essentially anything that can be used as a dictionary key. Callers, however, must ensure a task ID is unique while a task is in the pool or while it might return to the pool due to deferring using <code><a href="ganeti.workerpool.DeferTask.html" class="internal-link" title="ganeti.workerpool.DeferTask">DeferTask</a></code>.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.ChangeTaskPriority">
    
  </a>
  <a name="ChangeTaskPriority">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">ChangeTaskPriority</span>(self, task_id, priority):
    
    <a class="headerLink" href="#ChangeTaskPriority" title="ganeti.workerpool.WorkerPool.ChangeTaskPriority">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Changes a task's priority.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">task<wbr></wbr>_id</span></td><td class="fieldArgDesc">Task ID</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">priority:</span>number</td><td class="fieldArgDesc">New task priority</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Raises</td></tr><tr><td class="fieldArgContainer"><code><a href="ganeti.workerpool.NoSuchTask.html" class="internal-link" title="ganeti.workerpool.NoSuchTask">NoSuchTask</a></code></td><td>When the task referred by <tt class="rst-docutils literal">task_id</tt> can not be found (it may never have existed, may have already been processed, or is currently running)</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.HasRunningTasks">
    
  </a>
  <a name="HasRunningTasks">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">HasRunningTasks</span>(self):
    
    <a class="headerLink" href="#HasRunningTasks" title="ganeti.workerpool.WorkerPool.HasRunningTasks">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Checks whether there's at least one task running.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.Quiesce">
    
  </a>
  <a name="Quiesce">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">Quiesce</span>(self):
    
    <a class="headerLink" href="#Quiesce" title="ganeti.workerpool.WorkerPool.Quiesce">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Waits until the task queue is empty.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.Resize">
    
  </a>
  <a name="Resize">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">Resize</span>(self, num_workers):
    
    <a class="headerLink" href="#Resize" title="ganeti.workerpool.WorkerPool.Resize">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Changes the number of workers in the pool.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">num<wbr></wbr>_workers</span></td><td class="fieldArgDesc">the new number of workers</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="ganeti.workerpool.WorkerPool.TerminateWorkers">
    
  </a>
  <a name="TerminateWorkers">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">TerminateWorkers</span>(self):
    
    <a class="headerLink" href="#TerminateWorkers" title="ganeti.workerpool.WorkerPool.TerminateWorkers">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Terminate all worker threads.</p>
<p>Unstarted tasks will be ignored.</p>
</div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="ganeti.workerpool.WorkerPool._AddTaskUnlocked">
    
  </a>
  <a name="_AddTaskUnlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_AddTaskUnlocked</span>(self, args, priority, task_id):
    
    <a class="headerLink" href="#_AddTaskUnlocked" title="ganeti.workerpool.WorkerPool._AddTaskUnlocked">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Adds a task to the internal queue.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">args:</span>sequence</td><td class="fieldArgDesc">Arguments passed to <code><a href="ganeti.workerpool.BaseWorker.html#RunTask" class="internal-link" title="ganeti.workerpool.BaseWorker.RunTask">BaseWorker.RunTask</a></code></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">priority:</span>number</td><td class="fieldArgDesc">Task priority</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">task<wbr></wbr>_id</span></td><td class="fieldArgDesc">Task ID</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="ganeti.workerpool.WorkerPool._HasRunningTasksUnlocked">
    
  </a>
  <a name="_HasRunningTasksUnlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_HasRunningTasksUnlocked</span>(self):
    
    <a class="headerLink" href="#_HasRunningTasksUnlocked" title="ganeti.workerpool.WorkerPool._HasRunningTasksUnlocked">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Checks whether there's a task running in a worker.</p>
</div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="ganeti.workerpool.WorkerPool._NewWorkerIdUnlocked">
    
  </a>
  <a name="_NewWorkerIdUnlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_NewWorkerIdUnlocked</span>(self):
    
    <a class="headerLink" href="#_NewWorkerIdUnlocked" title="ganeti.workerpool.WorkerPool._NewWorkerIdUnlocked">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return an identifier for a new worker.</p>
</div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="ganeti.workerpool.WorkerPool._ResizeUnlocked">
    
  </a>
  <a name="_ResizeUnlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_ResizeUnlocked</span>(self, num_workers):
    
    <a class="headerLink" href="#_ResizeUnlocked" title="ganeti.workerpool.WorkerPool._ResizeUnlocked">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Changes the number of workers.</p>
</div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="ganeti.workerpool.WorkerPool._ShouldWorkerTerminateUnlocked">
    
  </a>
  <a name="_ShouldWorkerTerminateUnlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_ShouldWorkerTerminateUnlocked</span>(self, worker):
    
    <a class="headerLink" href="#_ShouldWorkerTerminateUnlocked" title="ganeti.workerpool.WorkerPool._ShouldWorkerTerminateUnlocked">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Returns whether a worker should terminate.</p>
</div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="ganeti.workerpool.WorkerPool._WaitForTaskUnlocked">
    
  </a>
  <a name="_WaitForTaskUnlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_WaitForTaskUnlocked</span>(self, worker):
    
    <a class="headerLink" href="#_WaitForTaskUnlocked" title="ganeti.workerpool.WorkerPool._WaitForTaskUnlocked">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Waits for a task for a worker.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">worker:</span><code><a href="ganeti.workerpool.BaseWorker.html" class="internal-link" title="ganeti.workerpool.BaseWorker">BaseWorker</a></code></td><td class="fieldArgDesc">Worker thread</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="ganeti.workerpool.WorkerPool._WaitWhileQuiescingUnlocked">
    
  </a>
  <a name="_WaitWhileQuiescingUnlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_WaitWhileQuiescingUnlocked</span>(self):
    
    <a class="headerLink" href="#_WaitWhileQuiescingUnlocked" title="ganeti.workerpool.WorkerPool._WaitWhileQuiescingUnlocked">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Wait until the worker pool has finished quiescing.</p>
</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._counter">
    
  </a>
  <a name="_counter">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_counter</span> =
    
    <a class="headerLink" href="#_counter" title="ganeti.workerpool.WorkerPool._counter">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._last_worker_id">
    
  </a>
  <a name="_last_worker_id">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_last_worker_id</span>: <code>int</code> =
    
    <a class="headerLink" href="#_last_worker_id" title="ganeti.workerpool.WorkerPool._last_worker_id">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._lock">
    
  </a>
  <a name="_lock">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_lock</span> =
    
    <a class="headerLink" href="#_lock" title="ganeti.workerpool.WorkerPool._lock">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._name">
    
  </a>
  <a name="_name">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_name</span> =
    
    <a class="headerLink" href="#_name" title="ganeti.workerpool.WorkerPool._name">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._pool_to_pool">
    
  </a>
  <a name="_pool_to_pool">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_pool_to_pool</span> =
    
    <a class="headerLink" href="#_pool_to_pool" title="ganeti.workerpool.WorkerPool._pool_to_pool">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._pool_to_worker">
    
  </a>
  <a name="_pool_to_worker">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_pool_to_worker</span> =
    
    <a class="headerLink" href="#_pool_to_worker" title="ganeti.workerpool.WorkerPool._pool_to_worker">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._quiescing">
    
  </a>
  <a name="_quiescing">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_quiescing</span>: <code>bool</code> =
    
    <a class="headerLink" href="#_quiescing" title="ganeti.workerpool.WorkerPool._quiescing">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._taskdata">
    
  </a>
  <a name="_taskdata">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_taskdata</span>: dict; (task IDs as keys, tuples as values) =
    
    <a class="headerLink" href="#_taskdata" title="ganeti.workerpool.WorkerPool._taskdata">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Mapping from task IDs to entries in <code><a href="#_tasks" class="internal-link" title="ganeti.workerpool.WorkerPool._tasks">_tasks</a></code></p>
</div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._tasks">
    
  </a>
  <a name="_tasks">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_tasks</span>: list of tuples =
    
    <a class="headerLink" href="#_tasks" title="ganeti.workerpool.WorkerPool._tasks">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Each tuple has the format (priority, order ID, task ID, arguments). Priority and order ID are numeric and essentially control the sort order. The order ID is an increasing number denoting the order in which tasks are added to the queue. The task ID is controlled by user of workerpool, see <code><a href="#AddTask" class="internal-link" title="ganeti.workerpool.WorkerPool.AddTask">AddTask</a></code> for details. The task arguments are <tt class="rst-docutils literal">None</tt> for abandoned tasks, otherwise a sequence of arguments to be passed to <code><a href="ganeti.workerpool.BaseWorker.html#RunTask" class="internal-link" title="ganeti.workerpool.BaseWorker.RunTask">BaseWorker.RunTask</a></code>). The list must fulfill the heap property (for use by the <tt class="rst-docutils literal">heapq</tt> module).</p>
</div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._termworkers">
    
  </a>
  <a name="_termworkers">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_termworkers</span>: <code>list</code> =
    
    <a class="headerLink" href="#_termworkers" title="ganeti.workerpool.WorkerPool._termworkers">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._worker_class">
    
  </a>
  <a name="_worker_class">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_worker_class</span> =
    
    <a class="headerLink" href="#_worker_class" title="ganeti.workerpool.WorkerPool._worker_class">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._worker_to_pool">
    
  </a>
  <a name="_worker_to_pool">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_worker_to_pool</span> =
    
    <a class="headerLink" href="#_worker_to_pool" title="ganeti.workerpool.WorkerPool._worker_to_pool">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="ganeti.workerpool.WorkerPool._workers">
    
  </a>
  <a name="_workers">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_workers</span>: <code>list</code> =
    
    <a class="headerLink" href="#_workers" title="ganeti.workerpool.WorkerPool._workers">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>
        </div>
      
      </div>
    </div>

    <footer class="navbar navbar-default">

  
  <div class="container">
    <a href="index.html">API Documentation</a> for ganeti/server,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.9.1 at 2024-05-06 13:21:37.
  </div>

  <!-- Search related scripts needs to be loaded at the end of HTML 
    parsing not to introduce overhead and display HTML data asap -->
  <script src="ajax.js" type="text/javascript"></script>
  <script src="searchlib.js" type="text/javascript"></script>
  <script src="search.js" type="text/javascript"></script>

</footer>
  
    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>