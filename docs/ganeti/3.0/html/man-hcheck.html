
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>hcheck &#8212; Ganeti 3.0.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="hinfo" href="man-hinfo.html" />
    <link rel="prev" title="hbal" href="man-hbal.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="man-hinfo.html" title="hinfo"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="man-hbal.html" title="hbal"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ganeti 3.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="manpages.html" accesskey="U">Man pages</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="hcheck">
<h1>hcheck<a class="headerlink" href="#hcheck" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2>NAME<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p>hcheck - Cluster checker</p>
</div>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong>hcheck</strong> {backend options…} [algorithm options…] [reporting options…]</p>
<p><strong>hcheck</strong> –version</p>
<p>Backend options:</p>
<p>{ <strong>-m</strong> <em>cluster</em> | <strong>-L[</strong> <em>path</em> <strong>] | **-t</strong> <em>data-file</em> |
<strong>-I</strong> <em>path</em> }</p>
<p>Algorithm options:</p>
<p><strong>[ –no-simulation ]</strong>
<strong>[ –max-cpu *cpu-ratio* ]</strong>
<strong>[ –min-disk *disk-ratio* ]</strong>
<strong>[ -l *limit* ]</strong>
<strong>[ -e *score* ]</strong>
<strong>[ -g *delta* ]</strong> <strong>[ –min-gain-limit *threshold* ]</strong>
<strong>[ -O *name…* ]</strong>
<strong>[ –no-disk-moves ]</strong>
<strong>[ –no-instance-moves ]</strong>
<strong>[ -U *util-file* ]</strong>
<strong>[ –ignore-dynu ]</strong>
<strong>[ –ignore-soft-errors ]</strong>
<strong>[ –evac-mode ]</strong>
<strong>[ –select-instances *inst…* ]</strong>
<strong>[ –exclude-instances *inst…* ]</strong>
<strong>[ –no-capacity-checks ]</strong></p>
<p>Reporting options:</p>
<p><strong>[–machine-readable**[=*CHOICE*] **]</strong>
<strong>[ -p[ *fields* ] ]</strong>
<strong>[ –print-instances ]</strong>
<strong>[ -v… | -q ]</strong></p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>hcheck is the cluster checker. It prints information about cluster’s
health and checks whether a rebalance done using <strong>hbal</strong> would help.</p>
<p>This information can be presented in both human-readable and
machine-readable way.</p>
<p>Note that it does not take any action, only performs a rebalance
simulation if necessary.</p>
<p>For more information about the algorithm details check <strong>hbal</strong>(1).</p>
<p>Additionally, hcheck also checks if the cluster is globally N+1 redundant.
That is, it checks for every node, if after failing over the DRBD instances
all instances on that node that with disks externally stored can be restarted
on some other node.</p>
</div>
<div class="section" id="options">
<h2>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>–no-simulation</dt>
<dd>Only perform checks based on current cluster state, without trying
to simulate rebalancing.</dd>
<dt>–no-capacity-checks</dt>
<dd>Do not check for global N+1 redundancy, i.e., do not warn if the
shared-storage instances of one node cannot be moved to the others
should that node fail.</dd>
</dl>
<p>For a detailed description about the options listed above have a look at
<strong>htools</strong>(1), <strong>hspace</strong>(1) and <strong>hbal</strong>(1).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">hcheck</a><ul>
<li><a class="reference internal" href="#name">NAME</a></li>
<li><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li><a class="reference internal" href="#description">DESCRIPTION</a></li>
<li><a class="reference internal" href="#options">OPTIONS</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="man-hbal.html"
                        title="previous chapter">hbal</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="man-hinfo.html"
                        title="next chapter">hinfo</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/man-hcheck.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="man-hinfo.html" title="hinfo"
             >next</a></li>
        <li class="right" >
          <a href="man-hbal.html" title="hbal"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ganeti 3.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="manpages.html" >Man pages</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015 Google Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>