<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.Daemon</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Ganeti-Daemon.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/Daemon.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Infered</td></tr></table><p class="caption">Ganeti.Daemon</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Constants
</a></li><li><a href="#g:2">Data types
</a></li><li><a href="#g:3">Command line options
</a></li><li><a href="#g:4">Daemon-related functions
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of the generic daemon functionality.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:devNull">devNull</a> :: FilePath</li><li class="src short"><a href="#v:daemonStartupErr">daemonStartupErr</a> :: String -&gt; String</li><li class="src short"><span class="keyword">data</span>  <a href="#t:DaemonOptions">DaemonOptions</a>  = <a href="#v:DaemonOptions">DaemonOptions</a> {<ul class="subs"><li><a href="#v:optShowHelp">optShowHelp</a> :: Bool</li><li><a href="#v:optShowVer">optShowVer</a> :: Bool</li><li><a href="#v:optShowComp">optShowComp</a> :: Bool</li><li><a href="#v:optDaemonize">optDaemonize</a> :: Bool</li><li><a href="#v:optPort">optPort</a> :: Maybe Word16</li><li><a href="#v:optDebug">optDebug</a> :: Bool</li><li><a href="#v:optNoUserChecks">optNoUserChecks</a> :: Bool</li><li><a href="#v:optBindAddress">optBindAddress</a> :: Maybe String</li><li><a href="#v:optSyslogUsage">optSyslogUsage</a> :: Maybe <a href="Ganeti-Logging.html#t:SyslogUsage">SyslogUsage</a></li><li><a href="#v:optForceNode">optForceNode</a> :: Bool</li><li><a href="#v:optNoVoting">optNoVoting</a> :: Bool</li><li><a href="#v:optYesDoIt">optYesDoIt</a> :: Bool</li></ul>}</li><li class="src short"><a href="#v:defaultOptions">defaultOptions</a> :: <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:OptType">OptType</a> = <a href="Ganeti-Common.html#t:GenericOptType">GenericOptType</a> <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:CheckFn">CheckFn</a> a = <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; IO (Either ExitCode a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:PrepFn">PrepFn</a> a b = <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; a -&gt; IO b</li><li class="src short"><span class="keyword">type</span> <a href="#t:MainFn">MainFn</a> a b = <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; a -&gt; b -&gt; IO ()</li><li class="src short"><a href="#v:oNoDaemonize">oNoDaemonize</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oDebug">oDebug</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oNoUserChecks">oNoUserChecks</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oPort">oPort</a> :: Int -&gt; <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oBindAddress">oBindAddress</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oSyslogUsage">oSyslogUsage</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oForceNode">oForceNode</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oNoVoting">oNoVoting</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:oYesDoIt">oYesDoIt</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a></li><li class="src short"><a href="#v:genericOpts">genericOpts</a> :: [<a href="Ganeti-Daemon.html#t:OptType">OptType</a>]</li><li class="src short"><a href="#v:ioErrorToResult">ioErrorToResult</a> ::  String -&gt; IOError -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result">Result</a> a)</li><li class="src short"><a href="#v:parseArgs">parseArgs</a> :: String -&gt; [<a href="Ganeti-Daemon.html#t:OptType">OptType</a>] -&gt; IO (<a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a>, [String])</li><li class="src short"><a href="#v:pidFileMode">pidFileMode</a> :: FileMode</li><li class="src short"><a href="#v:pidFileFlags">pidFileFlags</a> :: OpenFileFlags</li><li class="src short"><a href="#v:writePidFile">writePidFile</a> :: FilePath -&gt; IO Fd</li><li class="src short"><a href="#v:cleanupSocket">cleanupSocket</a> :: FilePath -&gt; IO ()</li><li class="src short"><a href="#v:setupDaemonEnv">setupDaemonEnv</a> :: FilePath -&gt; FileMode -&gt; IO ()</li><li class="src short"><a href="#v:finalCleanup">finalCleanup</a> :: FilePath -&gt; IO ()</li><li class="src short"><a href="#v:handleSigTerm">handleSigTerm</a> :: ThreadId -&gt; IO ()</li><li class="src short"><a href="#v:handleSigHup">handleSigHup</a> :: FilePath -&gt; IO ()</li><li class="src short"><a href="#v:setupDaemonFDs">setupDaemonFDs</a> :: Maybe FilePath -&gt; IO ()</li><li class="src short"><a href="#v:defaultBindAddr">defaultBindAddr</a> :: Int -&gt; Family -&gt; <a href="Ganeti-BasicTypes.html#t:Result">Result</a> (Family, SockAddr)</li><li class="src short"><a href="#v:parseAddress">parseAddress</a> :: <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; Int -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result">Result</a> (Family, SockAddr))</li><li class="src short"><a href="#v:vClusterHostNameEnvVar">vClusterHostNameEnvVar</a> :: String</li><li class="src short"><a href="#v:getFQDN-39-">getFQDN'</a> :: Maybe AddrInfo -&gt; IO String</li><li class="src short"><a href="#v:getFQDNwithHints">getFQDNwithHints</a> :: Maybe AddrInfo -&gt; IO String</li><li class="src short"><a href="#v:getFQDN">getFQDN</a> :: IO String</li><li class="src short"><a href="#v:isMaster">isMaster</a> :: IO Bool</li><li class="src short"><a href="#v:ensureNode">ensureNode</a> :: <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a> -&gt; <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; IO ()</li><li class="src short"><a href="#v:describeError">describeError</a> ::  String -&gt; Maybe Handle -&gt; Maybe FilePath -&gt; IO a -&gt; IO a</li><li class="src short"><a href="#v:daemonize">daemonize</a> :: FilePath -&gt; (Maybe Fd -&gt; IO ()) -&gt; IO ()</li><li class="src short"><a href="#v:genericMain">genericMain</a> ::  <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a> -&gt; [<a href="Ganeti-Daemon.html#t:OptType">OptType</a>] -&gt; <a href="Ganeti-Daemon.html#t:CheckFn">CheckFn</a> a -&gt; <a href="Ganeti-Daemon.html#t:PrepFn">PrepFn</a> a b -&gt; <a href="Ganeti-Daemon.html#t:MainFn">MainFn</a> a b -&gt; IO ()</li><li class="src short"><a href="#v:fullPrep">fullPrep</a> ::  <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a> -&gt; <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="Ganeti-Logging.html#t:SyslogUsage">SyslogUsage</a> -&gt; a -&gt; <a href="Ganeti-Daemon.html#t:PrepFn">PrepFn</a> a b -&gt; IO (FilePath, b)</li><li class="src short"><a href="#v:innerMain">innerMain</a> ::  <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a> -&gt; <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="Ganeti-Logging.html#t:SyslogUsage">SyslogUsage</a> -&gt; a -&gt; <a href="Ganeti-Daemon.html#t:PrepFn">PrepFn</a> a b -&gt; <a href="Ganeti-Daemon.html#t:MainFn">MainFn</a> a b -&gt; Maybe Fd -&gt; IO ()</li><li class="src short"><a href="#v:handlePrepErr">handlePrepErr</a> ::  Bool -&gt; Maybe Fd -&gt; IOError -&gt; IO a</li><li class="src short"><a href="#v:maybeCloseFd">maybeCloseFd</a> :: Maybe Fd -&gt; IO ()</li></ul></div><div id="interface"><h1 id="g:1">Constants
</h1><div class="top"><p class="src"><a name="v:devNull" class="def">devNull</a> :: FilePath<a href="Ganeti/Daemon.html#devNull" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:daemonStartupErr" class="def">daemonStartupErr</a> :: String -&gt; String<a href="Ganeti/Daemon.html#daemonStartupErr" class="link">Source</a></p></div><h1 id="g:2">Data types
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:DaemonOptions" class="def">DaemonOptions</a>  <a href="Ganeti/Daemon.html#DaemonOptions" class="link">Source</a></p><div class="doc"><p>Command line options structure.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DaemonOptions" class="def">DaemonOptions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:optShowHelp" class="def">optShowHelp</a> :: Bool</dt><dd class="doc"><p>Just show the help
</p></dd><dt class="src"><a name="v:optShowVer" class="def">optShowVer</a> :: Bool</dt><dd class="doc"><p>Just show the program version
</p></dd><dt class="src"><a name="v:optShowComp" class="def">optShowComp</a> :: Bool</dt><dd class="doc"><p>Just show the completion info
</p></dd><dt class="src"><a name="v:optDaemonize" class="def">optDaemonize</a> :: Bool</dt><dd class="doc"><p>Whether to daemonize or not
</p></dd><dt class="src"><a name="v:optPort" class="def">optPort</a> :: Maybe Word16</dt><dd class="doc"><p>Override for the network port
</p></dd><dt class="src"><a name="v:optDebug" class="def">optDebug</a> :: Bool</dt><dd class="doc"><p>Enable debug messages
</p></dd><dt class="src"><a name="v:optNoUserChecks" class="def">optNoUserChecks</a> :: Bool</dt><dd class="doc"><p>Ignore user checks
</p></dd><dt class="src"><a name="v:optBindAddress" class="def">optBindAddress</a> :: Maybe String</dt><dd class="doc"><p>Override for the bind address
</p></dd><dt class="src"><a name="v:optSyslogUsage" class="def">optSyslogUsage</a> :: Maybe <a href="Ganeti-Logging.html#t:SyslogUsage">SyslogUsage</a></dt><dd class="doc"><p>Override for Syslog usage
</p></dd><dt class="src"><a name="v:optForceNode" class="def">optForceNode</a> :: Bool</dt><dd class="doc"><p>Ignore node checks
</p></dd><dt class="src"><a name="v:optNoVoting" class="def">optNoVoting</a> :: Bool</dt><dd class="doc"><p>skip voting for master
</p></dd><dt class="src"><a name="v:optYesDoIt" class="def">optYesDoIt</a> :: Bool</dt><dd class="doc"><p>force dangerous options
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:DaemonOptions" class="caption collapser" onclick="toggleSection('i:DaemonOptions')">Instances</p><div id="section.i:DaemonOptions" class="show"><table><tr><td class="src"><a href="Ganeti-Common.html#t:StandardOptions">StandardOptions</a> <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:defaultOptions" class="def">defaultOptions</a> :: <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a><a href="Ganeti/Daemon.html#defaultOptions" class="link">Source</a></p><div class="doc"><p>Default values for the command line options.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:OptType" class="def">OptType</a> = <a href="Ganeti-Common.html#t:GenericOptType">GenericOptType</a> <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a><a href="Ganeti/Daemon.html#OptType" class="link">Source</a></p><div class="doc"><p>Abrreviation for the option type.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:CheckFn" class="def">CheckFn</a> a = <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; IO (Either ExitCode a)<a href="Ganeti/Daemon.html#CheckFn" class="link">Source</a></p><div class="doc"><p>Check function type.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:PrepFn" class="def">PrepFn</a> a b = <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; a -&gt; IO b<a href="Ganeti/Daemon.html#PrepFn" class="link">Source</a></p><div class="doc"><p>Prepare function type.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:MainFn" class="def">MainFn</a> a b = <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; a -&gt; b -&gt; IO ()<a href="Ganeti/Daemon.html#MainFn" class="link">Source</a></p><div class="doc"><p>Main execution function type.
</p></div></div><h1 id="g:3">Command line options
</h1><div class="top"><p class="src"><a name="v:oNoDaemonize" class="def">oNoDaemonize</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oNoDaemonize" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oDebug" class="def">oDebug</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oDebug" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oNoUserChecks" class="def">oNoUserChecks</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oNoUserChecks" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oPort" class="def">oPort</a> :: Int -&gt; <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oPort" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oBindAddress" class="def">oBindAddress</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oBindAddress" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oSyslogUsage" class="def">oSyslogUsage</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oSyslogUsage" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oForceNode" class="def">oForceNode</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oForceNode" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oNoVoting" class="def">oNoVoting</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oNoVoting" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:oYesDoIt" class="def">oYesDoIt</a> :: <a href="Ganeti-Daemon.html#t:OptType">OptType</a><a href="Ganeti/Daemon.html#oYesDoIt" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:genericOpts" class="def">genericOpts</a> :: [<a href="Ganeti-Daemon.html#t:OptType">OptType</a>]<a href="Ganeti/Daemon.html#genericOpts" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:ioErrorToResult" class="def">ioErrorToResult</a> ::  String -&gt; IOError -&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result">Result</a> a)<a href="Ganeti/Daemon.html#ioErrorToResult" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:parseArgs" class="def">parseArgs</a> :: String -&gt; [<a href="Ganeti-Daemon.html#t:OptType">OptType</a>] -&gt; IO (<a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a>, [String])<a href="Ganeti/Daemon.html#parseArgs" class="link">Source</a></p><div class="doc"><p>Small wrapper over getArgs and <code><a href="Ganeti-Common.html#v:parseOpts">parseOpts</a></code>.
</p></div></div><h1 id="g:4">Daemon-related functions
</h1><div class="top"><p class="src"><a name="v:pidFileMode" class="def">pidFileMode</a> :: FileMode<a href="Ganeti/Daemon.html#pidFileMode" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:pidFileFlags" class="def">pidFileFlags</a> :: OpenFileFlags<a href="Ganeti/Daemon.html#pidFileFlags" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:writePidFile" class="def">writePidFile</a> :: FilePath -&gt; IO Fd<a href="Ganeti/Daemon.html#writePidFile" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:cleanupSocket" class="def">cleanupSocket</a> :: FilePath -&gt; IO ()<a href="Ganeti/Daemon.html#cleanupSocket" class="link">Source</a></p><div class="doc"><p>Helper function to ensure a socket doesn't exist. Should only be
 called once we have locked the pid file successfully.
</p></div></div><div class="top"><p class="src"><a name="v:setupDaemonEnv" class="def">setupDaemonEnv</a> :: FilePath -&gt; FileMode -&gt; IO ()<a href="Ganeti/Daemon.html#setupDaemonEnv" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:finalCleanup" class="def">finalCleanup</a> :: FilePath -&gt; IO ()<a href="Ganeti/Daemon.html#finalCleanup" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:handleSigTerm" class="def">handleSigTerm</a> :: ThreadId -&gt; IO ()<a href="Ganeti/Daemon.html#handleSigTerm" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:handleSigHup" class="def">handleSigHup</a> :: FilePath -&gt; IO ()<a href="Ganeti/Daemon.html#handleSigHup" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:setupDaemonFDs" class="def">setupDaemonFDs</a> :: Maybe FilePath -&gt; IO ()<a href="Ganeti/Daemon.html#setupDaemonFDs" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:defaultBindAddr" class="def">defaultBindAddr</a> :: Int -&gt; Family -&gt; <a href="Ganeti-BasicTypes.html#t:Result">Result</a> (Family, SockAddr)<a href="Ganeti/Daemon.html#defaultBindAddr" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:parseAddress" class="def">parseAddress</a><a href="Ganeti/Daemon.html#parseAddress" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a></td><td class="doc"><p>Command line options
</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Default port for this daemon
</p></td></tr><tr><td class="src">-&gt; IO (<a href="Ganeti-BasicTypes.html#t:Result">Result</a> (Family, SockAddr))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Based on the options, compute the socket address to use for the
 daemon.
</p></div></div><div class="top"><p class="src"><a name="v:vClusterHostNameEnvVar" class="def">vClusterHostNameEnvVar</a> :: String<a href="Ganeti/Daemon.html#vClusterHostNameEnvVar" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getFQDN-39-" class="def">getFQDN'</a> :: Maybe AddrInfo -&gt; IO String<a href="Ganeti/Daemon.html#getFQDN%27" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getFQDNwithHints" class="def">getFQDNwithHints</a> :: Maybe AddrInfo -&gt; IO String<a href="Ganeti/Daemon.html#getFQDNwithHints" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getFQDN" class="def">getFQDN</a> :: IO String<a href="Ganeti/Daemon.html#getFQDN" class="link">Source</a></p><div class="doc"><p>Return the full qualified host name, honoring the vcluster setup.
</p></div></div><div class="top"><p class="src"><a name="v:isMaster" class="def">isMaster</a> :: IO Bool<a href="Ganeti/Daemon.html#isMaster" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:ensureNode" class="def">ensureNode</a> :: <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a> -&gt; <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; IO ()<a href="Ganeti/Daemon.html#ensureNode" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:describeError" class="def">describeError</a> ::  String -&gt; Maybe Handle -&gt; Maybe FilePath -&gt; IO a -&gt; IO a<a href="Ganeti/Daemon.html#describeError" class="link">Source</a></p><div class="doc"><p>Run an I/O action that might throw an I/O error, under a
 handler that will simply annotate and re-throw the exception.
</p></div></div><div class="top"><p class="src"><a name="v:daemonize" class="def">daemonize</a> :: FilePath -&gt; (Maybe Fd -&gt; IO ()) -&gt; IO ()<a href="Ganeti/Daemon.html#daemonize" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:genericMain" class="def">genericMain</a><a href="Ganeti/Daemon.html#genericMain" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a></td><td class="doc"><p>The daemon we're running
</p></td></tr><tr><td class="src">-&gt; [<a href="Ganeti-Daemon.html#t:OptType">OptType</a>]</td><td class="doc"><p>The available options
</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Daemon.html#t:CheckFn">CheckFn</a> a</td><td class="doc"><p>Check function
</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Daemon.html#t:PrepFn">PrepFn</a> a b</td><td class="doc"><p>Prepare function
</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Daemon.html#t:MainFn">MainFn</a> a b</td><td class="doc"><p>Execution function
</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Generic daemon startup.
</p></div></div><div class="top"><p class="src"><a name="v:fullPrep" class="def">fullPrep</a> ::  <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a> -&gt; <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="Ganeti-Logging.html#t:SyslogUsage">SyslogUsage</a> -&gt; a -&gt; <a href="Ganeti-Daemon.html#t:PrepFn">PrepFn</a> a b -&gt; IO (FilePath, b)<a href="Ganeti/Daemon.html#fullPrep" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:innerMain" class="def">innerMain</a> ::  <a href="Ganeti-Runtime.html#t:GanetiDaemon">GanetiDaemon</a> -&gt; <a href="Ganeti-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="Ganeti-Logging.html#t:SyslogUsage">SyslogUsage</a> -&gt; a -&gt; <a href="Ganeti-Daemon.html#t:PrepFn">PrepFn</a> a b -&gt; <a href="Ganeti-Daemon.html#t:MainFn">MainFn</a> a b -&gt; Maybe Fd -&gt; IO ()<a href="Ganeti/Daemon.html#innerMain" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:handlePrepErr" class="def">handlePrepErr</a> ::  Bool -&gt; Maybe Fd -&gt; IOError -&gt; IO a<a href="Ganeti/Daemon.html#handlePrepErr" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:maybeCloseFd" class="def">maybeCloseFd</a> :: Maybe Fd -&gt; IO ()<a href="Ganeti/Daemon.html#maybeCloseFd" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>