<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.Query.Instance</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Ganeti-Query-Instance.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/Query/Instance.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Infered</td></tr></table><p class="caption">Ganeti.Query.Instance</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Helper functions for node property retrieval
</a></li><li><a href="#g:2">Various helper functions for property retrieval
</a></li><li><a href="#g:3">Live fields functionality
</a></li><li><a href="#g:4">Functionality related to status and operational status extraction
</a></li><li><a href="#g:5">Helper functions extracting information as necessary for the generic query
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of the Ganeti Query2 instance queries.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:LiveInfo">LiveInfo</a> = (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a>, Bool), Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo">InstanceConsoleInfo</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Runtime">Runtime</a> = Either <a href="Ganeti-Rpc.html#t:RpcError">RpcError</a> <a href="Ganeti-Query-Instance.html#t:LiveInfo">LiveInfo</a></li><li class="src short"><a href="#v:fieldsMap">fieldsMap</a> :: <a href="Ganeti-Query-Types.html#t:FieldMap">FieldMap</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:instanceAliases">instanceAliases</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>)]</li><li class="src short"><a href="#v:aliasedFields">aliasedFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:instanceFields">instanceFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:nicDescSuffix">nicDescSuffix</a> :: String</li><li class="src short"><a href="#v:nicAggDescPrefix">nicAggDescPrefix</a> :: String</li><li class="src short"><a href="#v:getNetworkName">getNetworkName</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; String -&gt; <a href="Ganeti-Types.html#t:NonEmptyString">NonEmptyString</a></li><li class="src short"><a href="#v:getNicBridge">getNicBridge</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; Maybe String</li><li class="src short"><a href="#v:getNicVlan">getNicVlan</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; Maybe String</li><li class="src short"><a href="#v:fillNicParamsFromConfig">fillNicParamsFromConfig</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:PartialNicParams">PartialNicParams</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a></li><li class="src short"><a href="#v:getDefaultNicParams">getDefaultNicParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a></li><li class="src short"><a href="#v:getDiskSizeRequirements">getDiskSizeRequirements</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getDiskSizes">getDiskSizes</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getDiskSpindles">getDiskSpindles</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getDiskNames">getDiskNames</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getDiskUuids">getDiskUuids</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getProviders">getProviders</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getStorageIds">getStorageIds</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getIndexedOptionalConfField">getIndexedOptionalConfField</a> :: JSON b =&gt; (<a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [a]) -&gt; (a -&gt; Maybe b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getIndexedConfField">getIndexedConfField</a> :: JSON b =&gt; (<a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [a]) -&gt; (a -&gt; b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getIndexedNicNetworkNameField">getIndexedNicNetworkNameField</a> :: Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getIndexedNicField">getIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getOptionalIndexedNicField">getOptionalIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; Maybe a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getIndexedFieldWithDefault">getIndexedFieldWithDefault</a> :: JSON c =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; [a]) -&gt; (<a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; b) -&gt; (b -&gt; a -&gt; b) -&gt; (b -&gt; Maybe c) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getIndexedOptionalField">getIndexedOptionalField</a> :: JSON b =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; [a]) -&gt; (a -&gt; Maybe b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getIndexedField">getIndexedField</a> :: JSON b =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; [a]) -&gt; (a -&gt; b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:maybeAt">maybeAt</a> ::  Int -&gt; [a] -&gt; Maybe a</li><li class="src short"><a href="#v:fieldDefinitionCompleter">fieldDefinitionCompleter</a> :: PrintfArg t1 =&gt; PrintfArg t2 =&gt; <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldDoc">FieldDoc</a> -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition">FieldDefinition</a></li><li class="src short"><a href="#v:fillIncompleteFields">fillIncompleteFields</a> ::  (t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode">QffMode</a>) -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Types.html#t:FieldData">FieldData</a> a b</li><li class="src short"><a href="#v:instantiateIndexedFields">instantiateIndexedFields</a> :: (Show t1, Integral t1) =&gt; Int -&gt; [(t1 -&gt; String -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode">QffMode</a>)] -&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b</li><li class="src short"><a href="#v:getPrimaryNode">getPrimaryNode</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> <a href="Ganeti-Objects.html#t:Node">Node</a></li><li class="src short"><a href="#v:getPrimaryNodeName">getPrimaryNodeName</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getPrimaryNodeGroup">getPrimaryNodeGroup</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> <a href="Ganeti-Objects.html#t:NodeGroup">NodeGroup</a></li><li class="src short"><a href="#v:getPrimaryNodeGroupName">getPrimaryNodeGroupName</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getPrimaryNodeGroupUuid">getPrimaryNodeGroupUuid</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getSecondaryNodes">getSecondaryNodes</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [<a href="Ganeti-Objects.html#t:Node">Node</a>]</li><li class="src short"><a href="#v:getSecondaryNodeAttribute">getSecondaryNodeAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:Node">Node</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:getSecondaryNodeGroups">getSecondaryNodeGroups</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [<a href="Ganeti-Objects.html#t:NodeGroup">NodeGroup</a>]</li><li class="src short"><a href="#v:getSecondaryNodeGroupAttribute">getSecondaryNodeGroupAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:NodeGroup">NodeGroup</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:beParamGetter">beParamGetter</a> :: String -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:hvParamGetter">hvParamGetter</a> :: String -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:instanceLiveFieldsDefs">instanceLiveFieldsDefs</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc">FieldDoc</a>)]</li><li class="src short"><a href="#v:instanceLiveFieldExtract">instanceLiveFieldExtract</a> :: <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; JSValue</li><li class="src short"><a href="#v:instanceLiveRpcCall">instanceLiveRpcCall</a> :: <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:instanceLiveFieldBuilder">instanceLiveFieldBuilder</a> :: (<a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc">FieldDoc</a>) -&gt; <a href="Ganeti-Query-Types.html#t:FieldData">FieldData</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:statusDocText">statusDocText</a> :: String</li><li class="src short"><a href="#v:isPrimaryOffline">isPrimaryOffline</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; Bool</li><li class="src short"><a href="#v:userShutdownEnabled">userShutdownEnabled</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; Bool</li><li class="src short"><a href="#v:liveInstanceStatus">liveInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; (<a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a>, Bool) -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus">InstanceStatus</a></li><li class="src short"><a href="#v:deadInstanceStatus">deadInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus">InstanceStatus</a></li><li class="src short"><a href="#v:determineInstanceStatus">determineInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus">InstanceStatus</a></li><li class="src short"><a href="#v:statusExtract">statusExtract</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:operStatusExtract">operStatusExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:consoleExtract">consoleExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:checkForNodeError">checkForNodeError</a> ::  [(String, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> a)] -&gt; String -&gt; Maybe <a href="Ganeti-Rpc.html#t:RpcError">RpcError</a></li><li class="src short"><a href="#v:findInfoInNodeResult">findInfoInNodeResult</a> :: <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo">RpcResultAllInstancesInfo</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a></li><li class="src short"><a href="#v:getInstanceInfo">getInstanceInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo">RpcResultAllInstancesInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a>, Bool))</li><li class="src short"><a href="#v:getConsoleInfo">getConsoleInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo">InstanceConsoleInfo</a></li><li class="src short"><a href="#v:extractLiveInfo">extractLiveInfo</a> :: [(<a href="Ganeti-Objects.html#t:Node">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo">RpcResultAllInstancesInfo</a>)] -&gt; [(<a href="Ganeti-Objects.html#t:Node">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a></li><li class="src short"><a href="#v:getAllConsoleParams">getAllConsoleParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>] -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a>]</li><li class="src short"><a href="#v:compareParamsByNode">compareParamsByNode</a> :: <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a> -&gt; Bool</li><li class="src short"><a href="#v:consoleParamsToCalls">consoleParamsToCalls</a> :: [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a>] -&gt; [(<a href="Ganeti-Objects.html#t:Node">Node</a>, <a href="Ganeti-Rpc.html#t:RpcCallInstanceConsoleInfo">RpcCallInstanceConsoleInfo</a>)]</li><li class="src short"><a href="#v:getHypervisorSpecs">getHypervisorSpecs</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>] -&gt; [(<a href="Ganeti-Types.html#t:Hypervisor">Hypervisor</a>, <a href="Ganeti-Types.html#t:HvParams">HvParams</a>)]</li><li class="src short"><a href="#v:collectLiveData">collectLiveData</a> :: Bool -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; [String] -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>] -&gt; IO [(<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>, <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a>)]</li><li class="src short"><a href="#v:getDiskTemplate">getDiskTemplate</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:LiveInfo" class="def">LiveInfo</a> = (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a>, Bool), Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo">InstanceConsoleInfo</a>)<a href="Ganeti/Query/Instance.html#LiveInfo" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Runtime" class="def">Runtime</a> = Either <a href="Ganeti-Rpc.html#t:RpcError">RpcError</a> <a href="Ganeti-Query-Instance.html#t:LiveInfo">LiveInfo</a><a href="Ganeti/Query/Instance.html#Runtime" class="link">Source</a></p><div class="doc"><p>Runtime containing the <code><a href="Ganeti-Query-Instance.html#t:LiveInfo">LiveInfo</a></code>. See the genericQuery function in
 the Query.hs file for an explanation of the terms used.
</p></div></div><div class="top"><p class="src"><a name="v:fieldsMap" class="def">fieldsMap</a> :: <a href="Ganeti-Query-Types.html#t:FieldMap">FieldMap</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#fieldsMap" class="link">Source</a></p><div class="doc"><p>The instance fields map.
</p></div></div><div class="top"><p class="src"><a name="v:instanceAliases" class="def">instanceAliases</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>)]<a href="Ganeti/Query/Instance.html#instanceAliases" class="link">Source</a></p><div class="doc"><p>The instance aliases.
</p></div></div><div class="top"><p class="src"><a name="v:aliasedFields" class="def">aliasedFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#aliasedFields" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceFields" class="def">instanceFields</a> :: <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#instanceFields" class="link">Source</a></p><div class="doc"><p>The instance fields.
</p></div></div><h1 id="g:1">Helper functions for node property retrieval
</h1><div class="top"><p class="src"><a name="v:nicDescSuffix" class="def">nicDescSuffix</a> :: String<a href="Ganeti/Query/Instance.html#nicDescSuffix" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:nicAggDescPrefix" class="def">nicAggDescPrefix</a> :: String<a href="Ganeti/Query/Instance.html#nicAggDescPrefix" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getNetworkName" class="def">getNetworkName</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; String -&gt; <a href="Ganeti-Types.html#t:NonEmptyString">NonEmptyString</a><a href="Ganeti/Query/Instance.html#getNetworkName" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getNicBridge" class="def">getNicBridge</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; Maybe String<a href="Ganeti/Query/Instance.html#getNicBridge" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getNicVlan" class="def">getNicVlan</a> :: <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; Maybe String<a href="Ganeti/Query/Instance.html#getNicVlan" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:fillNicParamsFromConfig" class="def">fillNicParamsFromConfig</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:PartialNicParams">PartialNicParams</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a><a href="Ganeti/Query/Instance.html#fillNicParamsFromConfig" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDefaultNicParams" class="def">getDefaultNicParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a><a href="Ganeti/Query/Instance.html#getDefaultNicParams" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDiskSizeRequirements" class="def">getDiskSizeRequirements</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getDiskSizeRequirements" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDiskSizes" class="def">getDiskSizes</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getDiskSizes" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDiskSpindles" class="def">getDiskSpindles</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getDiskSpindles" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDiskNames" class="def">getDiskNames</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getDiskNames" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDiskUuids" class="def">getDiskUuids</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getDiskUuids" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getProviders" class="def">getProviders</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getProviders" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getStorageIds" class="def">getStorageIds</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getStorageIds" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getIndexedOptionalConfField" class="def">getIndexedOptionalConfField</a> :: JSON b =&gt; (<a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [a]) -&gt; (a -&gt; Maybe b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getIndexedOptionalConfField" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getIndexedConfField" class="def">getIndexedConfField</a> :: JSON b =&gt; (<a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [a]) -&gt; (a -&gt; b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getIndexedConfField" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getIndexedNicNetworkNameField" class="def">getIndexedNicNetworkNameField</a> :: Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getIndexedNicNetworkNameField" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getIndexedNicField" class="def">getIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getIndexedNicField" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getOptionalIndexedNicField" class="def">getOptionalIndexedNicField</a> :: JSON a =&gt; (<a href="Ganeti-Objects-Nic.html#t:FilledNicParams">FilledNicParams</a> -&gt; Maybe a) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getOptionalIndexedNicField" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getIndexedFieldWithDefault" class="def">getIndexedFieldWithDefault</a> :: JSON c =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; [a]) -&gt; (<a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; b) -&gt; (b -&gt; a -&gt; b) -&gt; (b -&gt; Maybe c) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getIndexedFieldWithDefault" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getIndexedOptionalField" class="def">getIndexedOptionalField</a> :: JSON b =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; [a]) -&gt; (a -&gt; Maybe b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getIndexedOptionalField" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getIndexedField" class="def">getIndexedField</a> :: JSON b =&gt; (<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; [a]) -&gt; (a -&gt; b) -&gt; Int -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#getIndexedField" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:maybeAt" class="def">maybeAt</a> ::  Int -&gt; [a] -&gt; Maybe a<a href="Ganeti/Query/Instance.html#maybeAt" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:fieldDefinitionCompleter" class="def">fieldDefinitionCompleter</a> :: PrintfArg t1 =&gt; PrintfArg t2 =&gt; <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldDoc">FieldDoc</a> -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition">FieldDefinition</a><a href="Ganeti/Query/Instance.html#fieldDefinitionCompleter" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:fillIncompleteFields" class="def">fillIncompleteFields</a> ::  (t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode">QffMode</a>) -&gt; t1 -&gt; t2 -&gt; <a href="Ganeti-Query-Types.html#t:FieldData">FieldData</a> a b<a href="Ganeti/Query/Instance.html#fillIncompleteFields" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instantiateIndexedFields" class="def">instantiateIndexedFields</a> :: (Show t1, Integral t1) =&gt; Int -&gt; [(t1 -&gt; String -&gt; <a href="Ganeti-Query-Language.html#t:FieldDefinition">FieldDefinition</a>, t1 -&gt; <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> a b, <a href="Ganeti-Query-Types.html#t:QffMode">QffMode</a>)] -&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b<a href="Ganeti/Query/Instance.html#instantiateIndexedFields" class="link">Source</a></p></div><h1 id="g:2">Various helper functions for property retrieval
</h1><div class="top"><p class="src"><a name="v:getPrimaryNode" class="def">getPrimaryNode</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> <a href="Ganeti-Objects.html#t:Node">Node</a><a href="Ganeti/Query/Instance.html#getPrimaryNode" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getPrimaryNodeName" class="def">getPrimaryNodeName</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getPrimaryNodeName" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getPrimaryNodeGroup" class="def">getPrimaryNodeGroup</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> <a href="Ganeti-Objects.html#t:NodeGroup">NodeGroup</a><a href="Ganeti/Query/Instance.html#getPrimaryNodeGroup" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getPrimaryNodeGroupName" class="def">getPrimaryNodeGroupName</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getPrimaryNodeGroupName" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getPrimaryNodeGroupUuid" class="def">getPrimaryNodeGroupUuid</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getPrimaryNodeGroupUuid" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getSecondaryNodes" class="def">getSecondaryNodes</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [<a href="Ganeti-Objects.html#t:Node">Node</a>]<a href="Ganeti/Query/Instance.html#getSecondaryNodes" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getSecondaryNodeAttribute" class="def">getSecondaryNodeAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:Node">Node</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getSecondaryNodeAttribute" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getSecondaryNodeGroups" class="def">getSecondaryNodeGroups</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [<a href="Ganeti-Objects.html#t:NodeGroup">NodeGroup</a>]<a href="Ganeti/Query/Instance.html#getSecondaryNodeGroups" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getSecondaryNodeGroupAttribute" class="def">getSecondaryNodeGroupAttribute</a> :: JSON a =&gt; (<a href="Ganeti-Objects.html#t:NodeGroup">NodeGroup</a> -&gt; a) -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getSecondaryNodeGroupAttribute" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:beParamGetter" class="def">beParamGetter</a> :: String -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#beParamGetter" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:hvParamGetter" class="def">hvParamGetter</a> :: String -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#hvParamGetter" class="link">Source</a></p></div><h1 id="g:3">Live fields functionality
</h1><div class="top"><p class="src"><a name="v:instanceLiveFieldsDefs" class="def">instanceLiveFieldsDefs</a> :: [(<a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc">FieldDoc</a>)]<a href="Ganeti/Query/Instance.html#instanceLiveFieldsDefs" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceLiveFieldExtract" class="def">instanceLiveFieldExtract</a> :: <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; JSValue<a href="Ganeti/Query/Instance.html#instanceLiveFieldExtract" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceLiveRpcCall" class="def">instanceLiveRpcCall</a> :: <a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#instanceLiveRpcCall" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceLiveFieldBuilder" class="def">instanceLiveFieldBuilder</a> :: (<a href="Ganeti-Query-Language.html#t:FieldName">FieldName</a>, <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a>, <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a>, String, <a href="Ganeti-Query-Language.html#t:FieldDoc">FieldDoc</a>) -&gt; <a href="Ganeti-Query-Types.html#t:FieldData">FieldData</a> <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#instanceLiveFieldBuilder" class="link">Source</a></p></div><h1 id="g:4">Functionality related to status and operational status extraction
</h1><div class="top"><p class="src"><a name="v:statusDocText" class="def">statusDocText</a> :: String<a href="Ganeti/Query/Instance.html#statusDocText" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:isPrimaryOffline" class="def">isPrimaryOffline</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; Bool<a href="Ganeti/Query/Instance.html#isPrimaryOffline" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:userShutdownEnabled" class="def">userShutdownEnabled</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; Bool<a href="Ganeti/Query/Instance.html#userShutdownEnabled" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:liveInstanceStatus" class="def">liveInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; (<a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a>, Bool) -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus">InstanceStatus</a><a href="Ganeti/Query/Instance.html#liveInstanceStatus" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:deadInstanceStatus" class="def">deadInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus">InstanceStatus</a><a href="Ganeti/Query/Instance.html#deadInstanceStatus" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:determineInstanceStatus" class="def">determineInstanceStatus</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Types.html#t:InstanceStatus">InstanceStatus</a><a href="Ganeti/Query/Instance.html#determineInstanceStatus" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:statusExtract" class="def">statusExtract</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#statusExtract" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:operStatusExtract" class="def">operStatusExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#operStatusExtract" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:consoleExtract" class="def">consoleExtract</a> :: <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#consoleExtract" class="link">Source</a></p></div><h1 id="g:5">Helper functions extracting information as necessary for the generic query
</h1><div class="top"><p class="src"><a name="v:checkForNodeError" class="def">checkForNodeError</a> ::  [(String, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> a)] -&gt; String -&gt; Maybe <a href="Ganeti-Rpc.html#t:RpcError">RpcError</a><a href="Ganeti/Query/Instance.html#checkForNodeError" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:findInfoInNodeResult" class="def">findInfoInNodeResult</a> :: <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo">RpcResultAllInstancesInfo</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a><a href="Ganeti/Query/Instance.html#findInfoInNodeResult" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getInstanceInfo" class="def">getInstanceInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo">RpcResultAllInstancesInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> (Maybe (<a href="Ganeti-Rpc.html#t:InstanceInfo">InstanceInfo</a>, Bool))<a href="Ganeti/Query/Instance.html#getInstanceInfo" class="link">Source</a></p><div class="doc"><p>Retrieves the instance information if it is present anywhere in the all
 instances RPC result. Notes if it originates from the primary node.
 An error is delivered if there is no result, and the primary node is down.
</p></div></div><div class="top"><p class="src"><a name="v:getConsoleInfo" class="def">getConsoleInfo</a> :: [(String, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; Maybe <a href="Ganeti-Rpc.html#t:InstanceConsoleInfo">InstanceConsoleInfo</a><a href="Ganeti/Query/Instance.html#getConsoleInfo" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:extractLiveInfo" class="def">extractLiveInfo</a> :: [(<a href="Ganeti-Objects.html#t:Node">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultAllInstancesInfo">RpcResultAllInstancesInfo</a>)] -&gt; [(<a href="Ganeti-Objects.html#t:Node">Node</a>, <a href="Ganeti-Rpc.html#t:ERpcError">ERpcError</a> <a href="Ganeti-Rpc.html#t:RpcResultInstanceConsoleInfo">RpcResultInstanceConsoleInfo</a>)] -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a><a href="Ganeti/Query/Instance.html#extractLiveInfo" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getAllConsoleParams" class="def">getAllConsoleParams</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>] -&gt; <a href="Ganeti-Errors.html#t:ErrorResult">ErrorResult</a> [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a>]<a href="Ganeti/Query/Instance.html#getAllConsoleParams" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:compareParamsByNode" class="def">compareParamsByNode</a> :: <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a> -&gt; <a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a> -&gt; Bool<a href="Ganeti/Query/Instance.html#compareParamsByNode" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:consoleParamsToCalls" class="def">consoleParamsToCalls</a> :: [<a href="Ganeti-Rpc.html#t:InstanceConsoleInfoParams">InstanceConsoleInfoParams</a>] -&gt; [(<a href="Ganeti-Objects.html#t:Node">Node</a>, <a href="Ganeti-Rpc.html#t:RpcCallInstanceConsoleInfo">RpcCallInstanceConsoleInfo</a>)]<a href="Ganeti/Query/Instance.html#consoleParamsToCalls" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getHypervisorSpecs" class="def">getHypervisorSpecs</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>] -&gt; [(<a href="Ganeti-Types.html#t:Hypervisor">Hypervisor</a>, <a href="Ganeti-Types.html#t:HvParams">HvParams</a>)]<a href="Ganeti/Query/Instance.html#getHypervisorSpecs" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:collectLiveData" class="def">collectLiveData</a><a href="Ganeti/Query/Instance.html#collectLiveData" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Bool</td><td class="doc"><p>Live queries allowed
</p></td></tr><tr><td class="src">-&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a></td><td class="doc"><p>The cluster config
</p></td></tr><tr><td class="src">-&gt; [String]</td><td class="doc"><p>The requested fields
</p></td></tr><tr><td class="src">-&gt; [<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>]</td><td class="doc"><p>The instance objects
</p></td></tr><tr><td class="src">-&gt; IO [(<a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a>, <a href="Ganeti-Query-Instance.html#t:Runtime">Runtime</a>)]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Collect live data from RPC query if enabled.
</p></div></div><div class="top"><p class="src"><a name="v:getDiskTemplate" class="def">getDiskTemplate</a> :: <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; <a href="Ganeti-Objects-Instance.html#t:Instance">Instance</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Instance.html#getDiskTemplate" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>