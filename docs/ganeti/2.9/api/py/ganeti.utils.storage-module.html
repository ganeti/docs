<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.utils.storage</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.utils-module.html">Package&nbsp;utils</a> ::
        Module&nbsp;storage
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.utils.storage-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module storage</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.utils.storage-pysrc.html">source&nbsp;code</a></span></p>
<p>Utility functions for storage.</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="GetDiskTemplatesOfStorageType"></a><span class="summary-sig-name">GetDiskTemplatesOfStorageType</span>(<span class="summary-sig-arg">storage_type</span>)</span><br />
      Given the storage type, returns a list of disk templates based on 
      that storage type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetDiskTemplatesOfStorageType">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="GetLvmDiskTemplates"></a><span class="summary-sig-name">GetLvmDiskTemplates</span>()</span><br />
      Returns all disk templates that use LVM.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetLvmDiskTemplates">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsDiskTemplateEnabled"></a><span class="summary-sig-name">IsDiskTemplateEnabled</span>(<span class="summary-sig-arg">disk_template</span>,
        <span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Checks if a particular disk template is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsDiskTemplateEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsFileStorageEnabled"></a><span class="summary-sig-name">IsFileStorageEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Checks if file storage is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsFileStorageEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsSharedFileStorageEnabled"></a><span class="summary-sig-name">IsSharedFileStorageEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Checks if shared file storage is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsSharedFileStorageEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsLvmEnabled"></a><span class="summary-sig-name">IsLvmEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Check whether or not any lvm-based disk templates are enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#IsLvmEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="LvmGetsEnabled"></a><span class="summary-sig-name">LvmGetsEnabled</span>(<span class="summary-sig-arg">enabled_disk_templates</span>,
        <span class="summary-sig-arg">new_enabled_disk_templates</span>)</span><br />
      Checks whether lvm was not enabled before, but will be enabled after 
      the operation.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LvmGetsEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#_GetDefaultStorageUnitForDiskTemplate" class="summary-sig-name" onclick="show_private();">_GetDefaultStorageUnitForDiskTemplate</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">disk_template</span>)</span><br />
      Retrieves the identifier of the default storage entity for the given 
      storage type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#_GetDefaultStorageUnitForDiskTemplate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">(string, string)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#_GetDefaultStorageUnitForSpindles" class="summary-sig-name" onclick="show_private();">_GetDefaultStorageUnitForSpindles</a>(<span class="summary-sig-arg">cfg</span>)</span><br />
      Creates a 'spindle' storage unit, by retrieving the volume group name
      and associating it to the lvm-pv storage type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#_GetDefaultStorageUnitForSpindles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of tuples (string, string)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#GetStorageUnitsOfCluster" class="summary-sig-name">GetStorageUnitsOfCluster</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">include_spindles</span>=<span class="summary-sig-default">False</span>)</span><br />
      Examines the cluster's configuration and returns a list of storage 
      units and their storage keys, ordered by the order in which they are 
      enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetStorageUnitsOfCluster">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.storage-module.html#LookupSpaceInfoByStorageType" class="summary-sig-name">LookupSpaceInfoByStorageType</a>(<span class="summary-sig-arg">storage_space_info</span>,
        <span class="summary-sig-arg">storage_type</span>)</span><br />
      Looks up the storage space info for a given storage type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LookupSpaceInfoByStorageType">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<p class="indent-wrapped-lines"><b>Imports:</b>
  <span title="logging">logging</span>,
  <a href="ganeti.constants-module.html" title="ganeti.constants">constants</a>
</p><br />
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_GetDefaultStorageUnitForDiskTemplate"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetDefaultStorageUnitForDiskTemplate</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">disk_template</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#_GetDefaultStorageUnitForDiskTemplate">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Retrieves the identifier of the default storage entity for the given 
  storage type.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<code>objects.ConfigData</code>) - the configuration data</li>
        <li><strong class="pname"><code>disk_template</code></strong> (string) - a disk template, for example 'drbd'</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>identifier for a storage unit, for example the vg_name for lvm 
          storage</dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetDefaultStorageUnitForSpindles"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetDefaultStorageUnitForSpindles</span>(<span class="sig-arg">cfg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#_GetDefaultStorageUnitForSpindles">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Creates a 'spindle' storage unit, by retrieving the volume group name 
  and associating it to the lvm-pv storage type.</p>
  <dl class="fields">
    <dt>Returns: (string, string)</dt>
        <dd>tuple (storage_type, storage_key), where storage type is 'lvm-pv'
          and storage_key the name of the default volume group</dd>
  </dl>
</td></tr></table>
</div>
<a name="GetStorageUnitsOfCluster"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetStorageUnitsOfCluster</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">include_spindles</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#GetStorageUnitsOfCluster">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Examines the cluster's configuration and returns a list of storage 
  units and their storage keys, ordered by the order in which they are 
  enabled.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
        <li><strong class="pname"><code>include_spindles</code></strong> (boolean) - flag to include an extra storage unit for physical volumes</li>
    </ul></dd>
    <dt>Returns: list of tuples (string, string)</dt>
        <dd>list of storage units, each storage unit being a tuple of 
          (storage_type, storage_key); storage_type is in 
          <code>constants.STORAGE_TYPES</code> and the storage_key a string
          to identify an entity of that storage type, for example a volume 
          group name for LVM storage or a file for file storage.</dd>
  </dl>
</td></tr></table>
</div>
<a name="LookupSpaceInfoByStorageType"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">LookupSpaceInfoByStorageType</span>(<span class="sig-arg">storage_space_info</span>,
        <span class="sig-arg">storage_type</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.storage-pysrc.html#LookupSpaceInfoByStorageType">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Looks up the storage space info for a given storage type.</p>
  <p>Note that this lookup can be ambiguous if storage space reporting for 
  several units of the same storage type was requested. This function is 
  only supposed to be used for legacy code in situations where it actually 
  is unambiguous.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>storage_space_info</code></strong> (list of dicts) - result of <code>GetNodeInfo</code></li>
        <li><strong class="pname"><code>storage_type</code></strong> (string) - a storage type, which is included in the storage_units list</li>
    </ul></dd>
    <dt>Returns: tuple</dt>
        <dd>returns the element of storage_space_info that matches the given 
          storage type</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Wed Dec 30 13:42:34 2015
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
