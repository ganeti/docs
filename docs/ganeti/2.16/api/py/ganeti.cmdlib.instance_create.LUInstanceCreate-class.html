<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.cmdlib.instance_create.LUInstanceCreate</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.cmdlib-module.html">Package&nbsp;cmdlib</a> ::
        <a href="ganeti.cmdlib.instance_create-module.html">Module&nbsp;instance_create</a> ::
        Class&nbsp;LUInstanceCreate
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class LUInstanceCreate</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_ganeti_c_71" name="uml_class_diagram_for_ganeti_c_71">
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#HPATH" title="hash(x)" alt="" coords="17,233,501,252"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#HTYPE" title="hash(x)" alt="" coords="17,252,501,271"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#REQ_BGL" title="ganeti.cmdlib.instance_create.LUInstanceCreate.REQ_BGL" alt="" coords="17,271,501,289"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#CheckArguments" title="Check arguments." alt="" coords="17,292,501,311"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#ExpandNames" title="ExpandNames for CreateInstance." alt="" coords="17,311,501,329"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#DeclareLocks" title="Declare LU locking needs for a level" alt="" coords="17,329,501,348"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#BuildHooksEnv" title="Build hooks env." alt="" coords="17,348,501,367"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#BuildHooksNodes" title="Build hooks nodes." alt="" coords="17,367,501,385"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#CheckPrereq" title="Check prerequisites." alt="" coords="17,385,501,404"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#RunOsScripts" title="Run OS scripts" alt="" coords="17,404,501,423"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#GetOsInstallPackageEnvironment" title="Returns the OS scripts environment for the helper VM" alt="" coords="17,423,501,441"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#UpdateInstanceOsInstallPackage" title="Updates the OS parameter &#39;os&#45;install&#45;package&#39; for an instance." alt="" coords="17,441,501,460"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#RunOsScriptsVirtualized" title="Runs the OS scripts inside a safe virtualized environment." alt="" coords="17,460,501,479"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#Exec" title="Create and add the instance to the cluster." alt="" coords="17,479,501,497"/>
<area shape="rect" id="node195" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#PrepareRetry" title="Prepare the LU to run again." alt="" coords="17,497,501,516"/>
<area shape="rect" id="node1" href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html" title="Create an instance." alt="" coords="5,209,512,522"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#dry_run_result" title="the value (if any) that will be returned to the caller in dry&#45;run mode &#160;(signalled by opcode dry_run parameter)" alt="" coords="41,31,479,49"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#__init__" title="Constructor for LogicalUnit." alt="" coords="41,52,479,71"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#WConfdClient" title="ganeti.cmdlib.base.LogicalUnit.WConfdClient" alt="" coords="41,71,479,89"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#owned_locks" title="Return the list of locks owned by the LU at a given level." alt="" coords="41,89,479,108"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#release_request" title="Return a request to release the specified locks of the given level." alt="" coords="41,108,479,127"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#PreparePostHookNodes" title="Extend list of nodes to run the post LU hook." alt="" coords="41,127,479,145"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#HooksCallBack" title="Notify the LU about the results of its hooks." alt="" coords="41,145,479,164"/>
<area shape="rect" id="node196" href="ganeti.cmdlib.base.LogicalUnit-class.html#AssertReleasedLocks" title="Raise AssertionError if the LU holds some locks of the given level." alt="" coords="41,164,479,183"/>
<area shape="rect" id="node2" href="ganeti.cmdlib.base.LogicalUnit-class.html" title="Logical Unit base class." alt="" coords="29,6,491,189"/>
</map>
  <img src="uml_class_diagram_for_ganeti_c_71.gif" alt='' usemap="#uml_class_diagram_for_ganeti_c_71" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>Create an instance.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_CheckDiskTemplateValid"></a><span class="summary-sig-name">_CheckDiskTemplateValid</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Checks validity of disk template.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._CheckDiskTemplateValid">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_CheckDiskArguments"></a><span class="summary-sig-name">_CheckDiskArguments</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Checks validity of disk-related arguments.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._CheckDiskArguments">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_CheckVLANArguments"></a><span class="summary-sig-name">_CheckVLANArguments</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Check validity of VLANs if given</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._CheckVLANArguments">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#CheckArguments" class="summary-sig-name">CheckArguments</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Check arguments.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.CheckArguments">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#ExpandNames" class="summary-sig-name">ExpandNames</a>(<span class="summary-sig-arg">self</span>)</span><br />
      ExpandNames for CreateInstance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.ExpandNames">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#DeclareLocks" class="summary-sig-name">DeclareLocks</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">level</span>)</span><br />
      Declare LU locking needs for a level</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.DeclareLocks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_RunAllocator"></a><span class="summary-sig-name">_RunAllocator</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Run the allocator based on input opcode.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._RunAllocator">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#BuildHooksEnv" class="summary-sig-name">BuildHooksEnv</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Build hooks env.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.BuildHooksEnv">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple; (list, list)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#BuildHooksNodes" class="summary-sig-name">BuildHooksNodes</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Build hooks nodes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.BuildHooksNodes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#_ReadExportInfo" class="summary-sig-name" onclick="show_private();">_ReadExportInfo</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Reads the export information from disk.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._ReadExportInfo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#_ReadExportParams" class="summary-sig-name" onclick="show_private();">_ReadExportParams</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">einfo</span>)</span><br />
      Use export parameters as defaults.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._ReadExportParams">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_RevertToDefaults"></a><span class="summary-sig-name">_RevertToDefaults</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">cluster</span>)</span><br />
      Revert the instance parameters to the default values.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._RevertToDefaults">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_GetNodesFromForthcomingInstance"></a><span class="summary-sig-name">_GetNodesFromForthcomingInstance</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Set nodes as in the forthcoming instance</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._GetNodesFromForthcomingInstance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#CheckPrereq" class="summary-sig-name">CheckPrereq</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Check prerequisites.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.CheckPrereq">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">NoneType</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#_RemoveDegradedDisks" class="summary-sig-name" onclick="show_private();">_RemoveDegradedDisks</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">feedback_fn</span>,
        <span class="summary-sig-arg">disk_abort</span>,
        <span class="summary-sig-arg">instance</span>)</span><br />
      Removes degraded disks and instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._RemoveDegradedDisks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#RunOsScripts" class="summary-sig-name">RunOsScripts</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">feedback_fn</span>,
        <span class="summary-sig-arg">iobj</span>)</span><br />
      Run OS scripts</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.RunOsScripts">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict of string to string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#GetOsInstallPackageEnvironment" class="summary-sig-name">GetOsInstallPackageEnvironment</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">script</span>)</span><br />
      Returns the OS scripts environment for the helper VM</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.GetOsInstallPackageEnvironment">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#UpdateInstanceOsInstallPackage" class="summary-sig-name">UpdateInstanceOsInstallPackage</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">feedback_fn</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">override_env</span>)</span><br />
      Updates the OS parameter 'os-install-package' for an instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.UpdateInstanceOsInstallPackage">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#RunOsScriptsVirtualized" class="summary-sig-name">RunOsScriptsVirtualized</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">feedback_fn</span>,
        <span class="summary-sig-arg">instance</span>)</span><br />
      Runs the OS scripts inside a safe virtualized environment.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.RunOsScriptsVirtualized">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#Exec" class="summary-sig-name">Exec</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">feedback_fn</span>)</span><br />
      Create and add the instance to the cluster.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.Exec">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_create.LUInstanceCreate-class.html#PrepareRetry" class="summary-sig-name">PrepareRetry</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">feedback_fn</span>)</span><br />
      Prepare the LU to run again.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.PrepareRetry">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html">base.LogicalUnit</a></code></b>:
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#AssertReleasedLocks">AssertReleasedLocks</a></code>,
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#HooksCallBack">HooksCallBack</a></code>,
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#PreparePostHookNodes">PreparePostHookNodes</a></code>,
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#WConfdClient">WConfdClient</a></code>,
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#__init__">__init__</a></code>,
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#owned_locks">owned_locks</a></code>,
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#release_request">release_request</a></code>
      </p>
    <div class="private">    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html">base.LogicalUnit</a></code></b> (private):
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#_ExpandAndLockInstance" onclick="show_private();">_ExpandAndLockInstance</a></code>,
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#_LockInstancesNodes" onclick="show_private();">_LockInstancesNodes</a></code>
      </p></div>
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="HPATH"></a><span class="summary-name">HPATH</span> = <code title="&quot;instance-add&quot;">&quot;instance-add&quot;</code><br />
      hash(x)
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="HTYPE"></a><span class="summary-name">HTYPE</span> = <code title="constants.HTYPE_INSTANCE">constants.HTYPE_INSTANCE</code><br />
      hash(x)
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="REQ_BGL"></a><span class="summary-name">REQ_BGL</span> = <code title="False">False</code>
    </td>
  </tr>
</table>
<!-- ==================== INSTANCE VARIABLES ==================== -->
<a name="section-InstanceVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html">base.LogicalUnit</a></code></b>:
      <code><a href="ganeti.cmdlib.base.LogicalUnit-class.html#dry_run_result">dry_run_result</a></code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="CheckArguments"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckArguments</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.CheckArguments">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Check arguments.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#CheckArguments">base.LogicalUnit.CheckArguments</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="ExpandNames"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ExpandNames</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.ExpandNames">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>ExpandNames for CreateInstance.</p>
  <p>Figure out the right locks for instance creation.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#ExpandNames">base.LogicalUnit.ExpandNames</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="DeclareLocks"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">DeclareLocks</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">level</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.DeclareLocks">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Declare LU locking needs for a level</p>
  <p>While most LUs can just declare their locking needs at ExpandNames 
  time, sometimes there's the need to calculate some locks after having 
  acquired the ones before. This function is called just before acquiring 
  locks at a particular level, but after acquiring the ones at lower 
  levels, and permits such calculations. It can be used to modify 
  self.needed_locks, and by default it does nothing.</p>
  <p>This function is only called if you have something already set in 
  self.needed_locks for the level.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>level</code></strong> - Locking level which is going to be locked</li>
    </ul></dd>
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#DeclareLocks">base.LogicalUnit.DeclareLocks</a>
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="BuildHooksEnv"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">BuildHooksEnv</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.BuildHooksEnv">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Build hooks env.</p>
  <p>This runs on master, primary and secondary nodes of the instance.</p>
  <dl class="fields">
    <dt>Returns: dict</dt>
        <dd>Dictionary containing the environment that will be used for 
          running the hooks for this LU. The keys of the dict must not be 
          prefixed with &quot;GANETI_&quot;--that'll be added by the hooks 
          runner. The hooks runner will extend the environment with 
          additional variables. If no environment should be defined, an 
          empty dictionary should be returned (not <code>None</code>).</dd>
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#BuildHooksEnv">base.LogicalUnit.BuildHooksEnv</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="BuildHooksNodes"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">BuildHooksNodes</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.BuildHooksNodes">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Build hooks nodes.</p>
  <dl class="fields">
    <dt>Returns: tuple; (list, list)</dt>
        <dd>Tuple containing a list of node UUIDs on which the hook should 
          run before the execution and a list of node UUIDs on which the 
          hook should run after the execution. No nodes should be returned 
          as an empty list (and not None).</dd>
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#BuildHooksNodes">base.LogicalUnit.BuildHooksNodes</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="_ReadExportInfo"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ReadExportInfo</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._ReadExportInfo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Reads the export information from disk.</p>
  <p>It will override the opcode source node and path with the actual 
  information, if these two were not specified before.</p>
  <dl class="fields">
    <dt>Returns:</dt>
        <dd>the export information</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ReadExportParams"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ReadExportParams</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">einfo</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._ReadExportParams">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Use export parameters as defaults.</p>
  <p>In case the opcode doesn't specify (as in override) some instance 
  parameters, then try to use them from the export information, if that 
  declares them.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="CheckPrereq"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckPrereq</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.CheckPrereq">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Check prerequisites.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#CheckPrereq">base.LogicalUnit.CheckPrereq</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="_RemoveDegradedDisks"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_RemoveDegradedDisks</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">feedback_fn</span>,
        <span class="sig-arg">disk_abort</span>,
        <span class="sig-arg">instance</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate._RemoveDegradedDisks">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Removes degraded disks and instance.</p>
  <p>It optionally checks whether disks are degraded.  If the disks are 
  degraded, they are removed and the instance is also removed from the 
  configuration.</p>
  <p>If <code class="link">disk_abort</code> is True, then the disks are 
  considered degraded and removed, and the instance is removed from the 
  configuration.</p>
  <p>If <code class="link">disk_abort</code> is False, then it first checks
  whether disks are degraded and, if so, it removes the disks and the 
  instance is removed from the configuration.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>feedback_fn</code></strong> (callable) - function used send feedback back to the caller</li>
        <li><strong class="pname"><code>disk_abort</code></strong> (boolean) - True if disks are degraded, False to first check if disks are 
          degraded</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - instance containing the disks to check</li>
    </ul></dd>
    <dt>Returns: NoneType</dt>
        <dd>None</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if disks are degraded</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="RunOsScripts"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">RunOsScripts</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">feedback_fn</span>,
        <span class="sig-arg">iobj</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.RunOsScripts">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Run OS scripts</p>
  <p>If necessary, disks are paused.  It handles instance create, import, 
  and remote import.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>feedback_fn</code></strong> (callable) - function used send feedback back to the caller</li>
        <li><strong class="pname"><code>iobj</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - instance object</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="GetOsInstallPackageEnvironment"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetOsInstallPackageEnvironment</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">script</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.GetOsInstallPackageEnvironment">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns the OS scripts environment for the helper VM</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - instance for which the OS scripts are run</li>
        <li><strong class="pname"><code>script</code></strong> (string) - script to run (e.g., constants.OS_SCRIPT_CREATE_UNTRUSTED)</li>
    </ul></dd>
    <dt>Returns: dict of string to string</dt>
        <dd>OS scripts environment for the helper VM</dd>
  </dl>
</td></tr></table>
</div>
<a name="UpdateInstanceOsInstallPackage"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">UpdateInstanceOsInstallPackage</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">feedback_fn</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">override_env</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.UpdateInstanceOsInstallPackage">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Updates the OS parameter 'os-install-package' for an instance.</p>
  <p>The OS install package is an archive containing an OS definition and a
  file containing the environment variables needed to run the OS 
  scripts.</p>
  <p>The OS install package is served by the metadata daemon to the 
  instances, so the OS scripts can run inside the virtualized 
  environment.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>feedback_fn</code></strong> (callable) - function used send feedback back to the caller</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - instance for which the OS parameter 'os-install-package' is 
          updated</li>
        <li><strong class="pname"><code>override_env</code></strong> (dict of string to string) - if supplied, it overrides the environment of the export OS 
          scripts archive</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="RunOsScriptsVirtualized"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">RunOsScriptsVirtualized</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">feedback_fn</span>,
        <span class="sig-arg">instance</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.RunOsScriptsVirtualized">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Runs the OS scripts inside a safe virtualized environment.</p>
  <p>The virtualized environment reuses the instance and temporarily 
  creates a disk onto which the image of the helper VM is dumped. The 
  temporary disk is used to boot the helper VM.  The OS scripts are passed 
  to the helper VM through the metadata daemon and the OS install 
  package.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>feedback_fn</code></strong> (callable) - function used send feedback back to the caller</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - instance for which the OS scripts must be run inside the 
          virtualized environment</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="Exec"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">Exec</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">feedback_fn</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.Exec">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create and add the instance to the cluster.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#Exec">base.LogicalUnit.Exec</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="PrepareRetry"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">PrepareRetry</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">feedback_fn</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_create-pysrc.html#LUInstanceCreate.PrepareRetry">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Prepare the LU to run again.</p>
  <p>This method is called if the Exec failed for temporarily lacking 
  resources. It is expected to change the state of the LU so that it can be
  tried again, and also change its locking policy to acquire more resources
  to have a better chance of suceeding in the retry.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="ganeti.cmdlib.base.LogicalUnit-class.html#PrepareRetry">base.LogicalUnit.PrepareRetry</a>
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Apr 12 13:38:39 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
