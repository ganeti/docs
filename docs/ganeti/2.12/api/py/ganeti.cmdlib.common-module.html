<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.cmdlib.common</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.cmdlib-module.html">Package&nbsp;cmdlib</a> ::
        Module&nbsp;common
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.cmdlib.common-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module common</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html">source&nbsp;code</a></span></p>
<p>Common functions used by multiple logical units.</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#_ExpandItemName" class="summary-sig-name" onclick="show_private();">_ExpandItemName</a>(<span class="summary-sig-arg">expand_fn</span>,
        <span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">kind</span>)</span><br />
      Expand an item name.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_ExpandItemName">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="ExpandInstanceUuidAndName"></a><span class="summary-sig-name">ExpandInstanceUuidAndName</span>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">expected_uuid</span>,
        <span class="summary-sig-arg">name</span>)</span><br />
      Wrapper over <a 
      href="ganeti.cmdlib.common-module.html#_ExpandItemName" class="link" 
      onclick="show_private();">_ExpandItemName</a> for instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ExpandInstanceUuidAndName">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#ExpandNodeUuidAndName" class="summary-sig-name">ExpandNodeUuidAndName</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">expected_uuid</span>,
        <span class="summary-sig-arg">name</span>)</span><br />
      Expand a short node name into the node UUID and full name.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ExpandNodeUuidAndName">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="ShareAll"></a><span class="summary-sig-name">ShareAll</span>()</span><br />
      Returns a dict declaring all lock levels shared.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ShareAll">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckNodeGroupInstances" class="summary-sig-name">CheckNodeGroupInstances</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">group_uuid</span>,
        <span class="summary-sig-arg">owned_instance_names</span>)</span><br />
      Checks if the instances in a node group are still correct.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckNodeGroupInstances">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple of lists</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#GetWantedNodes" class="summary-sig-name">GetWantedNodes</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">short_node_names</span>)</span><br />
      Returns list of checked and expanded node names.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetWantedNodes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple of lists</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#GetWantedInstances" class="summary-sig-name">GetWantedInstances</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">short_inst_names</span>)</span><br />
      Returns list of checked and expanded instance names.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetWantedInstances">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="RunPostHook"></a><span class="summary-sig-name">RunPostHook</span>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_name</span>)</span><br />
      Runs the post-hook for an opcode on a single node.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#RunPostHook">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#RedistributeAncillaryFiles" class="summary-sig-name">RedistributeAncillaryFiles</a>(<span class="summary-sig-arg">lu</span>)</span><br />
      Distribute additional files which are part of the cluster 
      configuration.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#RedistributeAncillaryFiles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#ComputeAncillaryFiles" class="summary-sig-name">ComputeAncillaryFiles</a>(<span class="summary-sig-arg">cluster</span>,
        <span class="summary-sig-arg">redist</span>)</span><br />
      Compute files external to Ganeti which need to be consistent.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeAncillaryFiles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="UploadHelper"></a><span class="summary-sig-name">UploadHelper</span>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuids</span>,
        <span class="summary-sig-arg">fname</span>)</span><br />
      Helper for uploading a file and showing warnings.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#UploadHelper">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#MergeAndVerifyHvState" class="summary-sig-name">MergeAndVerifyHvState</a>(<span class="summary-sig-arg">op_input</span>,
        <span class="summary-sig-arg">obj_input</span>)</span><br />
      Combines the hv state from an opcode with the one of the object</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#MergeAndVerifyHvState">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#MergeAndVerifyDiskState" class="summary-sig-name">MergeAndVerifyDiskState</a>(<span class="summary-sig-arg">op_input</span>,
        <span class="summary-sig-arg">obj_input</span>)</span><br />
      Combines the disk state from an opcode with the one of the object</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#MergeAndVerifyDiskState">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckOSParams" class="summary-sig-name">CheckOSParams</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">required</span>,
        <span class="summary-sig-arg">node_uuids</span>,
        <span class="summary-sig-arg">osname</span>,
        <span class="summary-sig-arg">osparams</span>,
        <span class="summary-sig-arg">force_variant</span>)</span><br />
      OS parameters validation.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckOSParams">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckImageValidity" class="summary-sig-name">CheckImageValidity</a>(<span class="summary-sig-arg">image</span>,
        <span class="summary-sig-arg">error_message</span>)</span><br />
      Checks if a given image description is either a valid file path or a 
      URL.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckImageValidity">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string or NoneType</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckOSImage" class="summary-sig-name">CheckOSImage</a>(<span class="summary-sig-arg">op</span>)</span><br />
      Checks if the OS image in the OS parameters of an opcode is valid.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckOSImage">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckHVParams" class="summary-sig-name">CheckHVParams</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuids</span>,
        <span class="summary-sig-arg">hvname</span>,
        <span class="summary-sig-arg">hvparams</span>)</span><br />
      Hypervisor parameter validation.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckHVParams">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="AdjustCandidatePool"></a><span class="summary-sig-name">AdjustCandidatePool</span>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">exceptions</span>)</span><br />
      Adjust the candidate pool after node operations.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#AdjustCandidatePool">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="CheckNodePVs"></a><span class="summary-sig-name">CheckNodePVs</span>(<span class="summary-sig-arg">nresult</span>,
        <span class="summary-sig-arg">exclusive_storage</span>)</span><br />
      Check node PVs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckNodePVs">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#_ComputeMinMaxSpec" class="summary-sig-name" onclick="show_private();">_ComputeMinMaxSpec</a>(<span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">qualifier</span>,
        <span class="summary-sig-arg">ispecs</span>,
        <span class="summary-sig-arg">value</span>)</span><br />
      Computes if value is in the desired range.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_ComputeMinMaxSpec">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#ComputeIPolicySpecViolation" class="summary-sig-name">ComputeIPolicySpecViolation</a>(<span class="summary-sig-arg">ipolicy</span>,
        <span class="summary-sig-arg">mem_size</span>,
        <span class="summary-sig-arg">cpu_count</span>,
        <span class="summary-sig-arg">disk_count</span>,
        <span class="summary-sig-arg">nic_count</span>,
        <span class="summary-sig-arg">disk_sizes</span>,
        <span class="summary-sig-arg">spindle_use</span>,
        <span class="summary-sig-arg">disk_template</span>,
        <span class="summary-sig-arg">_compute_fn</span>=<span class="summary-sig-default">_ComputeMinMaxSpec</span>)</span><br />
      Verifies ipolicy against provided specs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeIPolicySpecViolation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#ComputeIPolicyDiskSizesViolation" class="summary-sig-name">ComputeIPolicyDiskSizesViolation</a>(<span class="summary-sig-arg">ipolicy</span>,
        <span class="summary-sig-arg">disk_sizes</span>,
        <span class="summary-sig-arg">disk_template</span>,
        <span class="summary-sig-arg">_compute_fn</span>=<span class="summary-sig-default">_ComputeMinMaxSpec</span>)</span><br />
      Verifies ipolicy against provided disk sizes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeIPolicyDiskSizesViolation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#ComputeIPolicyInstanceViolation" class="summary-sig-name">ComputeIPolicyInstanceViolation</a>(<span class="summary-sig-arg">ipolicy</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">_compute_fn</span>=<span class="summary-sig-default">ComputeIPolicySpecViolation</span>)</span><br />
      Compute if instance meets the specs of ipolicy.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeIPolicyInstanceViolation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#_ComputeViolatingInstances" class="summary-sig-name" onclick="show_private();">_ComputeViolatingInstances</a>(<span class="summary-sig-arg">ipolicy</span>,
        <span class="summary-sig-arg">instances</span>,
        <span class="summary-sig-arg">cfg</span>)</span><br />
      Computes a set of instances who violates given ipolicy.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_ComputeViolatingInstances">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#ComputeNewInstanceViolations" class="summary-sig-name">ComputeNewInstanceViolations</a>(<span class="summary-sig-arg">old_ipolicy</span>,
        <span class="summary-sig-arg">new_ipolicy</span>,
        <span class="summary-sig-arg">instances</span>,
        <span class="summary-sig-arg">cfg</span>)</span><br />
      Computes a set of any instances that would violate the new ipolicy.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeNewInstanceViolations">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#GetUpdatedParams" class="summary-sig-name">GetUpdatedParams</a>(<span class="summary-sig-arg">old_params</span>,
        <span class="summary-sig-arg">update_dict</span>,
        <span class="summary-sig-arg">use_default</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">use_none</span>=<span class="summary-sig-default">False</span>)</span><br />
      Return the new version of a parameter dictionary.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetUpdatedParams">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#GetUpdatedIPolicy" class="summary-sig-name">GetUpdatedIPolicy</a>(<span class="summary-sig-arg">old_ipolicy</span>,
        <span class="summary-sig-arg">new_ipolicy</span>,
        <span class="summary-sig-arg">group_policy</span>=<span class="summary-sig-default">False</span>)</span><br />
      Return the new version of an instance policy.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetUpdatedIPolicy">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#AnnotateDiskParams" class="summary-sig-name">AnnotateDiskParams</a>(<span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">devs</span>,
        <span class="summary-sig-arg">cfg</span>)</span><br />
      Little helper wrapper to the rpc annotation method.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#AnnotateDiskParams">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#SupportsOob" class="summary-sig-name">SupportsOob</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">node</span>)</span><br />
      Tells if node supports OOB.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#SupportsOob">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#_UpdateAndVerifySubDict" class="summary-sig-name" onclick="show_private();">_UpdateAndVerifySubDict</a>(<span class="summary-sig-arg">base</span>,
        <span class="summary-sig-arg">updates</span>,
        <span class="summary-sig-arg">type_check</span>)</span><br />
      Updates and verifies a dict with sub dicts of the same type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_UpdateAndVerifySubDict">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#_FilterVmNodes" class="summary-sig-name" onclick="show_private();">_FilterVmNodes</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuids</span>)</span><br />
      Filters out non-vm_capable nodes from a list.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_FilterVmNodes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#GetDefaultIAllocator" class="summary-sig-name">GetDefaultIAllocator</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">ialloc</span>)</span><br />
      Decides on which iallocator to use.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetDefaultIAllocator">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckInstancesNodeGroups" class="summary-sig-name">CheckInstancesNodeGroups</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">instances</span>,
        <span class="summary-sig-arg">owned_groups</span>,
        <span class="summary-sig-arg">owned_node_uuids</span>,
        <span class="summary-sig-arg">cur_group_uuid</span>)</span><br />
      Checks if node groups for locked instances are still correct.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckInstancesNodeGroups">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckInstanceNodeGroups" class="summary-sig-name">CheckInstanceNodeGroups</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">inst_uuid</span>,
        <span class="summary-sig-arg">owned_groups</span>,
        <span class="summary-sig-arg">primary_only</span>=<span class="summary-sig-default">False</span>)</span><br />
      Checks if the owned node groups are still correct for an instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckInstanceNodeGroups">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#LoadNodeEvacResult" class="summary-sig-name">LoadNodeEvacResult</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">alloc_result</span>,
        <span class="summary-sig-arg">early_release</span>,
        <span class="summary-sig-arg">use_nodes</span>)</span><br />
      Unpacks the result of change-group and node-evacuate iallocator 
      requests.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#LoadNodeEvacResult">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_NodeEvacDest"></a><span class="summary-sig-name">_NodeEvacDest</span>(<span class="summary-sig-arg">use_nodes</span>,
        <span class="summary-sig-arg">group</span>,
        <span class="summary-sig-arg">node_names</span>)</span><br />
      Returns group or nodes depending on caller's choice.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_NodeEvacDest">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_SetOpEarlyRelease"></a><span class="summary-sig-name">_SetOpEarlyRelease</span>(<span class="summary-sig-arg">early_release</span>,
        <span class="summary-sig-arg">op</span>)</span><br />
      Sets <code>early_release</code> flag on opcodes if available.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_SetOpEarlyRelease">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict; tuple of (node uuid, volume name) as key, <a 
      href="ganeti.objects.Instance-class.html" 
      class="link">objects.Instance</a> object as value</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#MapInstanceLvsToNodes" class="summary-sig-name">MapInstanceLvsToNodes</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">instances</span>)</span><br />
      Creates a map from (node, volume) to instance name.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#MapInstanceLvsToNodes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckParamsNotGlobal" class="summary-sig-name">CheckParamsNotGlobal</a>(<span class="summary-sig-arg">params</span>,
        <span class="summary-sig-arg">glob_pars</span>,
        <span class="summary-sig-arg">kind</span>,
        <span class="summary-sig-arg">bad_levels</span>,
        <span class="summary-sig-arg">good_levels</span>)</span><br />
      Make sure that none of the given paramters is global.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckParamsNotGlobal">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">bool</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#IsExclusiveStorageEnabledNode" class="summary-sig-name">IsExclusiveStorageEnabledNode</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">node</span>)</span><br />
      Whether exclusive_storage is in effect for the given node.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#IsExclusiveStorageEnabledNode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">bool</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#IsInstanceRunning" class="summary-sig-name">IsInstanceRunning</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">prereq</span>=<span class="summary-sig-default">True</span>)</span><br />
      Given an instance object, checks if the instance is running.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#IsInstanceRunning">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckInstanceState" class="summary-sig-name">CheckInstanceState</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">req_states</span>,
        <span class="summary-sig-arg">msg</span>=<span class="summary-sig-default">None</span>)</span><br />
      Ensure that an instance is in one of the required states.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckInstanceState">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckIAllocatorOrNode" class="summary-sig-name">CheckIAllocatorOrNode</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">iallocator_slot</span>,
        <span class="summary-sig-arg">node_slot</span>)</span><br />
      Check the sanity of iallocator and node arguments and use the 
      cluster-wide iallocator if appropriate.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckIAllocatorOrNode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="FindFaultyInstanceDisks"></a><span class="summary-sig-name">FindFaultyInstanceDisks</span>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">rpc_runner</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">node_uuid</span>,
        <span class="summary-sig-arg">prereq</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#FindFaultyInstanceDisks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckNodeOnline" class="summary-sig-name">CheckNodeOnline</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuid</span>,
        <span class="summary-sig-arg">msg</span>=<span class="summary-sig-default">None</span>)</span><br />
      Ensure that a given node is online.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckNodeOnline">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckDiskTemplateEnabled" class="summary-sig-name">CheckDiskTemplateEnabled</a>(<span class="summary-sig-arg">cluster</span>,
        <span class="summary-sig-arg">disk_template</span>)</span><br />
      Helper function to check if a disk template is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckDiskTemplateEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckStorageTypeEnabled" class="summary-sig-name">CheckStorageTypeEnabled</a>(<span class="summary-sig-arg">cluster</span>,
        <span class="summary-sig-arg">storage_type</span>)</span><br />
      Helper function to check if a storage type is enabled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckStorageTypeEnabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckIpolicyVsDiskTemplates" class="summary-sig-name">CheckIpolicyVsDiskTemplates</a>(<span class="summary-sig-arg">ipolicy</span>,
        <span class="summary-sig-arg">enabled_disk_templates</span>)</span><br />
      Checks ipolicy disk templates against enabled disk tempaltes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckIpolicyVsDiskTemplates">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckDiskAccessModeValidity" class="summary-sig-name">CheckDiskAccessModeValidity</a>(<span class="summary-sig-arg">parameters</span>)</span><br />
      Checks if the access parameter is legal.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckDiskAccessModeValidity">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#CheckDiskAccessModeConsistency" class="summary-sig-name">CheckDiskAccessModeConsistency</a>(<span class="summary-sig-arg">parameters</span>,
        <span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">group</span>=<span class="summary-sig-default">None</span>)</span><br />
      Checks if the access param is consistent with the cluster 
      configuration.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckDiskAccessModeConsistency">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#IsValidDiskAccessModeCombination" class="summary-sig-name">IsValidDiskAccessModeCombination</a>(<span class="summary-sig-arg">hv</span>,
        <span class="summary-sig-arg">disk_template</span>,
        <span class="summary-sig-arg">mode</span>)</span><br />
      Checks if an hypervisor can read a disk template with given mode.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#IsValidDiskAccessModeCombination">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#AddNodeCertToCandidateCerts" class="summary-sig-name">AddNodeCertToCandidateCerts</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">node_uuid</span>)</span><br />
      Add the node's client SSL certificate digest to the candidate certs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#AddNodeCertToCandidateCerts">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#RemoveNodeCertFromCandidateCerts" class="summary-sig-name">RemoveNodeCertFromCandidateCerts</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">node_uuid</span>)</span><br />
      Removes the node's certificate from the candidate certificates list.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#RemoveNodeCertFromCandidateCerts">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#GetClientCertDigest" class="summary-sig-name">GetClientCertDigest</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuid</span>,
        <span class="summary-sig-arg">filename</span>=<span class="summary-sig-default">None</span>)</span><br />
      Get the client SSL certificate digest for the node.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetClientCertDigest">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><a href="ganeti.opcodes.OpCode-class.html" 
      class="link">ganeti.opcodes.OpCode</a></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#AddInstanceCommunicationNetworkOp" class="summary-sig-name">AddInstanceCommunicationNetworkOp</a>(<span class="summary-sig-arg">network</span>)</span><br />
      Create an OpCode that adds the instance communication network.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#AddInstanceCommunicationNetworkOp">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><a href="ganeti.opcodes.OpCode-class.html" 
      class="link">ganeti.opcodes.OpCode</a></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#ConnectInstanceCommunicationNetworkOp" class="summary-sig-name">ConnectInstanceCommunicationNetworkOp</a>(<span class="summary-sig-arg">group_uuid</span>,
        <span class="summary-sig-arg">network</span>)</span><br />
      Create an OpCode that connects a group to the instance communication 
      network.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ConnectInstanceCommunicationNetworkOp">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">int</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#DetermineImageSize" class="summary-sig-name">DetermineImageSize</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">image</span>,
        <span class="summary-sig-arg">node_uuid</span>)</span><br />
      Determines the size of the specified image.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#DetermineImageSize">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.common-module.html#EnsureKvmdOnNodes" class="summary-sig-name">EnsureKvmdOnNodes</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">feedback_fn</span>,
        <span class="summary-sig-arg">nodes</span>=<span class="summary-sig-default">None</span>)</span><br />
      Ensure KVM daemon is running on nodes with KVM instances.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#EnsureKvmdOnNodes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="INSTANCE_DOWN"></a><span class="summary-name">INSTANCE_DOWN</span> = <code title="[constants.ADMINST_DOWN]">[constants.ADMINST_DOWN]</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="INSTANCE_ONLINE"></a><span class="summary-name">INSTANCE_ONLINE</span> = <code title="[constants.ADMINST_DOWN, constants.ADMINST_UP]">[constants.ADMINST_DOWN, constants.ADMINST_UP]</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.cmdlib.common-module.html#INSTANCE_NOT_RUNNING" class="summary-name">INSTANCE_NOT_RUNNING</a> = <code title="[constants.ADMINST_DOWN, constants.ADMINST_OFFLINE]">[constants.ADMINST_DOWN, constants.ADMI<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
</table>
<p class="indent-wrapped-lines"><b>Imports:</b>
  <span title="copy">copy</span>,
  <span title="math">math</span>,
  <span title="os">os</span>,
  <span title="urllib2">urllib2</span>,
  <a href="ganeti.compat-module.html" title="ganeti.compat">compat</a>,
  <a href="ganeti.constants-module.html" title="ganeti.constants">constants</a>,
  <a href="ganeti.errors-module.html" title="ganeti.errors">errors</a>,
  <a href="ganeti.hypervisor-module.html" title="ganeti.hypervisor">hypervisor</a>,
  <a href="ganeti.locking-module.html" title="ganeti.locking">locking</a>,
  <a href="ganeti.objects-module.html" title="ganeti.objects">objects</a>,
  <a href="ganeti.opcodes-module.html" title="ganeti.opcodes">opcodes</a>,
  <a href="ganeti.pathutils-module.html" title="ganeti.pathutils">pathutils</a>,
  <a href="ganeti.rpc.node-module.html" title="ganeti.rpc.node">rpc</a>,
  <a href="ganeti.serializer.Private-class.html" title="ganeti.serializer.Private">Private</a>,
  <a href="ganeti.ssconf-module.html" title="ganeti.ssconf">ssconf</a>,
  <a href="ganeti.utils-module.html" title="ganeti.utils">utils</a>
</p><br />
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_ExpandItemName"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ExpandItemName</span>(<span class="sig-arg">expand_fn</span>,
        <span class="sig-arg">name</span>,
        <span class="sig-arg">kind</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_ExpandItemName">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Expand an item name.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>expand_fn</code></strong> - the function to use for expansion</li>
        <li><strong class="pname"><code>name</code></strong> - requested item name</li>
        <li><strong class="pname"><code>kind</code></strong> - text description ('Node' or 'Instance')</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>the result of the expand_fn, if successful</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the item is not found</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="ExpandNodeUuidAndName"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ExpandNodeUuidAndName</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">expected_uuid</span>,
        <span class="sig-arg">name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ExpandNodeUuidAndName">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Expand a short node name into the node UUID and full name.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - The cluster configuration</li>
        <li><strong class="pname"><code>expected_uuid</code></strong> (string) - expected UUID for the node (or None if there is no expectation). 
          If it does not match, a <a 
          href="ganeti.errors.OpPrereqError-class.html" 
          class="link">errors.OpPrereqError</a> is raised.</li>
        <li><strong class="pname"><code>name</code></strong> (string) - the short node name</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckNodeGroupInstances"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckNodeGroupInstances</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">group_uuid</span>,
        <span class="sig-arg">owned_instance_names</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckNodeGroupInstances">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if the instances in a node group are still correct.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - The cluster configuration</li>
        <li><strong class="pname"><code>group_uuid</code></strong> (string) - Node group UUID</li>
        <li><strong class="pname"><code>owned_instance_names</code></strong> (set or frozenset) - List of currently owned instances</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="GetWantedNodes"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetWantedNodes</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">short_node_names</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetWantedNodes">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns list of checked and expanded node names.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit on whose behalf we execute</li>
        <li><strong class="pname"><code>short_node_names</code></strong> (list) - list of node names or None for all nodes</li>
    </ul></dd>
    <dt>Returns: tuple of lists</dt>
        <dd>tupe with (list of node UUIDs, list of node names)</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.ProgrammerError-class.html">errors.ProgrammerError</a></strong></code> - if the nodes parameter is wrong type</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="GetWantedInstances"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetWantedInstances</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">short_inst_names</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetWantedInstances">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns list of checked and expanded instance names.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit on whose behalf we execute</li>
        <li><strong class="pname"><code>short_inst_names</code></strong> (list) - list of instance names or None for all instances</li>
    </ul></dd>
    <dt>Returns: tuple of lists</dt>
        <dd>tuple of (instance UUIDs, instance names)</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the instances parameter is wrong type</li>
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if any of the passed instances is not found</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="RedistributeAncillaryFiles"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">RedistributeAncillaryFiles</span>(<span class="sig-arg">lu</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#RedistributeAncillaryFiles">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Distribute additional files which are part of the cluster 
  configuration.</p>
  <p>ConfigWriter takes care of distributing the config and ssconf files, 
  but there are more files which should be distributed to all nodes. This 
  function makes sure those are copied.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="ComputeAncillaryFiles"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ComputeAncillaryFiles</span>(<span class="sig-arg">cluster</span>,
        <span class="sig-arg">redist</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeAncillaryFiles">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute files external to Ganeti which need to be consistent.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>redist</code></strong> (boolean) - Whether to include files which need to be redistributed</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="MergeAndVerifyHvState"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">MergeAndVerifyHvState</span>(<span class="sig-arg">op_input</span>,
        <span class="sig-arg">obj_input</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#MergeAndVerifyHvState">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Combines the hv state from an opcode with the one of the object</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>op_input</code></strong> - The input dict from the opcode</li>
        <li><strong class="pname"><code>obj_input</code></strong> - The input dict from the objects</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>The verified and updated dict</dd>
  </dl>
</td></tr></table>
</div>
<a name="MergeAndVerifyDiskState"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">MergeAndVerifyDiskState</span>(<span class="sig-arg">op_input</span>,
        <span class="sig-arg">obj_input</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#MergeAndVerifyDiskState">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Combines the disk state from an opcode with the one of the object</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>op_input</code></strong> - The input dict from the opcode</li>
        <li><strong class="pname"><code>obj_input</code></strong> - The input dict from the objects</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>The verified and updated dict</dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckOSParams"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckOSParams</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">required</span>,
        <span class="sig-arg">node_uuids</span>,
        <span class="sig-arg">osname</span>,
        <span class="sig-arg">osparams</span>,
        <span class="sig-arg">force_variant</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckOSParams">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>OS parameters validation.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit for which we check</li>
        <li><strong class="pname"><code>required</code></strong> (boolean) - whether the validation should fail if the OS is not found</li>
        <li><strong class="pname"><code>node_uuids</code></strong> (list) - the list of nodes on which we should check</li>
        <li><strong class="pname"><code>osname</code></strong> (string) - the name of the OS we should use</li>
        <li><strong class="pname"><code>osparams</code></strong> (dict) - the parameters which we need to check</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the parameters are not valid</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckImageValidity"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckImageValidity</span>(<span class="sig-arg">image</span>,
        <span class="sig-arg">error_message</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckImageValidity">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if a given image description is either a valid file path or a 
  URL.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>image</code></strong> (string) - An absolute path or URL, the assumed location of a disk image.</li>
        <li><strong class="pname"><code>error_message</code></strong> (string) - The error message to show if the image is not valid.</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - If the validation fails.</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckOSImage"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckOSImage</span>(<span class="sig-arg">op</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckOSImage">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if the OS image in the OS parameters of an opcode is valid.</p>
  <p>This function can also be used in LUs as they carry an opcode.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>op</code></strong> (<a href="ganeti.opcodes.OpCode-class.html" 
          class="link">opcodes.OpCode</a>) - opcode containing the OS params</li>
    </ul></dd>
    <dt>Returns: string or NoneType</dt>
        <dd>None if the OS parameters in the opcode do not contain the OS 
          image, otherwise the OS image value contained in the OS 
          parameters</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if OS image is not a URL or an absolute path</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckHVParams"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckHVParams</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuids</span>,
        <span class="sig-arg">hvname</span>,
        <span class="sig-arg">hvparams</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckHVParams">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Hypervisor parameter validation.</p>
  <p>This function abstracts the hypervisor parameter validation to be used
  in both instance create and instance modify.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit for which we check</li>
        <li><strong class="pname"><code>node_uuids</code></strong> (list) - the list of nodes on which we should check</li>
        <li><strong class="pname"><code>hvname</code></strong> (string) - the name of the hypervisor we should use</li>
        <li><strong class="pname"><code>hvparams</code></strong> (dict) - the parameters which we need to check</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the parameters are not valid</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeMinMaxSpec"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeMinMaxSpec</span>(<span class="sig-arg">name</span>,
        <span class="sig-arg">qualifier</span>,
        <span class="sig-arg">ispecs</span>,
        <span class="sig-arg">value</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_ComputeMinMaxSpec">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Computes if value is in the desired range.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>name</code></strong> - name of the parameter for which we perform the check</li>
        <li><strong class="pname"><code>qualifier</code></strong> - a qualifier used in the error message (e.g. 'disk/1', not just 
          'disk')</li>
        <li><strong class="pname"><code>ispecs</code></strong> - dictionary containing min and max values</li>
        <li><strong class="pname"><code>value</code></strong> - actual value that we want to use</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>None or an error string</dd>
  </dl>
</td></tr></table>
</div>
<a name="ComputeIPolicySpecViolation"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ComputeIPolicySpecViolation</span>(<span class="sig-arg">ipolicy</span>,
        <span class="sig-arg">mem_size</span>,
        <span class="sig-arg">cpu_count</span>,
        <span class="sig-arg">disk_count</span>,
        <span class="sig-arg">nic_count</span>,
        <span class="sig-arg">disk_sizes</span>,
        <span class="sig-arg">spindle_use</span>,
        <span class="sig-arg">disk_template</span>,
        <span class="sig-arg">_compute_fn</span>=<span class="sig-default">_ComputeMinMaxSpec</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeIPolicySpecViolation">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Verifies ipolicy against provided specs.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ipolicy</code></strong> (dict) - The ipolicy</li>
        <li><strong class="pname"><code>mem_size</code></strong> (int) - The memory size</li>
        <li><strong class="pname"><code>cpu_count</code></strong> (int) - Used cpu cores</li>
        <li><strong class="pname"><code>disk_count</code></strong> (int) - Number of disks used</li>
        <li><strong class="pname"><code>nic_count</code></strong> (int) - Number of nics used</li>
        <li><strong class="pname"><code>disk_sizes</code></strong> (list of ints) - Disk sizes of used disk (len must match <code>disk_count</code>)</li>
        <li><strong class="pname"><code>spindle_use</code></strong> (int) - The number of spindles this instance uses</li>
        <li><strong class="pname"><code>disk_template</code></strong> (string) - The disk template of the instance</li>
        <li><strong class="pname"><code>_compute_fn</code></strong> - The compute function (unittest only)</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>A list of violations, or an empty list of no violations are found</dd>
  </dl>
</td></tr></table>
</div>
<a name="ComputeIPolicyDiskSizesViolation"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ComputeIPolicyDiskSizesViolation</span>(<span class="sig-arg">ipolicy</span>,
        <span class="sig-arg">disk_sizes</span>,
        <span class="sig-arg">disk_template</span>,
        <span class="sig-arg">_compute_fn</span>=<span class="sig-default">_ComputeMinMaxSpec</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeIPolicyDiskSizesViolation">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Verifies ipolicy against provided disk sizes.</p>
  <p>No other specs except the disk sizes, the number of disks and the disk
  template are checked.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ipolicy</code></strong> (dict) - The ipolicy</li>
        <li><strong class="pname"><code>disk_sizes</code></strong> (list of ints) - Disk sizes of used disk (len must match <code>disk_count</code>)</li>
        <li><strong class="pname"><code>disk_template</code></strong> (string) - The disk template of the instance</li>
        <li><strong class="pname"><code>_compute_fn</code></strong> - The compute function (unittest only)</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>A list of violations, or an empty list of no violations are found</dd>
  </dl>
</td></tr></table>
</div>
<a name="ComputeIPolicyInstanceViolation"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ComputeIPolicyInstanceViolation</span>(<span class="sig-arg">ipolicy</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">cfg</span>,
        <span class="sig-arg">_compute_fn</span>=<span class="sig-default">ComputeIPolicySpecViolation</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeIPolicyInstanceViolation">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute if instance meets the specs of ipolicy.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ipolicy</code></strong> (dict) - The ipolicy to verify against</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - The instance to verify</li>
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
        <li><strong class="pname"><code>_compute_fn</code></strong> - The function to verify ipolicy (unittest only)</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a 
        href="ganeti.cmdlib.common-module.html#ComputeIPolicySpecViolation"
        class="link">ComputeIPolicySpecViolation</a>
      </p>
</div></td></tr></table>
</div>
<a name="_ComputeViolatingInstances"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeViolatingInstances</span>(<span class="sig-arg">ipolicy</span>,
        <span class="sig-arg">instances</span>,
        <span class="sig-arg">cfg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_ComputeViolatingInstances">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Computes a set of instances who violates given ipolicy.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ipolicy</code></strong> - The ipolicy to verify</li>
        <li><strong class="pname"><code>instances</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - List of instances to verify</li>
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>A frozenset of instance names violating the ipolicy</dd>
  </dl>
</td></tr></table>
</div>
<a name="ComputeNewInstanceViolations"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ComputeNewInstanceViolations</span>(<span class="sig-arg">old_ipolicy</span>,
        <span class="sig-arg">new_ipolicy</span>,
        <span class="sig-arg">instances</span>,
        <span class="sig-arg">cfg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ComputeNewInstanceViolations">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Computes a set of any instances that would violate the new 
  ipolicy.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>old_ipolicy</code></strong> - The current (still in-place) ipolicy</li>
        <li><strong class="pname"><code>new_ipolicy</code></strong> - The new (to become) ipolicy</li>
        <li><strong class="pname"><code>instances</code></strong> - List of instances to verify</li>
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>A list of instances which violates the new ipolicy but did not 
          before</dd>
  </dl>
</td></tr></table>
</div>
<a name="GetUpdatedParams"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetUpdatedParams</span>(<span class="sig-arg">old_params</span>,
        <span class="sig-arg">update_dict</span>,
        <span class="sig-arg">use_default</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">use_none</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetUpdatedParams">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Return the new version of a parameter dictionary.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>old_params</code></strong> (dict) - old parameters</li>
        <li><strong class="pname"><code>update_dict</code></strong> (dict) - dict containing new parameter values, or constants.VALUE_DEFAULT 
          to reset the parameter to its default value</li>
        <li><strong class="pname"><code>use_default</code></strong> (whether to recognise constants.VALUE_DEFAULT values as 'to be 
          deleted' values) - boolean</li>
        <li><strong class="pname"><code>use_none</code></strong> (whether to recognise <code>None</code> values as 'to be deleted' 
          values) - boolean</li>
    </ul></dd>
    <dt>Returns: dict</dt>
        <dd>the new parameter dictionary</dd>
  </dl>
</td></tr></table>
</div>
<a name="GetUpdatedIPolicy"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetUpdatedIPolicy</span>(<span class="sig-arg">old_ipolicy</span>,
        <span class="sig-arg">new_ipolicy</span>,
        <span class="sig-arg">group_policy</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetUpdatedIPolicy">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Return the new version of an instance policy.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>group_policy</code></strong> - whether this policy applies to a group and thus we should support
          removal of policy entries</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="AnnotateDiskParams"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AnnotateDiskParams</span>(<span class="sig-arg">instance</span>,
        <span class="sig-arg">devs</span>,
        <span class="sig-arg">cfg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#AnnotateDiskParams">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Little helper wrapper to the rpc annotation method.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>instance</code></strong> - The instance object</li>
        <li><strong class="pname"><code>devs</code></strong> (List of <a href="ganeti.objects.Disk-class.html" 
          class="link">objects.Disk</a>) - The root devices (not any of its children!)</li>
        <li><strong class="pname"><code>cfg</code></strong> - The config object @returns The annotated disk copies @see <a 
          href="ganeti.rpc.node-module.html#AnnotateDiskParams" 
          class="link">ganeti.rpc.node.AnnotateDiskParams</a></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="SupportsOob"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">SupportsOob</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">node</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#SupportsOob">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Tells if node supports OOB.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - The cluster configuration</li>
        <li><strong class="pname"><code>node</code></strong> (<a href="ganeti.objects.Node-class.html" 
          class="link">objects.Node</a>) - The node</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>The OOB script if supported or an empty string otherwise</dd>
  </dl>
</td></tr></table>
</div>
<a name="_UpdateAndVerifySubDict"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_UpdateAndVerifySubDict</span>(<span class="sig-arg">base</span>,
        <span class="sig-arg">updates</span>,
        <span class="sig-arg">type_check</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_UpdateAndVerifySubDict">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Updates and verifies a dict with sub dicts of the same type.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>base</code></strong> - The dict with the old data</li>
        <li><strong class="pname"><code>updates</code></strong> - The dict with the new data</li>
        <li><strong class="pname"><code>type_check</code></strong> - Dict suitable to ForceDictType to verify correct types</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>A new dict with updated and verified values</dd>
  </dl>
</td></tr></table>
</div>
<a name="_FilterVmNodes"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_FilterVmNodes</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuids</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#_FilterVmNodes">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Filters out non-vm_capable nodes from a list.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit for which we check</li>
        <li><strong class="pname"><code>node_uuids</code></strong> (list) - the list of nodes on which we should check</li>
    </ul></dd>
    <dt>Returns: list</dt>
        <dd>the list of vm-capable nodes</dd>
  </dl>
</td></tr></table>
</div>
<a name="GetDefaultIAllocator"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetDefaultIAllocator</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">ialloc</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetDefaultIAllocator">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Decides on which iallocator to use.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration object</li>
        <li><strong class="pname"><code>ialloc</code></strong> (string or None) - Iallocator specified in opcode</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>Iallocator name</dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckInstancesNodeGroups"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckInstancesNodeGroups</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">instances</span>,
        <span class="sig-arg">owned_groups</span>,
        <span class="sig-arg">owned_node_uuids</span>,
        <span class="sig-arg">cur_group_uuid</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckInstancesNodeGroups">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if node groups for locked instances are still correct.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
        <li><strong class="pname"><code>instances</code></strong> (dict; string as key, <a href="ganeti.objects.Instance-class.html"
          class="link">objects.Instance</a> as value) - Dictionary, instance UUID as key, instance object as value</li>
        <li><strong class="pname"><code>owned_groups</code></strong> (iterable of string) - List of owned groups</li>
        <li><strong class="pname"><code>owned_node_uuids</code></strong> (iterable of string) - List of owned nodes</li>
        <li><strong class="pname"><code>cur_group_uuid</code></strong> (string or None) - Optional group UUID to check against instance's groups</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckInstanceNodeGroups"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckInstanceNodeGroups</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">inst_uuid</span>,
        <span class="sig-arg">owned_groups</span>,
        <span class="sig-arg">primary_only</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckInstanceNodeGroups">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if the owned node groups are still correct for an instance.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - The cluster configuration</li>
        <li><strong class="pname"><code>inst_uuid</code></strong> (string) - Instance UUID</li>
        <li><strong class="pname"><code>owned_groups</code></strong> (set or frozenset) - List of currently owned node groups</li>
        <li><strong class="pname"><code>primary_only</code></strong> (boolean) - Whether to check node groups for only the primary node</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="LoadNodeEvacResult"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">LoadNodeEvacResult</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">alloc_result</span>,
        <span class="sig-arg">early_release</span>,
        <span class="sig-arg">use_nodes</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#LoadNodeEvacResult">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Unpacks the result of change-group and node-evacuate iallocator 
  requests.</p>
  <p>Iallocator modes constants.IALLOCATOR_MODE_NODE_EVAC and 
  constants.IALLOCATOR_MODE_CHG_GROUP.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - Logical unit instance</li>
        <li><strong class="pname"><code>alloc_result</code></strong> (tuple/list) - Result from iallocator</li>
        <li><strong class="pname"><code>early_release</code></strong> (bool) - Whether to release locks early if possible</li>
        <li><strong class="pname"><code>use_nodes</code></strong> (bool) - Whether to display node names instead of groups</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="MapInstanceLvsToNodes"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">MapInstanceLvsToNodes</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">instances</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#MapInstanceLvsToNodes">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Creates a map from (node, volume) to instance name.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - The cluster configuration</li>
        <li><strong class="pname"><code>instances</code></strong> (list of <a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>)</li>
    </ul></dd>
    <dt>Returns: dict; tuple of (node uuid, volume name) as key, <a 
      href="ganeti.objects.Instance-class.html" 
      class="link">objects.Instance</a> object as value</dt>
  </dl>
</td></tr></table>
</div>
<a name="CheckParamsNotGlobal"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckParamsNotGlobal</span>(<span class="sig-arg">params</span>,
        <span class="sig-arg">glob_pars</span>,
        <span class="sig-arg">kind</span>,
        <span class="sig-arg">bad_levels</span>,
        <span class="sig-arg">good_levels</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckParamsNotGlobal">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Make sure that none of the given paramters is global.</p>
  <p>If a global parameter is found, an <a 
  href="ganeti.errors.OpPrereqError-class.html" 
  class="link">errors.OpPrereqError</a> exception is raised. This is used 
  to avoid setting global parameters for individual nodes.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>params</code></strong> (dictionary) - Parameters to check</li>
        <li><strong class="pname"><code>glob_pars</code></strong> (dictionary) - Forbidden parameters</li>
        <li><strong class="pname"><code>kind</code></strong> (string) - Kind of parameters (e.g. &quot;node&quot;)</li>
        <li><strong class="pname"><code>bad_levels</code></strong> (string) - Level(s) at which the parameters are forbidden (e.g. 
          &quot;instance&quot;)</li>
        <li><strong class="pname"><code>good_levels</code></strong> (strings) - Level(s) at which the parameters are allowed (e.g. &quot;cluster 
          or group&quot;)</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="IsExclusiveStorageEnabledNode"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">IsExclusiveStorageEnabledNode</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">node</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#IsExclusiveStorageEnabledNode">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Whether exclusive_storage is in effect for the given node.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - The cluster configuration</li>
        <li><strong class="pname"><code>node</code></strong> (<a href="ganeti.objects.Node-class.html" 
          class="link">objects.Node</a>) - The node</li>
    </ul></dd>
    <dt>Returns: bool</dt>
        <dd>The effective value of exclusive_storage</dd>
  </dl>
</td></tr></table>
</div>
<a name="IsInstanceRunning"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">IsInstanceRunning</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">prereq</span>=<span class="sig-default">True</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#IsInstanceRunning">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Given an instance object, checks if the instance is running.</p>
  <p>This function asks the backend whether the instance is running and 
  user shutdown instances are considered not to be running.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - LU on behalf of which we make the check</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - instance to check whether it is running</li>
    </ul></dd>
    <dt>Returns: bool</dt>
        <dd>'True' if the instance is running, 'False' otherwise</dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckInstanceState"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckInstanceState</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">req_states</span>,
        <span class="sig-arg">msg</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckInstanceState">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Ensure that an instance is in one of the required states.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> - the LU on behalf of which we make the check</li>
        <li><strong class="pname"><code>instance</code></strong> - the instance to check</li>
        <li><strong class="pname"><code>msg</code></strong> - if passed, should be a message to replace the default one</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the instance is not in the required state</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckIAllocatorOrNode"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckIAllocatorOrNode</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">iallocator_slot</span>,
        <span class="sig-arg">node_slot</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckIAllocatorOrNode">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Check the sanity of iallocator and node arguments and use the 
  cluster-wide iallocator if appropriate.</p>
  <p>Check that at most one of (iallocator, node) is specified. If none is 
  specified, or the iallocator is constants.DEFAULT_IALLOCATOR_SHORTCUT, 
  then the LU's opcode's iallocator slot is filled with the cluster-wide 
  default iallocator.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>iallocator_slot</code></strong> (string) - the name of the opcode iallocator slot</li>
        <li><strong class="pname"><code>node_slot</code></strong> (string) - the name of the opcode target node slot</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckNodeOnline"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckNodeOnline</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuid</span>,
        <span class="sig-arg">msg</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckNodeOnline">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Ensure that a given node is online.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> - the LU on behalf of which we make the check</li>
        <li><strong class="pname"><code>node_uuid</code></strong> - the node to check</li>
        <li><strong class="pname"><code>msg</code></strong> - if passed, should be a message to replace the default one</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the node is offline</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckDiskTemplateEnabled"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckDiskTemplateEnabled</span>(<span class="sig-arg">cluster</span>,
        <span class="sig-arg">disk_template</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckDiskTemplateEnabled">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Helper function to check if a disk template is enabled.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cluster</code></strong> (<code>objects.Cluster</code>) - the cluster's configuration</li>
        <li><strong class="pname"><code>disk_template</code></strong> (str) - the disk template to be checked</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckStorageTypeEnabled"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckStorageTypeEnabled</span>(<span class="sig-arg">cluster</span>,
        <span class="sig-arg">storage_type</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckStorageTypeEnabled">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Helper function to check if a storage type is enabled.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cluster</code></strong> (<code>objects.Cluster</code>) - the cluster's configuration</li>
        <li><strong class="pname"><code>storage_type</code></strong> (str) - the storage type to be checked</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckIpolicyVsDiskTemplates"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckIpolicyVsDiskTemplates</span>(<span class="sig-arg">ipolicy</span>,
        <span class="sig-arg">enabled_disk_templates</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckIpolicyVsDiskTemplates">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks ipolicy disk templates against enabled disk tempaltes.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ipolicy</code></strong> (dict) - the new ipolicy</li>
        <li><strong class="pname"><code>enabled_disk_templates</code></strong> (list of string) - list of enabled disk templates on the cluster</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if there is at least one allowed disk template that is not also 
        enabled.</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckDiskAccessModeValidity"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckDiskAccessModeValidity</span>(<span class="sig-arg">parameters</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckDiskAccessModeValidity">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if the access parameter is legal.</p>
  <dl class="fields">
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the check fails.</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a 
        href="ganeti.cmdlib.common-module.html#CheckDiskAccessModeConsistency"
        class="link">CheckDiskAccessModeConsistency</a> for cluster 
        consistency checks.
      </p>
</div></td></tr></table>
</div>
<a name="CheckDiskAccessModeConsistency"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckDiskAccessModeConsistency</span>(<span class="sig-arg">parameters</span>,
        <span class="sig-arg">cfg</span>,
        <span class="sig-arg">group</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#CheckDiskAccessModeConsistency">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if the access param is consistent with the cluster 
  configuration.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>parameters</code></strong> - the parameters to validate</li>
        <li><strong class="pname"><code>cfg</code></strong> - the cfg object of the cluster</li>
        <li><strong class="pname"><code>group</code></strong> - if set, only check for consistency within this group.</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the LU attempts to change the access parameter to an invalid 
        value, such as &quot;pink bunny&quot;.</li>
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the LU attempts to change the access parameter to an 
        inconsistent value, such as asking for RBD userspace access to the 
        chroot hypervisor.</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>Note:</strong>
        requires a configuration lock to run.
      </p>
</div></td></tr></table>
</div>
<a name="IsValidDiskAccessModeCombination"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">IsValidDiskAccessModeCombination</span>(<span class="sig-arg">hv</span>,
        <span class="sig-arg">disk_template</span>,
        <span class="sig-arg">mode</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#IsValidDiskAccessModeCombination">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if an hypervisor can read a disk template with given mode.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>hv</code></strong> - the hypervisor that will access the data</li>
        <li><strong class="pname"><code>disk_template</code></strong> - the disk template the data is stored as</li>
        <li><strong class="pname"><code>mode</code></strong> - how the hypervisor should access the data</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>True if the hypervisor can read a given read disk_template in the
          specified mode.</dd>
  </dl>
</td></tr></table>
</div>
<a name="AddNodeCertToCandidateCerts"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AddNodeCertToCandidateCerts</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">cfg</span>,
        <span class="sig-arg">node_uuid</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#AddNodeCertToCandidateCerts">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Add the node's client SSL certificate digest to the candidate 
  certs.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit</li>
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">ConfigWriter</a>) - the configuration client to use</li>
        <li><strong class="pname"><code>node_uuid</code></strong> (string) - the node's UUID</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="RemoveNodeCertFromCandidateCerts"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">RemoveNodeCertFromCandidateCerts</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">node_uuid</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#RemoveNodeCertFromCandidateCerts">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Removes the node's certificate from the candidate certificates 
  list.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cfg</code></strong> (<code>config.ConfigWriter</code>) - the cluster's configuration</li>
        <li><strong class="pname"><code>node_uuid</code></strong> (string) - the node's UUID</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="GetClientCertDigest"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GetClientCertDigest</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuid</span>,
        <span class="sig-arg">filename</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#GetClientCertDigest">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Get the client SSL certificate digest for the node.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>node_uuid</code></strong> (string) - the node's UUID</li>
        <li><strong class="pname"><code>filename</code></strong> (string) - the certificate's filename</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>the digest of the newly created certificate</dd>
  </dl>
</td></tr></table>
</div>
<a name="AddInstanceCommunicationNetworkOp"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AddInstanceCommunicationNetworkOp</span>(<span class="sig-arg">network</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#AddInstanceCommunicationNetworkOp">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create an OpCode that adds the instance communication network.</p>
  <p>This OpCode contains the configuration necessary for the instance 
  communication network.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>network</code></strong> (string) - name or UUID of the instance communication network</li>
    </ul></dd>
    <dt>Returns: <a href="ganeti.opcodes.OpCode-class.html" 
      class="link">ganeti.opcodes.OpCode</a></dt>
        <dd>OpCode that creates the instance communication network</dd>
  </dl>
</td></tr></table>
</div>
<a name="ConnectInstanceCommunicationNetworkOp"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ConnectInstanceCommunicationNetworkOp</span>(<span class="sig-arg">group_uuid</span>,
        <span class="sig-arg">network</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#ConnectInstanceCommunicationNetworkOp">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create an OpCode that connects a group to the instance communication 
  network.</p>
  <p>This OpCode contains the configuration necessary for the instance 
  communication network.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>group_uuid</code></strong> (string) - UUID of the group to connect</li>
        <li><strong class="pname"><code>network</code></strong> (string) - name or UUID of the network to connect to, i.e., the instance 
          communication network</li>
    </ul></dd>
    <dt>Returns: <a href="ganeti.opcodes.OpCode-class.html" 
      class="link">ganeti.opcodes.OpCode</a></dt>
        <dd>OpCode that connects the group to the instance communication 
          network</dd>
  </dl>
</td></tr></table>
</div>
<a name="DetermineImageSize"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">DetermineImageSize</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">image</span>,
        <span class="sig-arg">node_uuid</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#DetermineImageSize">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Determines the size of the specified image.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>image</code></strong> (string) - absolute filepath or URL of the image</li>
        <li><strong class="pname"><code>node_uuid</code></strong> (string) - if <code class="link">image</code> is a filepath, this is the 
          UUID of the node where the image is located</li>
    </ul></dd>
    <dt>Returns: int</dt>
        <dd>size of the image in MB, rounded up</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpExecError-class.html">OpExecError</a></strong></code> - if the image does not exist</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="EnsureKvmdOnNodes"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">EnsureKvmdOnNodes</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">feedback_fn</span>,
        <span class="sig-arg">nodes</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.common-pysrc.html#EnsureKvmdOnNodes">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Ensure KVM daemon is running on nodes with KVM instances.</p>
  <p>If user shutdown is enabled in the cluster:</p>
  <ul>
    <li>
      The KVM daemon will be started on VM capable nodes containing KVM 
      instances.
    </li>
    <li>
      The KVM daemon will be stopped on non VM capable nodes.
    </li>
  </ul>
  <p>If user shutdown is disabled in the cluster:</p>
  <ul>
    <li>
      The KVM daemon will be stopped on all nodes
    </li>
  </ul>
  <p>Issues a warning for each failed RPC call.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - logical unit on whose behalf we execute</li>
        <li><strong class="pname"><code>feedback_fn</code></strong> (callable) - feedback function</li>
        <li><strong class="pname"><code>nodes</code></strong> (list of string) - if supplied, it overrides the node uuids to start/stop; this is 
          used mainly for optimization</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== VARIABLES DETAILS ==================== -->
<a name="section-VariablesDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-VariablesDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="INSTANCE_NOT_RUNNING"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">INSTANCE_NOT_RUNNING</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
[constants.ADMINST_DOWN, constants.ADMINST_OFFLINE]
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Jan 12 17:28:40 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
