<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.utils.LogFileHandler</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.utils-module.html">Module&nbsp;utils</a> ::
        Class&nbsp;LogFileHandler
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.utils.LogFileHandler-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class LogFileHandler</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.utils-pysrc.html#LogFileHandler">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_ganeti_u_5" name="uml_class_diagram_for_ganeti_u_5">
<area shape="rect" href="ganeti.utils.LogFileHandler-class.html#__init__" title="Open the specified file and use it as the stream for logging." alt="" coords="17,503,319,521"/>
<area shape="rect" href="ganeti.utils.LogFileHandler-class.html#handleError" title="Handle errors which occur during an emit() call." alt="" coords="17,521,319,540"/>
<area shape="rect" href="ganeti.utils.LogFileHandler-class.html" title="Log handler that doesn&#39;t fallback to stderr." alt="" coords="16,477,320,541"/>
<area shape="rect" href="javascript:void(0);" title="Closes the stream." alt="" coords="112,409,224,428"/>
<area shape="rect" href="javascript:void(0);" title="Emit a record." alt="" coords="112,428,224,447"/>
<area shape="rect" href="javascript:void(0);" title="A handler class which writes formatted logging records to disk files." alt="" coords="111,384,225,448"/>
<area shape="rect" href="javascript:void(0);" title="Flushes the stream." alt="" coords="101,335,235,353"/>
<area shape="rect" href="javascript:void(0);" title="A handler class which writes logging records, appropriately formatted, to a stream." alt="" coords="100,309,236,355"/>
<area shape="rect" href="javascript:void(0);" title="Add the specified filter to this handler." alt="" coords="97,36,239,55"/>
<area shape="rect" href="javascript:void(0);" title="Remove the specified filter from this handler." alt="" coords="97,55,239,73"/>
<area shape="rect" href="javascript:void(0);" title="Determine if a record is loggable by consulting all the filters." alt="" coords="97,73,239,92"/>
<area shape="rect" href="javascript:void(0);" title="A base class for loggers and handlers which allows them to share common code." alt="" coords="96,11,240,93"/>
<area shape="rect" href="javascript:void(0);" title="Acquire a thread lock for serializing access to the underlying I/O." alt="" coords="100,148,236,167"/>
<area shape="rect" href="javascript:void(0);" title="Acquire the I/O thread lock." alt="" coords="100,167,236,185"/>
<area shape="rect" href="javascript:void(0);" title="Release the I/O thread lock." alt="" coords="100,185,236,204"/>
<area shape="rect" href="javascript:void(0);" title="Set the logging level of this handler." alt="" coords="100,204,236,223"/>
<area shape="rect" href="javascript:void(0);" title="Format the specified record." alt="" coords="100,223,236,241"/>
<area shape="rect" href="javascript:void(0);" title="Conditionally emit the specified logging record." alt="" coords="100,241,236,260"/>
<area shape="rect" href="javascript:void(0);" title="Set the formatter for this handler." alt="" coords="100,260,236,279"/>
<area shape="rect" href="javascript:void(0);" title="Handler instances dispatch logging events to specific destinations." alt="" coords="99,123,237,280"/>
</map>
  <img src="uml_class_diagram_for_ganeti_u_5.gif" alt='' usemap="#uml_class_diagram_for_ganeti_u_5" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>Log handler that doesn't fallback to stderr.</p>
  <p>When an error occurs while writing on the logfile, logging.FileHandler
  tries to log on stderr. This doesn't work in ganeti since stderr is 
  redirected to the logfile. This class avoids failures reporting errors to
  /dev/console.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.LogFileHandler-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">filename</span>,
        <span class="summary-sig-arg">mode</span>=<span class="summary-sig-default">&quot;a&quot;</span>,
        <span class="summary-sig-arg">encoding</span>=<span class="summary-sig-default">None</span>)</span><br />
      Open the specified file and use it as the stream for logging.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils-pysrc.html#LogFileHandler.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.LogFileHandler-class.html#handleError" class="summary-sig-name">handleError</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">record</span>)</span><br />
      Handle errors which occur during an emit() call.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils-pysrc.html#LogFileHandler.handleError">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>logging.FileHandler</code></b>:
      <code>close</code>,
      <code>emit</code>
      </p>
    <div class="private">    <p class="indent-wrapped-lines"><b>Inherited from <code>logging.FileHandler</code></b> (private):
      <code>_open</code>
      </p></div>
    <p class="indent-wrapped-lines"><b>Inherited from <code>logging.StreamHandler</code></b>:
      <code>flush</code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code>logging.Handler</code></b>:
      <code>acquire</code>,
      <code>createLock</code>,
      <code>format</code>,
      <code>handle</code>,
      <code>release</code>,
      <code>setFormatter</code>,
      <code>setLevel</code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code>logging.Filterer</code></b>:
      <code>addFilter</code>,
      <code>filter</code>,
      <code>removeFilter</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">filename</span>,
        <span class="sig-arg">mode</span>=<span class="sig-default">&quot;a&quot;</span>,
        <span class="sig-arg">encoding</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils-pysrc.html#LogFileHandler.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Open the specified file and use it as the stream for logging.</p>
  <p>Also open /dev/console to report errors while logging.</p>
  <dl class="fields">
    <dt>Overrides:
        logging.Filterer.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="handleError"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">handleError</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">record</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils-pysrc.html#LogFileHandler.handleError">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Handle errors which occur during an emit() call.</p>
  <p>Try to handle errors with FileHandler method, if it fails write to 
  /dev/console.</p>
  <dl class="fields">
    <dt>Overrides:
        logging.Handler.handleError
    </dt>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Dec  9 15:56:00 2010
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
