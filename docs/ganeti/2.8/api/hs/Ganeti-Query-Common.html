<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ganeti.Query.Common</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Ganeti-Query-Common.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="Ganeti/Query/Common.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ganeti</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Infered</td></tr></table><p class="caption">Ganeti.Query.Common</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Generic functions
</a></li><li><a href="#g:2">Result helpers
</a></li><li><a href="#g:3">Error conversion
</a></li><li><a href="#g:4">Common fields
</a></li><li><a href="#g:5">Generic parameter functions
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of the Ganeti Query2 common objects.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:vTypeToQFT">vTypeToQFT</a> :: <a href="Ganeti-Objects.html#t:VType">VType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a></li><li class="src short"><a href="#v:rsNoData">rsNoData</a> :: <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:rsUnavail">rsUnavail</a> :: <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:rsNormal">rsNormal</a> :: JSON a =&gt; a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:rsMaybeNoData">rsMaybeNoData</a> :: JSON a =&gt; Maybe a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:rsMaybeUnavail">rsMaybeUnavail</a> :: JSON a =&gt; Maybe a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:rsUnknown">rsUnknown</a> :: <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:missingRuntime">missingRuntime</a> ::  <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> a b</li><li class="src short"><a href="#v:rpcErrorToStatus">rpcErrorToStatus</a> :: <a href="Ganeti-Rpc.html#t:RpcError">RpcError</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultStatus">ResultStatus</a></li><li class="src short"><a href="#v:timeStampFields">timeStampFields</a> :: <a href="Ganeti-Objects.html#t:TimeStampObject">TimeStampObject</a> a =&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b</li><li class="src short"><a href="#v:uuidFields">uuidFields</a> :: <a href="Ganeti-Objects.html#t:UuidObject">UuidObject</a> a =&gt; String -&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b</li><li class="src short"><a href="#v:serialFields">serialFields</a> :: <a href="Ganeti-Objects.html#t:SerialNoObject">SerialNoObject</a> a =&gt; String -&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b</li><li class="src short"><a href="#v:tagsFields">tagsFields</a> :: <a href="Ganeti-Objects.html#t:TagsObject">TagsObject</a> a =&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b</li><li class="src short"><a href="#v:dictFieldGetter">dictFieldGetter</a> :: <a href="Ganeti-THH.html#t:DictObject">DictObject</a> a =&gt; String -&gt; Maybe a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:buildQFTLookup">buildQFTLookup</a> :: [(String, String)] -&gt; Map String <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a></li><li class="src short"><a href="#v:ndParamTypes">ndParamTypes</a> :: Map String <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a></li><li class="src short"><a href="#v:ndParamTitles">ndParamTitles</a> :: Map String <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a></li><li class="src short"><a href="#v:ndParamGetter">ndParamGetter</a> :: <a href="Ganeti-Config.html#t:NdParamObject">NdParamObject</a> a =&gt; String -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a></li><li class="src short"><a href="#v:buildNdParamField">buildNdParamField</a> :: <a href="Ganeti-Config.html#t:NdParamObject">NdParamObject</a> a =&gt; String -&gt; <a href="Ganeti-Query-Types.html#t:FieldData">FieldData</a> a b</li></ul></div><div id="interface"><h1 id="g:1">Generic functions
</h1><div class="top"><p class="src"><a name="v:vTypeToQFT" class="def">vTypeToQFT</a> :: <a href="Ganeti-Objects.html#t:VType">VType</a> -&gt; <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a><a href="Ganeti/Query/Common.html#vTypeToQFT" class="link">Source</a></p></div><h1 id="g:2">Result helpers
</h1><div class="top"><p class="src"><a name="v:rsNoData" class="def">rsNoData</a> :: <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#rsNoData" class="link">Source</a></p><div class="doc"><p>Helper for a result with no data.
</p></div></div><div class="top"><p class="src"><a name="v:rsUnavail" class="def">rsUnavail</a> :: <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#rsUnavail" class="link">Source</a></p><div class="doc"><p>Helper for result for an entity which supports no such field.
</p></div></div><div class="top"><p class="src"><a name="v:rsNormal" class="def">rsNormal</a> :: JSON a =&gt; a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#rsNormal" class="link">Source</a></p><div class="doc"><p>Helper to declare a normal result.
</p></div></div><div class="top"><p class="src"><a name="v:rsMaybeNoData" class="def">rsMaybeNoData</a> :: JSON a =&gt; Maybe a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#rsMaybeNoData" class="link">Source</a></p><div class="doc"><p>Helper to declare a result from a <code>Maybe</code> (the item might be
 missing, in which case we return no data). Note that there's some
 ambiguity here: in some cases, we mean <code><a href="Ganeti-Query-Language.html#v:RSNoData">RSNoData</a></code>, but in other
 <code><a href="Ganeti-Query-Language.html#v:RSUnavail">RSUnavail</a></code>; this is easy to solve in simple cases, but not in
 nested dicts. If you want to return <code><a href="Ganeti-Query-Language.html#v:RSUnavail">RSUnavail</a></code> in case of <code>Nothing</code>
 use the function <code><a href="Ganeti-Query-Common.html#v:rsMaybeUnavail">rsMaybeUnavail</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:rsMaybeUnavail" class="def">rsMaybeUnavail</a> :: JSON a =&gt; Maybe a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#rsMaybeUnavail" class="link">Source</a></p><div class="doc"><p>Helper to declare a result from a <code>Maybe</code>. This version returns
 a <code><a href="Ganeti-Query-Language.html#v:RSUnavail">RSUnavail</a></code> in case of <code>Nothing</code>. It should be used for optional
 fields that are not set. For cases where <code>Nothing</code> means that there
 was an error, consider using <code>rsMaybe</code> instead.
</p></div></div><div class="top"><p class="src"><a name="v:rsUnknown" class="def">rsUnknown</a> :: <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#rsUnknown" class="link">Source</a></p><div class="doc"><p>Helper for unknown field result.
</p></div></div><div class="top"><p class="src"><a name="v:missingRuntime" class="def">missingRuntime</a> ::  <a href="Ganeti-Query-Types.html#t:FieldGetter">FieldGetter</a> a b<a href="Ganeti/Query/Common.html#missingRuntime" class="link">Source</a></p><div class="doc"><p>Helper for a missing runtime parameter.
</p></div></div><h1 id="g:3">Error conversion
</h1><div class="top"><p class="src"><a name="v:rpcErrorToStatus" class="def">rpcErrorToStatus</a> :: <a href="Ganeti-Rpc.html#t:RpcError">RpcError</a> -&gt; <a href="Ganeti-Query-Language.html#t:ResultStatus">ResultStatus</a><a href="Ganeti/Query/Common.html#rpcErrorToStatus" class="link">Source</a></p><div class="doc"><p>Convert RpcError to ResultStatus
</p></div></div><h1 id="g:4">Common fields
</h1><div class="top"><p class="src"><a name="v:timeStampFields" class="def">timeStampFields</a> :: <a href="Ganeti-Objects.html#t:TimeStampObject">TimeStampObject</a> a =&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b<a href="Ganeti/Query/Common.html#timeStampFields" class="link">Source</a></p><div class="doc"><p>The list of timestamp fields.
</p></div></div><div class="top"><p class="src"><a name="v:uuidFields" class="def">uuidFields</a> :: <a href="Ganeti-Objects.html#t:UuidObject">UuidObject</a> a =&gt; String -&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b<a href="Ganeti/Query/Common.html#uuidFields" class="link">Source</a></p><div class="doc"><p>The list of UUID fields.
</p></div></div><div class="top"><p class="src"><a name="v:serialFields" class="def">serialFields</a> :: <a href="Ganeti-Objects.html#t:SerialNoObject">SerialNoObject</a> a =&gt; String -&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b<a href="Ganeti/Query/Common.html#serialFields" class="link">Source</a></p><div class="doc"><p>The list of serial number fields.
</p></div></div><div class="top"><p class="src"><a name="v:tagsFields" class="def">tagsFields</a> :: <a href="Ganeti-Objects.html#t:TagsObject">TagsObject</a> a =&gt; <a href="Ganeti-Query-Types.html#t:FieldList">FieldList</a> a b<a href="Ganeti/Query/Common.html#tagsFields" class="link">Source</a></p><div class="doc"><p>The list of tag fields.
</p></div></div><h1 id="g:5">Generic parameter functions
</h1><div class="top"><p class="src"><a name="v:dictFieldGetter" class="def">dictFieldGetter</a> :: <a href="Ganeti-THH.html#t:DictObject">DictObject</a> a =&gt; String -&gt; Maybe a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#dictFieldGetter" class="link">Source</a></p><div class="doc"><p>Returns a field from a (possibly missing) <code><a href="Ganeti-THH.html#t:DictObject">DictObject</a></code>. This is
 used by parameter dictionaries, usually. Note that we have two
 levels of maybe: the top level dict might be missing, or one key in
 the dictionary might be.
</p></div></div><div class="top"><p class="src"><a name="v:buildQFTLookup" class="def">buildQFTLookup</a> :: [(String, String)] -&gt; Map String <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a><a href="Ganeti/Query/Common.html#buildQFTLookup" class="link">Source</a></p><div class="doc"><p>Build an optimised lookup map from a Python _PARAMETER_TYPES
 association list.
</p></div></div><div class="top"><p class="src"><a name="v:ndParamTypes" class="def">ndParamTypes</a> :: Map String <a href="Ganeti-Query-Language.html#t:FieldType">FieldType</a><a href="Ganeti/Query/Common.html#ndParamTypes" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:ndParamTitles" class="def">ndParamTitles</a> :: Map String <a href="Ganeti-Query-Language.html#t:FieldTitle">FieldTitle</a><a href="Ganeti/Query/Common.html#ndParamTitles" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:ndParamGetter" class="def">ndParamGetter</a> :: <a href="Ganeti-Config.html#t:NdParamObject">NdParamObject</a> a =&gt; String -&gt; <a href="Ganeti-Objects.html#t:ConfigData">ConfigData</a> -&gt; a -&gt; <a href="Ganeti-Query-Language.html#t:ResultEntry">ResultEntry</a><a href="Ganeti/Query/Common.html#ndParamGetter" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:buildNdParamField" class="def">buildNdParamField</a> :: <a href="Ganeti-Config.html#t:NdParamObject">NdParamObject</a> a =&gt; String -&gt; <a href="Ganeti-Query-Types.html#t:FieldData">FieldData</a> a b<a href="Ganeti/Query/Common.html#buildNdParamField" class="link">Source</a></p><div class="doc"><p>Builds the ndparam fields for an object.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>