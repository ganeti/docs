<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.utils.text</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.utils-module.html">Package&nbsp;utils</a> ::
        Module&nbsp;text
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.utils.text-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module text</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.utils.text-pysrc.html">source&nbsp;code</a></span></p>
<p>Utility functions for manipulating or working with text.</p>

<!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Classes</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Classes"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.utils.text.ShellWriter-class.html" class="summary-name">ShellWriter</a><br />
      Helper class to write scripts with indentation.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.utils.text.LineSplitter-class.html" class="summary-name">LineSplitter</a><br />
      Splits data chunks into lines separated by newline.
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">None or str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#MatchNameComponent" class="summary-sig-name">MatchNameComponent</a>(<span class="summary-sig-arg">key</span>,
        <span class="summary-sig-arg">name_list</span>,
        <span class="summary-sig-arg">case_sensitive</span>=<span class="summary-sig-default">True</span>)</span><br />
      Try to match a name against a list.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#MatchNameComponent">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#_DnsNameGlobHelper" class="summary-sig-name" onclick="show_private();">_DnsNameGlobHelper</a>(<span class="summary-sig-arg">match</span>)</span><br />
      Helper function for <a 
      href="ganeti.utils.text-module.html#DnsNameGlobPattern" 
      class="link">DnsNameGlobPattern</a>.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#_DnsNameGlobHelper">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#DnsNameGlobPattern" class="summary-sig-name">DnsNameGlobPattern</a>(<span class="summary-sig-arg">pattern</span>)</span><br />
      Generates regular expression from DNS name globbing pattern.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#DnsNameGlobPattern">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#FormatUnit" class="summary-sig-name">FormatUnit</a>(<span class="summary-sig-arg">value</span>,
        <span class="summary-sig-arg">units</span>)</span><br />
      Formats an incoming number of MiB with the appropriate unit.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatUnit">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#ParseUnit" class="summary-sig-name">ParseUnit</a>(<span class="summary-sig-arg">input_string</span>)</span><br />
      Tries to extract number and scale from the given string.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#ParseUnit">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#ShellQuote" class="summary-sig-name">ShellQuote</a>(<span class="summary-sig-arg">value</span>)</span><br />
      Quotes shell argument according to POSIX.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#ShellQuote">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#ShellQuoteArgs" class="summary-sig-name">ShellQuoteArgs</a>(<span class="summary-sig-arg">args</span>)</span><br />
      Quotes a list of shell arguments.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#ShellQuoteArgs">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#GenerateSecret" class="summary-sig-name">GenerateSecret</a>(<span class="summary-sig-arg">numbytes</span>=<span class="summary-sig-default">20</span>)</span><br />
      Generates a random secret.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#GenerateSecret">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#NormalizeAndValidateMac" class="summary-sig-name">NormalizeAndValidateMac</a>(<span class="summary-sig-arg">mac</span>)</span><br />
      Normalizes and check if a MAC address is valid.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#NormalizeAndValidateMac">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#SafeEncode" class="summary-sig-name">SafeEncode</a>(<span class="summary-sig-arg">text</span>)</span><br />
      Return a 'safe' version of a source string.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#SafeEncode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#UnescapeAndSplit" class="summary-sig-name">UnescapeAndSplit</a>(<span class="summary-sig-arg">text</span>,
        <span class="summary-sig-arg">sep</span>=<span class="summary-sig-default">&quot;,&quot;</span>)</span><br />
      Split and unescape a string based on a given separator.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#UnescapeAndSplit">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#CommaJoin" class="summary-sig-name">CommaJoin</a>(<span class="summary-sig-arg">names</span>)</span><br />
      Nicely join a set of identifiers.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#CommaJoin">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#FormatTime" class="summary-sig-name">FormatTime</a>(<span class="summary-sig-arg">val</span>)</span><br />
      Formats a time value.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatTime">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#FormatSeconds" class="summary-sig-name">FormatSeconds</a>(<span class="summary-sig-arg">secs</span>)</span><br />
      Formats seconds for easier reading.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatSeconds">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">boolean</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#IsValidShellParam" class="summary-sig-name">IsValidShellParam</a>(<span class="summary-sig-arg">word</span>)</span><br />
      Verifies is the given word is safe from the shell's p.o.v.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#IsValidShellParam">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#BuildShellCmd" class="summary-sig-name">BuildShellCmd</a>(<span class="summary-sig-arg">template</span>,
        <span class="summary-sig-arg">*args</span>)</span><br />
      Build a safe shell command line from the given arguments.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#BuildShellCmd">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.utils.text-module.html#FormatOrdinal" class="summary-sig-name">FormatOrdinal</a>(<span class="summary-sig-arg">value</span>)</span><br />
      Formats a number as an ordinal in the English language.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatOrdinal">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="_PARSEUNIT_REGEX"></a><span class="summary-name">_PARSEUNIT_REGEX</span> = <code title="re.compile(r&quot;^([.\d]+)\s*([a-zA-Z]+)?$&quot;)">re.compile(r&quot;^([.\d]+)\s*([a-zA-Z]+)?$&quot;)</code><br />
      Unit checker regexp
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="_SHELL_UNQUOTED_RE"></a><span class="summary-name">_SHELL_UNQUOTED_RE</span> = <code title="re.compile(&quot;^[-.,=:/_+@A-Za-z0-9]+$&quot;)">re.compile(&quot;^[-.,=:/_+@A-Za-z0-9]+$&quot;)</code><br />
      Characters which don't need to be quoted for shell commands
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.utils.text-module.html#_MAC_CHECK_RE" class="summary-name" onclick="show_private();">_MAC_CHECK_RE</a> = <code title="re.compile(&quot;^([0-9a-f]{2}:){5}[0-9a-f]{2}$&quot;, re.I)">re.compile(&quot;^([0-9a-f]{2}:){5}[0-9a-f]{2}$&quot;, r<code class="variable-ellipsis">...</code></code><br />
      MAC checker regexp
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="_SHELLPARAM_REGEX"></a><span class="summary-name">_SHELLPARAM_REGEX</span> = <code title="re.compile(r&quot;^[-a-zA-Z0-9._+/:%@]+$&quot;)">re.compile(r&quot;^[-a-zA-Z0-9._+/:%@]+$&quot;)</code><br />
      Shell param checker regexp
    </td>
  </tr>
</table>
<p class="indent-wrapped-lines"><b>Imports:</b>
  <span title="re">re</span>,
  <span title="os">os</span>,
  <span title="time">time</span>,
  <span title="collections">collections</span>,
  <a href="ganeti.errors-module.html" title="ganeti.errors">errors</a>
</p><br />
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="MatchNameComponent"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">MatchNameComponent</span>(<span class="sig-arg">key</span>,
        <span class="sig-arg">name_list</span>,
        <span class="sig-arg">case_sensitive</span>=<span class="sig-default">True</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#MatchNameComponent">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Try to match a name against a list.</p>
  <p>This function will try to match a name like test1 against a list like 
  <code>['test1.example.com', 'test2.example.com', ...]</code>. Against 
  this list, <i>'test1'</i> as well as <i>'test1.example'</i> will match, 
  but not <i>'test1.ex'</i>. A multiple match will be considered as no 
  match at all (e.g. <i>'test1'</i> against <code>['test1.example.com', 
  'test1.example.org']</code>), except when the key fully matches an entry 
  (e.g. <i>'test1'</i> against <code>['test1', 
  'test1.example.com']</code>).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>key</code></strong> (str) - the name to be searched</li>
        <li><strong class="pname"><code>name_list</code></strong> (list) - the list of strings against which to search the key</li>
        <li><strong class="pname"><code>case_sensitive</code></strong> (boolean) - whether to provide a case-sensitive match</li>
    </ul></dd>
    <dt>Returns: None or str</dt>
        <dd>None if there is no match <i>or</i> if there are multiple 
          matches, otherwise the element from the list which matches</dd>
  </dl>
</td></tr></table>
</div>
<a name="_DnsNameGlobHelper"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_DnsNameGlobHelper</span>(<span class="sig-arg">match</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#_DnsNameGlobHelper">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Helper function for <a 
  href="ganeti.utils.text-module.html#DnsNameGlobPattern" 
  class="link">DnsNameGlobPattern</a>.</p>
  <p>Returns regular expression pattern for parts of the pattern.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="DnsNameGlobPattern"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">DnsNameGlobPattern</span>(<span class="sig-arg">pattern</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#DnsNameGlobPattern">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Generates regular expression from DNS name globbing pattern.</p>
  <p>A DNS name globbing pattern (e.g. <code>*.site</code>) is converted to
  a regular expression. Escape sequences or ranges (e.g. [a-z]) are not 
  supported.</p>
  <p>Matching always starts at the leftmost part. An asterisk (*) matches 
  all characters except the dot (.) separating DNS name parts. A question 
  mark (?) matches a single character except the dot (.).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>pattern</code></strong> (string) - DNS name globbing pattern</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>Regular expression</dd>
  </dl>
</td></tr></table>
</div>
<a name="FormatUnit"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">FormatUnit</span>(<span class="sig-arg">value</span>,
        <span class="sig-arg">units</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatUnit">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Formats an incoming number of MiB with the appropriate unit.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>value</code></strong> (int) - integer representing the value in MiB (1048576)</li>
        <li><strong class="pname"><code>units</code></strong> (char) - the type of formatting we should do:
          <ul>
            <li>
              'h' for automatic scaling
            </li>
            <li>
              'm' for MiBs
            </li>
            <li>
              'g' for GiBs
            </li>
            <li>
              't' for TiBs
            </li>
          </ul></li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>the formatted value (with suffix)</dd>
  </dl>
</td></tr></table>
</div>
<a name="ParseUnit"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ParseUnit</span>(<span class="sig-arg">input_string</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#ParseUnit">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Tries to extract number and scale from the given string.</p>
  <p>Input must be in the format <code>NUMBER+ [DOT NUMBER+] SPACE* 
  [UNIT]</code>. If no unit is specified, it defaults to MiB. Return value 
  is always an int in MiB.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="ShellQuote"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ShellQuote</span>(<span class="sig-arg">value</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#ShellQuote">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Quotes shell argument according to POSIX.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>value</code></strong> (str) - the argument to be quoted</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>the quoted value</dd>
  </dl>
</td></tr></table>
</div>
<a name="ShellQuoteArgs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ShellQuoteArgs</span>(<span class="sig-arg">args</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#ShellQuoteArgs">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Quotes a list of shell arguments.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>args</code></strong> (list) - list of arguments to be quoted</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>the quoted arguments concatenated with spaces</dd>
  </dl>
</td></tr></table>
</div>
<a name="GenerateSecret"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">GenerateSecret</span>(<span class="sig-arg">numbytes</span>=<span class="sig-default">20</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#GenerateSecret">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Generates a random secret.</p>
  <p>This will generate a pseudo-random secret returning an hex string (so 
  that it can be used where an ASCII string is needed).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>numbytes</code></strong> - the number of bytes which will be represented by the returned 
          string (defaulting to 20, the length of a SHA1 hash)</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>an hex representation of the pseudo-random sequence</dd>
  </dl>
</td></tr></table>
</div>
<a name="NormalizeAndValidateMac"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">NormalizeAndValidateMac</span>(<span class="sig-arg">mac</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#NormalizeAndValidateMac">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Normalizes and check if a MAC address is valid.</p>
  <p>Checks whether the supplied MAC address is formally correct, only 
  accepts colon separated format. Normalize it to all lower.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>mac</code></strong> (str) - the MAC to be validated</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>returns the normalized and validated MAC.</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - If the MAC isn't valid</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="SafeEncode"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">SafeEncode</span>(<span class="sig-arg">text</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#SafeEncode">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Return a 'safe' version of a source string.</p>
  <p>This function mangles the input string and returns a version that 
  should be safe to display/encode as ASCII. To this end, we first convert 
  it to ASCII using the 'backslashreplace' encoding which should get rid of
  any non-ASCII chars, and then we process it through a loop copied from 
  the string repr sources in the python; we don't use string_escape anymore
  since that escape single quotes and backslashes too, and that is too 
  much; and that escaping is not stable, i.e. 
  string_escape(string_escape(x)) != string_escape(x).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>text</code></strong> (str or unicode) - input data</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>a safe version of text</dd>
  </dl>
</td></tr></table>
</div>
<a name="UnescapeAndSplit"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">UnescapeAndSplit</span>(<span class="sig-arg">text</span>,
        <span class="sig-arg">sep</span>=<span class="sig-default">&quot;,&quot;</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#UnescapeAndSplit">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Split and unescape a string based on a given separator.</p>
  <p>This function splits a string based on a separator where the separator
  itself can be escape in order to be an element of the elements. The 
  escaping rules are (assuming coma being the separator):</p>
  <ul>
    <li>
      a plain , separates the elements
    </li>
    <li>
      a sequence \\, (double backslash plus comma) is handled as a 
      backslash plus a separator comma
    </li>
    <li>
      a sequence \, (backslash plus comma) is handled as a non-separator 
      comma
    </li>
  </ul>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>text</code></strong> (string) - the string to split</li>
        <li><strong class="pname"><code>text</code></strong> (string) - the separator</li>
        <li><strong class="pname"><code>sep</code></strong> (string)</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>a list of strings</dd>
  </dl>
</td></tr></table>
</div>
<a name="CommaJoin"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CommaJoin</span>(<span class="sig-arg">names</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#CommaJoin">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Nicely join a set of identifiers.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>names</code></strong> - set, list or tuple</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>a string with the formatted results</dd>
  </dl>
</td></tr></table>
</div>
<a name="FormatTime"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">FormatTime</span>(<span class="sig-arg">val</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatTime">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Formats a time value.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>val</code></strong> (float or None) - Timestamp as returned by time.time() (seconds since Epoch, 
          1970-01-01 00:00:00 UTC)</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>a string value or N/A if we don't have a valid timestamp</dd>
  </dl>
</td></tr></table>
</div>
<a name="FormatSeconds"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">FormatSeconds</span>(<span class="sig-arg">secs</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatSeconds">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Formats seconds for easier reading.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>secs</code></strong> (number) - Number of seconds</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>Formatted seconds (e.g. &quot;2d 9h 19m 49s&quot;)</dd>
  </dl>
</td></tr></table>
</div>
<a name="IsValidShellParam"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">IsValidShellParam</span>(<span class="sig-arg">word</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#IsValidShellParam">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Verifies is the given word is safe from the shell's p.o.v.</p>
  <p>This means that we can pass this to a command via the shell and be 
  sure that it doesn't alter the command line and is passed as such to the 
  actual command.</p>
  <p>Note that we are overly restrictive here, in order to be on the safe 
  side.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>word</code></strong> (str) - the word to check</li>
    </ul></dd>
    <dt>Returns: boolean</dt>
        <dd>True if the word is 'safe'</dd>
  </dl>
</td></tr></table>
</div>
<a name="BuildShellCmd"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">BuildShellCmd</span>(<span class="sig-arg">template</span>,
        <span class="sig-arg">*args</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#BuildShellCmd">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Build a safe shell command line from the given arguments.</p>
  <p>This function will check all arguments in the args list so that they 
  are valid shell parameters (i.e. they don't contain shell 
  metacharacters). If everything is ok, it will return the result of 
  template % args.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>template</code></strong> (str) - the string holding the template for the string formatting</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>the expanded command line</dd>
  </dl>
</td></tr></table>
</div>
<a name="FormatOrdinal"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">FormatOrdinal</span>(<span class="sig-arg">value</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.utils.text-pysrc.html#FormatOrdinal">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Formats a number as an ordinal in the English language.</p>
  <p>E.g. the number 1 becomes &quot;1st&quot;, 22 becomes 
  &quot;22nd&quot;.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>value</code></strong> (integer) - Number</li>
    </ul></dd>
    <dt>Returns: string</dt>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== VARIABLES DETAILS ==================== -->
<a name="section-VariablesDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-VariablesDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_MAC_CHECK_RE"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_MAC_CHECK_RE</h3>
  <p>MAC checker regexp</p>
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
re.compile(&quot;^([0-9a-f]{2}:){5}[0-9a-f]{2}$&quot;, re.I)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Jul 24 16:51:20 2012
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
