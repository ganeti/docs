<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.jqueue.JobQueue</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.jqueue-module.html">Module&nbsp;jqueue</a> ::
        Class&nbsp;JobQueue
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.jqueue.JobQueue-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class JobQueue</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_ganeti_j_2" name="uml_class_diagram_for_ganeti_j_2">
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#__init__" title="Constructor for JobQueue." alt="" coords="17,36,484,55"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#AddNode" title="Register a new node with the queue." alt="" coords="17,55,484,73"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#RemoveNode" title="Callback called when removing nodes from the cluster." alt="" coords="17,73,484,92"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#SetDrainFlag" title="Sets the drain flag for the queue." alt="" coords="17,92,484,111"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#SubmitJob" title="Create and store a new job." alt="" coords="17,111,484,129"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#SubmitManyJobs" title="Create and store multiple jobs." alt="" coords="17,129,484,148"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#UpdateJobUnlocked" title="Update a job&#39;s on disk storage." alt="" coords="17,148,484,167"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#WaitForJobChanges" title="Waits for changes in a job." alt="" coords="17,167,484,185"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#CancelJob" title="Cancels a job." alt="" coords="17,185,484,204"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#CancelJobUnlocked" title="Marks a job as canceled." alt="" coords="17,204,484,223"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#ArchiveJob" title="Archives a job." alt="" coords="17,223,484,241"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#AutoArchiveJobs" title="Archives all jobs based on age." alt="" coords="17,241,484,260"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#QueryJobs" title="Returns a list of jobs in queue." alt="" coords="17,260,484,279"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html#Shutdown" title="Stops the job queue." alt="" coords="17,279,484,297"/>
<area shape="rect" href="ganeti.jqueue.JobQueue-class.html" title="Queue used to manage the jobs." alt="" coords="16,11,485,299"/>
</map>
  <img src="uml_class_diagram_for_ganeti_j_2.gif" alt='' usemap="#uml_class_diagram_for_ganeti_j_2" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>Queue used to manage the jobs.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">context</span>)</span><br />
      Constructor for JobQueue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#AddNode" class="summary-sig-name">AddNode</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">node</span>)</span><br />
      Register a new node with the queue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.AddNode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#RemoveNode" class="summary-sig-name">RemoveNode</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">node_name</span>)</span><br />
      Callback called when removing nodes from the cluster.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.RemoveNode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">(list, list)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_GetNodeIp" class="summary-sig-name" onclick="show_private();">_GetNodeIp</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Helper for returning the node name/ip list.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetNodeIp">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_WriteAndReplicateFileUnlocked" class="summary-sig-name" onclick="show_private();">_WriteAndReplicateFileUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">file_name</span>,
        <span class="summary-sig-arg">data</span>)</span><br />
      Writes a file locally and then replicates it to all nodes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._WriteAndReplicateFileUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_RenameFilesUnlocked" class="summary-sig-name" onclick="show_private();">_RenameFilesUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">rename</span>)</span><br />
      Renames a file locally and then replicate the change.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._RenameFilesUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_NewSerialsUnlocked" class="summary-sig-name" onclick="show_private();">_NewSerialsUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">count</span>)</span><br />
      Generates a new job identifier.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._NewSerialsUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_GetJobIDsUnlocked" class="summary-sig-name" onclick="show_private();">_GetJobIDsUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">archived</span>=<span class="summary-sig-default">False</span>)</span><br />
      Return all known job IDs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobIDsUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_ListJobFiles" class="summary-sig-name" onclick="show_private();">_ListJobFiles</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns the list of current job files.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._ListJobFiles">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><a href="ganeti.jqueue._QueuedJob-class.html" class="link" 
      onclick="show_private();">_QueuedJob</a> or None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_LoadJobUnlocked" class="summary-sig-name" onclick="show_private();">_LoadJobUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job_id</span>)</span><br />
      Loads a job from the disk or memory.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._LoadJobUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_GetJobsUnlocked" class="summary-sig-name" onclick="show_private();">_GetJobsUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job_ids</span>)</span><br />
      Return a list of jobs based on their IDs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobsUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">job ID</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_SubmitJobUnlocked" class="summary-sig-name" onclick="show_private();">_SubmitJobUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job_id</span>,
        <span class="summary-sig-arg">ops</span>)</span><br />
      Create and store a new job.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._SubmitJobUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#SubmitJob" class="summary-sig-name">SubmitJob</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">ops</span>)</span><br />
      Create and store a new job.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.SubmitJob">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#SubmitManyJobs" class="summary-sig-name">SubmitManyJobs</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">jobs</span>)</span><br />
      Create and store multiple jobs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.SubmitManyJobs">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#UpdateJobUnlocked" class="summary-sig-name">UpdateJobUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job</span>)</span><br />
      Update a job's on disk storage.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.UpdateJobUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple (job info, log entries)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#WaitForJobChanges" class="summary-sig-name">WaitForJobChanges</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job_id</span>,
        <span class="summary-sig-arg">fields</span>,
        <span class="summary-sig-arg">prev_job_info</span>,
        <span class="summary-sig-arg">prev_log_serial</span>,
        <span class="summary-sig-arg">timeout</span>)</span><br />
      Waits for changes in a job.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.WaitForJobChanges">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#CancelJob" class="summary-sig-name">CancelJob</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job_id</span>)</span><br />
      Cancels a job.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.CancelJob">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#CancelJobUnlocked" class="summary-sig-name">CancelJobUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job</span>)</span><br />
      Marks a job as canceled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.CancelJobUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">int</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_ArchiveJobsUnlocked" class="summary-sig-name" onclick="show_private();">_ArchiveJobsUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">jobs</span>)</span><br />
      Archives jobs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._ArchiveJobsUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">bool</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#ArchiveJob" class="summary-sig-name">ArchiveJob</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job_id</span>)</span><br />
      Archives a job.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.ArchiveJob">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#AutoArchiveJobs" class="summary-sig-name">AutoArchiveJobs</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">age</span>,
        <span class="summary-sig-arg">timeout</span>)</span><br />
      Archives all jobs based on age.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.AutoArchiveJobs">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#QueryJobs" class="summary-sig-name">QueryJobs</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">job_ids</span>,
        <span class="summary-sig-arg">fields</span>)</span><br />
      Returns a list of jobs in queue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.QueryJobs">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#Shutdown" class="summary-sig-name">Shutdown</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Stops the job queue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.Shutdown">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS METHODS ==================== -->
<a name="section-ClassMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_GetArchiveDirectory" class="summary-sig-name" onclick="show_private();">_GetArchiveDirectory</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">job_id</span>)</span><br />
      Returns the archive directory for a job.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetArchiveDirectory">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_GetArchivedJobPath" class="summary-sig-name" onclick="show_private();">_GetArchivedJobPath</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">job_id</span>)</span><br />
      Returns the archived job file for a give job id.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetArchivedJobPath">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">job id or None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_ExtractJobID" class="summary-sig-name" onclick="show_private();">_ExtractJobID</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">name</span>)</span><br />
      Extract the job id from a filename.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._ExtractJobID">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== STATIC METHODS ==================== -->
<a name="section-StaticMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Static Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-StaticMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_CheckRpcResult" class="summary-sig-name" onclick="show_private();">_CheckRpcResult</a>(<span class="summary-sig-arg">result</span>,
        <span class="summary-sig-arg">nodes</span>,
        <span class="summary-sig-arg">failmsg</span>)</span><br />
      Verifies the status of an RPC call.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._CheckRpcResult">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_FormatJobID" class="summary-sig-name" onclick="show_private();">_FormatJobID</a>(<span class="summary-sig-arg">job_id</span>)</span><br />
      Convert a job ID to string format.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._FormatJobID">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_GetJobPath" class="summary-sig-name" onclick="show_private();">_GetJobPath</a>(<span class="summary-sig-arg">job_id</span>)</span><br />
      Returns the job file for a given job id.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobPath">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">boolean</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_IsQueueMarkedDrain" class="summary-sig-name" onclick="show_private();">_IsQueueMarkedDrain</a>()</span><br />
      Check if the queue is marked from drain.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._IsQueueMarkedDrain">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#SetDrainFlag" class="summary-sig-name">SetDrainFlag</a>(<span class="summary-sig-arg">drain_flag</span>)</span><br />
      Sets the drain flag for the queue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.SetDrainFlag">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.jqueue.JobQueue-class.html#_GetJobInfoUnlocked" class="summary-sig-name" onclick="show_private();">_GetJobInfoUnlocked</a>(<span class="summary-sig-arg">job</span>,
        <span class="summary-sig-arg">fields</span>)</span><br />
      Returns information about a job.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobInfoUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ganeti.jqueue.JobQueue-class.html#_RE_JOB_FILE" class="summary-name" onclick="show_private();">_RE_JOB_FILE</a> = <code title="re.compile(r&quot;^job-(%s)$&quot; % constants.JOB_ID_TEMPLATE)">re.compile(r&quot;^job-(%s)$&quot; % constants.JOB_ID_TEM<code class="variable-ellipsis">...</code></code><br />
      regex matching the valid job file names
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">context</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Constructor for JobQueue.</p>
  <p>The constructor will initialize the job queue object and then start 
  loading the current jobs from disk, either for starting them (if they 
  were queue) or for aborting them (if they were already running).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>context</code></strong> (GanetiContext) - the context object for access to the configuration data and other
          ganeti objects</li>
    </ul></dd>
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="AddNode"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AddNode</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">node</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.AddNode">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Register a new node with the queue.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>node</code></strong> (<a href="ganeti.objects.Node-class.html" 
          class="link">objects.Node</a>) - the node object to be added</li>
    </ul></dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="RemoveNode"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">RemoveNode</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">node_name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.RemoveNode">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Callback called when removing nodes from the cluster.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>node_name</code></strong> (str) - the name of the node to remove</li>
    </ul></dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_CheckRpcResult"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_CheckRpcResult</span>(<span class="sig-arg">result</span>,
        <span class="sig-arg">nodes</span>,
        <span class="sig-arg">failmsg</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._CheckRpcResult">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Verifies the status of an RPC call.</p>
  <p>Since we aim to keep consistency should this node (the current master)
  fail, we will log errors if our rpc fail, and especially log the case 
  when more than half of the nodes fails.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>result</code></strong> - the data as returned from the rpc call</li>
        <li><strong class="pname"><code>nodes</code></strong> (list) - the list of nodes we made the call to</li>
        <li><strong class="pname"><code>failmsg</code></strong> (str) - the identifier to be used for logging</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetNodeIp"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetNodeIp</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetNodeIp">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Helper for returning the node name/ip list.</p>
  <dl class="fields">
    <dt>Returns: (list, list)</dt>
        <dd>a tuple of two lists, the first one with the node names and the 
          second one with the node addresses</dd>
  </dl>
</td></tr></table>
</div>
<a name="_WriteAndReplicateFileUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_WriteAndReplicateFileUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">file_name</span>,
        <span class="sig-arg">data</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._WriteAndReplicateFileUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Writes a file locally and then replicates it to all nodes.</p>
  <p>This function will replace the contents of a file on the local node 
  and then replicate it to all the other nodes we have.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>file_name</code></strong> (str) - the path of the file to be replicated</li>
        <li><strong class="pname"><code>data</code></strong> (str) - the new contents of the file</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_RenameFilesUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_RenameFilesUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">rename</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._RenameFilesUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Renames a file locally and then replicate the change.</p>
  <p>This function will rename a file in the local queue directory and then
  replicate this rename to all the other nodes we have.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>rename</code></strong> (list of (old, new)) - List containing tuples mapping old to new names</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_FormatJobID"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_FormatJobID</span>(<span class="sig-arg">job_id</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._FormatJobID">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Convert a job ID to string format.</p>
  <p>Currently this just does <code>str(job_id)</code> after performing 
  some checks, but if we want to change the job id format this will 
  abstract this change.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (int or long) - the numeric job id</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>the formatted job id</dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetArchiveDirectory"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetArchiveDirectory</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">job_id</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetArchiveDirectory">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns the archive directory for a job.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (str) - Job identifier</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>Directory name</dd>
  </dl>
</td></tr></table>
</div>
<a name="_NewSerialsUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_NewSerialsUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">count</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._NewSerialsUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Generates a new job identifier.</p>
  <p>Job identifiers are unique during the lifetime of a cluster.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>count</code></strong> (integer) - how many serials to return</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>a string representing the job identifier.</dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetJobPath"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetJobPath</span>(<span class="sig-arg">job_id</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobPath">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns the job file for a given job id.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (str) - the job identifier</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>the path to the job file</dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetArchivedJobPath"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetArchivedJobPath</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">job_id</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetArchivedJobPath">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns the archived job file for a give job id.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (str) - the job identifier</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>the path to the archived job file</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ExtractJobID"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ExtractJobID</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">name</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._ExtractJobID">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Extract the job id from a filename.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>name</code></strong> (str) - the job filename</li>
    </ul></dd>
    <dt>Returns: job id or None</dt>
        <dd>the job id corresponding to the given filename, or None if the 
          filename does not represent a valid job file</dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetJobIDsUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetJobIDsUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">archived</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobIDsUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Return all known job IDs.</p>
  <p>If the parameter archived is True, archived jobs IDs will be included.
  Currently this argument is unused.</p>
  <p>The method only looks at disk because it's a requirement that all jobs
  are present on disk (so in the _memcache we don't have any extra 
  IDs).</p>
  <dl class="fields">
    <dt>Returns: list</dt>
        <dd>the list of job IDs</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ListJobFiles"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ListJobFiles</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._ListJobFiles">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns the list of current job files.</p>
  <dl class="fields">
    <dt>Returns: list</dt>
        <dd>the list of job file names</dd>
  </dl>
</td></tr></table>
</div>
<a name="_LoadJobUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_LoadJobUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job_id</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._LoadJobUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Loads a job from the disk or memory.</p>
  <p>Given a job id, this will return the cached job object if existing, or
  try to load the job from the disk. If loading from disk, it will also add
  the job to the cache.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> - the job id</li>
    </ul></dd>
    <dt>Returns: <a href="ganeti.jqueue._QueuedJob-class.html" class="link" 
      onclick="show_private();">_QueuedJob</a> or None</dt>
        <dd>either None or the job object</dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetJobsUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetJobsUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job_ids</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobsUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Return a list of jobs based on their IDs.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_ids</code></strong> (list) - either an empty list (meaning all jobs), or a list of job IDs</li>
    </ul></dd>
    <dt>Returns: list</dt>
        <dd>the list of job objects</dd>
  </dl>
</td></tr></table>
</div>
<a name="_IsQueueMarkedDrain"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_IsQueueMarkedDrain</span>()</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._IsQueueMarkedDrain">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Check if the queue is marked from drain.</p>
  <p>This currently uses the queue drain file, which makes it a per-node 
  flag. In the future this can be moved to the config file.</p>
  <dl class="fields">
    <dt>Returns: boolean</dt>
        <dd>True of the job queue is marked for draining</dd>
  </dl>
</td></tr></table>
</div>
<a name="SetDrainFlag"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">SetDrainFlag</span>(<span class="sig-arg">drain_flag</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.SetDrainFlag">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Sets the drain flag for the queue.</p>
  <p>This is similar to the function <a 
  href="ganeti.backend-module.html#JobQueueSetDrainFlag" 
  class="link">backend.JobQueueSetDrainFlag</a>, and in the future we might
  merge them.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>drain_flag</code></strong> (boolean) - Whether to set or unset the drain flag</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_SubmitJobUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_SubmitJobUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job_id</span>,
        <span class="sig-arg">ops</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._SubmitJobUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create and store a new job.</p>
  <p>This enters the job into our job queue and also puts it on the new 
  queue, in order for it to be picked up by the queue processors.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (job ID) - the job ID for the new job</li>
        <li><strong class="pname"><code>ops</code></strong> (list) - The list of OpCodes that will become the new job.</li>
    </ul></dd>
    <dt>Returns: job ID</dt>
        <dd>the job ID of the newly created job</dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.JobQueueDrainError-class.html">errors.JobQueueDrainError</a></strong></code> - if the job is marked for draining</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="SubmitJob"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">SubmitJob</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">ops</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.SubmitJob">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create and store a new job.</p>
  <dl class="fields">
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="ganeti.jqueue.JobQueue-class.html#_SubmitJobUnlocked" 
        class="link" onclick="show_private();">_SubmitJobUnlocked</a>
      </p>
</div></td></tr></table>
</div>
<a name="SubmitManyJobs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">SubmitManyJobs</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">jobs</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.SubmitManyJobs">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create and store multiple jobs.</p>
  <dl class="fields">
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="ganeti.jqueue.JobQueue-class.html#_SubmitJobUnlocked" 
        class="link" onclick="show_private();">_SubmitJobUnlocked</a>
      </p>
</div></td></tr></table>
</div>
<a name="UpdateJobUnlocked"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">UpdateJobUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.UpdateJobUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Update a job's on disk storage.</p>
  <p>After a job has been modified, this function needs to be called in 
  order to write the changes to disk and replicate them to the other 
  nodes.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job</code></strong> (<a href="ganeti.jqueue._QueuedJob-class.html" class="link" 
          onclick="show_private();">_QueuedJob</a>) - the changed job</li>
    </ul></dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="WaitForJobChanges"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">WaitForJobChanges</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job_id</span>,
        <span class="sig-arg">fields</span>,
        <span class="sig-arg">prev_job_info</span>,
        <span class="sig-arg">prev_log_serial</span>,
        <span class="sig-arg">timeout</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.WaitForJobChanges">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Waits for changes in a job.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (string) - Job identifier</li>
        <li><strong class="pname"><code>fields</code></strong> (list of strings) - Which fields to check for changes</li>
        <li><strong class="pname"><code>prev_job_info</code></strong> (list or None) - Last job information returned</li>
        <li><strong class="pname"><code>prev_log_serial</code></strong> (int) - Last job message serial number</li>
        <li><strong class="pname"><code>timeout</code></strong> (float) - maximum time to wait</li>
    </ul></dd>
    <dt>Returns: tuple (job info, log entries)</dt>
        <dd>a tuple of the job information as required via the fields 
          parameter, and the log entries as a list
          <p>if the job has not changed and the timeout has expired, we 
          instead return a special value, <a 
          href="ganeti.constants-module.html#JOB_NOTCHANGED" 
          class="link">constants.JOB_NOTCHANGED</a>, which should be 
          interpreted as such by the clients</p></dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CancelJob"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CancelJob</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job_id</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.CancelJob">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Cancels a job.</p>
  <p>This will only succeed if the job has not started yet.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (string) - job ID of job to be cancelled.</li>
    </ul></dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CancelJobUnlocked"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CancelJobUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.CancelJobUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Marks a job as canceled.</p>
  <dl class="fields">
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_ArchiveJobsUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ArchiveJobsUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">jobs</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._ArchiveJobsUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Archives jobs.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>jobs</code></strong> (list of <a href="ganeti.jqueue._QueuedJob-class.html" 
          class="link" onclick="show_private();">_QueuedJob</a>) - Job objects</li>
    </ul></dd>
    <dt>Returns: int</dt>
        <dd>Number of archived jobs</dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="ArchiveJob"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ArchiveJob</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job_id</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.ArchiveJob">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Archives a job.</p>
  <p>This is just a wrapper over <a 
  href="ganeti.jqueue.JobQueue-class.html#_ArchiveJobsUnlocked" 
  class="link" onclick="show_private();">_ArchiveJobsUnlocked</a>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_id</code></strong> (string) - Job ID of job to be archived.</li>
    </ul></dd>
    <dt>Returns: bool</dt>
        <dd>Whether job was archived</dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="AutoArchiveJobs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AutoArchiveJobs</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">age</span>,
        <span class="sig-arg">timeout</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.AutoArchiveJobs">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Archives all jobs based on age.</p>
  <p>The method will archive all jobs which are older than the age 
  parameter. For jobs that don't have an end timestamp, the start timestamp
  will be considered. The special '-1' age will cause archival of all jobs 
  (that are not running or queued).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>age</code></strong> (int) - the minimum age in seconds</li>
    </ul></dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetJobInfoUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetJobInfoUnlocked</span>(<span class="sig-arg">job</span>,
        <span class="sig-arg">fields</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue._GetJobInfoUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns information about a job.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job</code></strong> (<a href="ganeti.jqueue._QueuedJob-class.html" class="link" 
          onclick="show_private();">_QueuedJob</a>) - the job which we query</li>
        <li><strong class="pname"><code>fields</code></strong> (list) - names of fields to return</li>
    </ul></dd>
    <dt>Returns: list</dt>
        <dd>list with one element for each field</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpExecError-class.html">errors.OpExecError</a></strong></code> - when an invalid field has been passed</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="QueryJobs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">QueryJobs</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">job_ids</span>,
        <span class="sig-arg">fields</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.QueryJobs">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns a list of jobs in queue.</p>
  <p>This is a wrapper of <a 
  href="ganeti.jqueue.JobQueue-class.html#_GetJobsUnlocked" class="link" 
  onclick="show_private();">_GetJobsUnlocked</a>, which actually does the 
  processing for each job.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>job_ids</code></strong> (list) - sequence of job identifiers or None for all</li>
        <li><strong class="pname"><code>fields</code></strong> (list) - names of fields to return</li>
    </ul></dd>
    <dt>Returns: list</dt>
        <dd>list one element per job, each element being list with the 
          requested fields</dd>
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="Shutdown"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">Shutdown</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.jqueue-pysrc.html#JobQueue.Shutdown">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Stops the job queue.</p>
  <p>This shutdowns all the worker threads an closes the queue.</p>
  <dl class="fields">
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@utils.LockedMethod</code></li>
        <li><code>@_RequireOpenQueue</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_RE_JOB_FILE"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_RE_JOB_FILE</h3>
  regex matching the valid job file names
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
re.compile(r&quot;^job-(%s)$&quot; % constants.JOB_ID_TEMPLATE)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Dec  9 16:12:02 2010
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
