<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.masterd.iallocator.IAllocator</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.masterd-module.html">Package&nbsp;masterd</a> ::
        <a href="ganeti.masterd.iallocator-module.html">Module&nbsp;iallocator</a> ::
        Class&nbsp;IAllocator
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.masterd.iallocator.IAllocator-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class IAllocator</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_ganeti_m_7" name="uml_class_diagram_for_ganeti_m_7">
<area shape="rect" id="node770" href="ganeti.masterd.iallocator.IAllocator-class.html#__init__" title="x.__init__(...) initializes x; see help(type(x)) for signature" alt="" coords="17,39,313,57"/>
<area shape="rect" id="node770" href="ganeti.masterd.iallocator.IAllocator-class.html#Run" title="Run an instance allocator and return the results." alt="" coords="17,57,313,76"/>
<area shape="rect" id="node1" href="ganeti.masterd.iallocator.IAllocator-class.html" title="IAllocator framework." alt="" coords="5,6,325,82"/>
</map>
  <img src="uml_class_diagram_for_ganeti_m_7.gif" alt='' usemap="#uml_class_diagram_for_ganeti_m_7" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>IAllocator framework.</p>
  <p>An IAllocator instance has three sets of attributes:</p>
  <ul>
    <li>
      cfg that is needed to query the cluster
    </li>
    <li>
      input data (all members of the _KEYS class attribute are required)
    </li>
    <li>
      four buffer attributes (in|out_data|text), that represent the input 
      (to the external script) in text and data structure format, and the 
      output from it, again in two formats
    </li>
    <li>
      the result variables from the script (success, info, nodes) for easy 
      usage
    </li>
  </ul>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">rpc_runner</span>,
        <span class="summary-sig-arg">req</span>)</span><br />
      x.__init__(...) initializes x; see help(type(x)) for signature</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">same as the result of the node info RPC call</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ComputeClusterDataNodeInfo" class="summary-sig-name" onclick="show_private();">_ComputeClusterDataNodeInfo</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">disk_templates</span>,
        <span class="summary-sig-arg">node_list</span>,
        <span class="summary-sig-arg">cluster_info</span>,
        <span class="summary-sig-arg">hypervisor_name</span>)</span><br />
      Prepare and execute node info call.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeClusterDataNodeInfo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ComputeClusterData" class="summary-sig-name" onclick="show_private();">_ComputeClusterData</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">disk_template</span>=<span class="summary-sig-default">None</span>)</span><br />
      Compute the generic allocator input data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeClusterData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ComputeDynamicNodeData" class="summary-sig-name" onclick="show_private();">_ComputeDynamicNodeData</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">node_cfg</span>,
        <span class="summary-sig-arg">node_data</span>,
        <span class="summary-sig-arg">node_iinfo</span>,
        <span class="summary-sig-arg">i_list</span>,
        <span class="summary-sig-arg">node_results</span>,
        <span class="summary-sig-arg">disk_template</span>)</span><br />
      Compute global node data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeDynamicNodeData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_BuildInputData"></a><span class="summary-sig-name">_BuildInputData</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">req</span>)</span><br />
      Build input data structures.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._BuildInputData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="Run"></a><span class="summary-sig-name">Run</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">validate</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">call_fn</span>=<span class="summary-sig-default">None</span>)</span><br />
      Run an instance allocator and return the results.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator.Run">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ValidateResult" class="summary-sig-name" onclick="show_private();">_ValidateResult</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Process the allocator results.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ValidateResult">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== STATIC METHODS ==================== -->
<a name="section-StaticMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Static Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-StaticMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_ComputeNodeGroupData"></a><span class="summary-sig-name">_ComputeNodeGroupData</span>(<span class="summary-sig-arg">cluster</span>,
        <span class="summary-sig-arg">ginfo</span>)</span><br />
      Compute node groups data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeNodeGroupData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ComputeBasicNodeData" class="summary-sig-name" onclick="show_private();">_ComputeBasicNodeData</a>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">node_cfg</span>,
        <span class="summary-sig-arg">node_whitelist</span>)</span><br />
      Compute global node data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeBasicNodeData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">integer</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_GetAttributeFromHypervisorNodeData" class="summary-sig-name" onclick="show_private();">_GetAttributeFromHypervisorNodeData</a>(<span class="summary-sig-arg">hv_info</span>,
        <span class="summary-sig-arg">node_name</span>,
        <span class="summary-sig-arg">attr</span>)</span><br />
      Extract an attribute from the hypervisor's node information.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._GetAttributeFromHypervisorNodeData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">4-tuple of integers</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ComputeStorageDataFromSpaceInfoByTemplate" class="summary-sig-name" onclick="show_private();">_ComputeStorageDataFromSpaceInfoByTemplate</a>(<span class="summary-sig-arg">space_info</span>,
        <span class="summary-sig-arg">node_name</span>,
        <span class="summary-sig-arg">disk_template</span>)</span><br />
      Extract storage data from node info.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeStorageDataFromSpaceInfoByTemplate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">4-tuple of integers</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ComputeStorageDataFromSpaceInfo" class="summary-sig-name" onclick="show_private();">_ComputeStorageDataFromSpaceInfo</a>(<span class="summary-sig-arg">space_info</span>,
        <span class="summary-sig-arg">node_name</span>,
        <span class="summary-sig-arg">has_lvm</span>)</span><br />
      Extract storage data from node info.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeStorageDataFromSpaceInfo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">tuple (int, int, int)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.masterd.iallocator.IAllocator-class.html#_ComputeInstanceMemory" class="summary-sig-name" onclick="show_private();">_ComputeInstanceMemory</a>(<span class="summary-sig-arg">instance_list</span>,
        <span class="summary-sig-arg">node_instances_info</span>,
        <span class="summary-sig-arg">node_uuid</span>,
        <span class="summary-sig-arg">input_mem_free</span>)</span><br />
      Compute memory used by primary instances.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeInstanceMemory">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_ComputeInstanceData"></a><span class="summary-sig-name">_ComputeInstanceData</span>(<span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">cluster_info</span>,
        <span class="summary-sig-arg">i_list</span>)</span><br />
      Compute global instance data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeInstanceData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">cfg</span>,
        <span class="sig-arg">rpc_runner</span>,
        <span class="sig-arg">req</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
  <dl class="fields">
    <dt>Overrides:
        object.__init__
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeClusterDataNodeInfo"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeClusterDataNodeInfo</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">disk_templates</span>,
        <span class="sig-arg">node_list</span>,
        <span class="sig-arg">cluster_info</span>,
        <span class="sig-arg">hypervisor_name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeClusterDataNodeInfo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Prepare and execute node info call.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>disk_templates</code></strong> (list of string) - the disk templates of the instances to be allocated</li>
        <li><strong class="pname"><code>node_list</code></strong> (list of strings) - list of nodes' UUIDs</li>
        <li><strong class="pname"><code>cluster_info</code></strong> (<a href="ganeti.objects.Cluster-class.html" 
          class="link">objects.Cluster</a>) - the cluster's information from the config</li>
        <li><strong class="pname"><code>hypervisor_name</code></strong> (string) - the hypervisor name</li>
    </ul></dd>
    <dt>Returns: same as the result of the node info RPC call</dt>
        <dd>the result of the node info RPC call</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeClusterData"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeClusterData</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">disk_template</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeClusterData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute the generic allocator input data.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>disk_template</code></strong> (list of string) - the disk templates of the instances to be allocated</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeBasicNodeData"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeBasicNodeData</span>(<span class="sig-arg">cfg</span>,
        <span class="sig-arg">node_cfg</span>,
        <span class="sig-arg">node_whitelist</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeBasicNodeData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute global node data.</p>
  <dl class="fields">
    <dt>Returns: dict</dt>
        <dd>a dict of name: (node dict, node config)</dd>
  </dl>
</td></tr></table>
</div>
<a name="_GetAttributeFromHypervisorNodeData"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_GetAttributeFromHypervisorNodeData</span>(<span class="sig-arg">hv_info</span>,
        <span class="sig-arg">node_name</span>,
        <span class="sig-arg">attr</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._GetAttributeFromHypervisorNodeData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Extract an attribute from the hypervisor's node information.</p>
  <p>This is a helper function to extract data from the hypervisor's 
  information about the node, as part of the result of a node_info 
  query.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>hv_info</code></strong> (dict of strings) - dictionary of node information from the hypervisor</li>
        <li><strong class="pname"><code>node_name</code></strong> (string) - name of the node</li>
        <li><strong class="pname"><code>attr</code></strong> (string) - key of the attribute in the hv_info dictionary</li>
    </ul></dd>
    <dt>Returns: integer</dt>
        <dd>the value of the attribute</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpExecError-class.html">errors.OpExecError</a></strong></code> - if key not in dictionary or value not integer</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeStorageDataFromSpaceInfoByTemplate"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeStorageDataFromSpaceInfoByTemplate</span>(<span class="sig-arg">space_info</span>,
        <span class="sig-arg">node_name</span>,
        <span class="sig-arg">disk_template</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeStorageDataFromSpaceInfoByTemplate">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Extract storage data from node info.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>space_info</code></strong> (see result of the RPC call node info) - the storage reporting part of the result of the RPC call node 
          info</li>
        <li><strong class="pname"><code>node_name</code></strong> (string) - the node's name</li>
        <li><strong class="pname"><code>disk_template</code></strong> (string) - the disk template to report space for</li>
    </ul></dd>
    <dt>Returns: 4-tuple of integers</dt>
        <dd>tuple of storage info (total_disk, free_disk, total_spindles, 
          free_spindles)</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeStorageDataFromSpaceInfo"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeStorageDataFromSpaceInfo</span>(<span class="sig-arg">space_info</span>,
        <span class="sig-arg">node_name</span>,
        <span class="sig-arg">has_lvm</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeStorageDataFromSpaceInfo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Extract storage data from node info.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>space_info</code></strong> (see result of the RPC call node info) - the storage reporting part of the result of the RPC call node 
          info</li>
        <li><strong class="pname"><code>node_name</code></strong> (string) - the node's name</li>
        <li><strong class="pname"><code>has_lvm</code></strong> (boolean) - whether or not LVM storage information is requested</li>
    </ul></dd>
    <dt>Returns: 4-tuple of integers</dt>
        <dd>tuple of storage info (total_disk, free_disk, total_spindles, 
          free_spindles)</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeInstanceMemory"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeInstanceMemory</span>(<span class="sig-arg">instance_list</span>,
        <span class="sig-arg">node_instances_info</span>,
        <span class="sig-arg">node_uuid</span>,
        <span class="sig-arg">input_mem_free</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeInstanceMemory">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute memory used by primary instances.</p>
  <dl class="fields">
    <dt>Returns: tuple (int, int, int)</dt>
        <dd>A tuple of three integers: 1. the sum of memory used by primary 
          instances on the node (including the ones that are currently 
          down), 2. the sum of memory used by primary instances of the node
          that are up, 3. the amount of memory that is free on the node 
          considering the current usage of the instances.</dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeDynamicNodeData"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeDynamicNodeData</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">node_cfg</span>,
        <span class="sig-arg">node_data</span>,
        <span class="sig-arg">node_iinfo</span>,
        <span class="sig-arg">i_list</span>,
        <span class="sig-arg">node_results</span>,
        <span class="sig-arg">disk_template</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ComputeDynamicNodeData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute global node data.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>node_results</code></strong> - the basic node structures as filled from the config</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_ValidateResult"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ValidateResult</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.masterd.iallocator-pysrc.html#IAllocator._ValidateResult">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Process the allocator results.</p>
  <p>This will process and if successful save the result in self.out_data 
  and the other parameters.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Aug 22 10:43:45 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
