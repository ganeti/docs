<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.cmdlib.instance_storage.TemporaryDisk</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.cmdlib-module.html">Package&nbsp;cmdlib</a> ::
        <a href="ganeti.cmdlib.instance_storage-module.html">Module&nbsp;instance_storage</a> ::
        Class&nbsp;TemporaryDisk
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.cmdlib.instance_storage.TemporaryDisk-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class TemporaryDisk</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk">source&nbsp;code</a></span></p>
<p>Creates a new temporary bootable disk, and makes sure it is 
  destroyed.</p>
  <p>Is a context manager, and should be used with the ``with`` statement 
  as such.</p>
  <p>The disk is guaranteed to be created at index 0, shifting any other 
  disks of the instance by one place, and allowing the instance to be 
  booted with the content of the disk.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_storage.TemporaryDisk-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">disks</span>,
        <span class="summary-sig-arg">feedback_fn</span>,
        <span class="summary-sig-arg">shutdown_timeout</span>=<span class="summary-sig-default">constants.DEFAULT_SHUTDOWN_TIMEOUT</span>)</span><br />
      Constructor storing arguments until used later.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_storage.TemporaryDisk-class.html#_EnsureInstanceDiskState" class="summary-sig-name" onclick="show_private();">_EnsureInstanceDiskState</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Ensures that the instance is down, and its disks inactive.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk._EnsureInstanceDiskState">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><a href="ganeti.objects.Disk-class.html" 
      class="link">ganeti.objects.Disk</a></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_storage.TemporaryDisk-class.html#__enter__" class="summary-sig-name">__enter__</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Context manager entry function, creating the disk.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk.__enter__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__exit__"></a><span class="summary-sig-name">__exit__</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">exc_type</span>,
        <span class="summary-sig-arg">_value</span>,
        <span class="summary-sig-arg">_traceback</span>)</span><br />
      Context manager exit function, destroying the disk.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk.__exit__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">lu</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">disks</span>,
        <span class="sig-arg">feedback_fn</span>,
        <span class="sig-arg">shutdown_timeout</span>=<span class="sig-default">constants.DEFAULT_SHUTDOWN_TIMEOUT</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Constructor storing arguments until used later.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">ganeti.cmdlib.base.LogicalUnit</a>) - The LU within which this disk is created.</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">ganeti.objects.Instance</a>) - The instance to which the disk should be added</li>
        <li><strong class="pname"><code>disks</code></strong> (list of triples (disk template, disk access mode, int)) - disk specification, which is a list of triples containing the 
          disk template (e.g., constants.DT_PLAIN), the disk access mode 
          (i.e., constants.DISK_RDONLY or constants.DISK_RDWR), and size in
          MiB.</li>
        <li><strong class="pname"><code>feedback_fn</code></strong> (function) - Function used to log progress</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_EnsureInstanceDiskState"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_EnsureInstanceDiskState</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk._EnsureInstanceDiskState">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Ensures that the instance is down, and its disks inactive.</p>
  <p>All the operations related to the creation and destruction of disks 
  require that the instance is down and that the disks are inactive. This 
  function is invoked to make it so.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="__enter__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__enter__</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_storage-pysrc.html#TemporaryDisk.__enter__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Context manager entry function, creating the disk.</p>
  <dl class="fields">
    <dt>Returns: <a href="ganeti.objects.Disk-class.html" 
      class="link">ganeti.objects.Disk</a></dt>
        <dd>The disk object created.</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Aug 22 10:43:38 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
