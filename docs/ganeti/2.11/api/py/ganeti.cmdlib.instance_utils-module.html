<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.cmdlib.instance_utils</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.cmdlib-module.html">Package&nbsp;cmdlib</a> ::
        Module&nbsp;instance_utils
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.cmdlib.instance_utils-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module instance_utils</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html">source&nbsp;code</a></span></p>
<p>Utility function mainly, but not only used by instance LU's.</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#BuildInstanceHookEnv" class="summary-sig-name">BuildInstanceHookEnv</a>(<span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">primary_node_name</span>,
        <span class="summary-sig-arg">secondary_node_names</span>,
        <span class="summary-sig-arg">os_type</span>,
        <span class="summary-sig-arg">status</span>,
        <span class="summary-sig-arg">minmem</span>,
        <span class="summary-sig-arg">maxmem</span>,
        <span class="summary-sig-arg">vcpus</span>,
        <span class="summary-sig-arg">nics</span>,
        <span class="summary-sig-arg">disk_template</span>,
        <span class="summary-sig-arg">disks</span>,
        <span class="summary-sig-arg">bep</span>,
        <span class="summary-sig-arg">hvp</span>,
        <span class="summary-sig-arg">hypervisor_name</span>,
        <span class="summary-sig-arg">tags</span>)</span><br />
      Builds instance related env variables for hooks</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#BuildInstanceHookEnv">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#BuildInstanceHookEnvByObject" class="summary-sig-name">BuildInstanceHookEnvByObject</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">override</span>=<span class="summary-sig-default">None</span>)</span><br />
      Builds instance related env variables for hooks from an object.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#BuildInstanceHookEnvByObject">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="GetClusterDomainSecret"></a><span class="summary-sig-name">GetClusterDomainSecret</span>()</span><br />
      Reads the cluster domain secret.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#GetClusterDomainSecret">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#CheckNodeNotDrained" class="summary-sig-name">CheckNodeNotDrained</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuid</span>)</span><br />
      Ensure that a given node is not drained.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeNotDrained">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#CheckNodeVmCapable" class="summary-sig-name">CheckNodeVmCapable</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuid</span>)</span><br />
      Ensure that a given node is vm capable.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeVmCapable">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="RemoveInstance"></a><span class="summary-sig-name">RemoveInstance</span>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">feedback_fn</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">ignore_failures</span>)</span><br />
      Utility function to remove an instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#RemoveInstance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">boolean</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#RemoveDisks" class="summary-sig-name">RemoveDisks</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">target_node_uuid</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">ignore_failures</span>=<span class="summary-sig-default">False</span>)</span><br />
      Remove all disks for an instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#RemoveDisks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#NICToTuple" class="summary-sig-name">NICToTuple</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">nic</span>)</span><br />
      Build a tupple of nic information.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#NICToTuple">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#NICListToTuple" class="summary-sig-name">NICListToTuple</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">nics</span>)</span><br />
      Build a list of nic information tuples.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#NICListToTuple">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#CopyLockList" class="summary-sig-name">CopyLockList</a>(<span class="summary-sig-arg">names</span>)</span><br />
      Makes a copy of a list of lock names.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CopyLockList">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#ReleaseLocks" class="summary-sig-name">ReleaseLocks</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">level</span>,
        <span class="summary-sig-arg">names</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">keep</span>=<span class="summary-sig-default">None</span>)</span><br />
      Releases locks owned by an LU.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#ReleaseLocks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#_ComputeIPolicyNodeViolation" class="summary-sig-name" onclick="show_private();">_ComputeIPolicyNodeViolation</a>(<span class="summary-sig-arg">ipolicy</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">current_group</span>,
        <span class="summary-sig-arg">target_group</span>,
        <span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">_compute_fn</span>=<span class="summary-sig-default">ComputeIPolicyInstanceViolation</span>)</span><br />
      Compute if instance meets the specs of the new target group.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#_ComputeIPolicyNodeViolation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#CheckTargetNodeIPolicy" class="summary-sig-name">CheckTargetNodeIPolicy</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">ipolicy</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">node</span>,
        <span class="summary-sig-arg">cfg</span>,
        <span class="summary-sig-arg">ignore</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">_compute_fn</span>=<span class="summary-sig-default">_ComputeIPolicyNodeViolation</span>)</span><br />
      Checks that the target node is correct in terms of instance policy.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckTargetNodeIPolicy">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="GetInstanceInfoText"></a><span class="summary-sig-name">GetInstanceInfoText</span>(<span class="summary-sig-arg">instance</span>)</span><br />
      Compute that text that should be added to the disk's metadata.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#GetInstanceInfoText">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">integer</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#CheckNodeFreeMemory" class="summary-sig-name">CheckNodeFreeMemory</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuid</span>,
        <span class="summary-sig-arg">reason</span>,
        <span class="summary-sig-arg">requested</span>,
        <span class="summary-sig-arg">hvname</span>,
        <span class="summary-sig-arg">hvparams</span>)</span><br />
      Checks if a node has enough free memory.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeFreeMemory">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="CheckInstanceBridgesExist"></a><span class="summary-sig-name">CheckInstanceBridgesExist</span>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">instance</span>,
        <span class="summary-sig-arg">node_uuid</span>=<span class="summary-sig-default">None</span>)</span><br />
      Check that the brigdes needed by an instance exist.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckInstanceBridgesExist">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="CheckNicsBridgesExist"></a><span class="summary-sig-name">CheckNicsBridgesExist</span>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">nics</span>,
        <span class="summary-sig-arg">node_uuid</span>)</span><br />
      Check that the brigdes needed by a list of nics exist.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNicsBridgesExist">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#CheckNodeHasOS" class="summary-sig-name">CheckNodeHasOS</a>(<span class="summary-sig-arg">lu</span>,
        <span class="summary-sig-arg">node_uuid</span>,
        <span class="summary-sig-arg">os_name</span>,
        <span class="summary-sig-arg">force_variant</span>)</span><br />
      Ensure that a node supports a given OS.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeHasOS">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.cmdlib.instance_utils-module.html#_CheckOSVariant" class="summary-sig-name" onclick="show_private();">_CheckOSVariant</a>(<span class="summary-sig-arg">os_obj</span>,
        <span class="summary-sig-arg">name</span>)</span><br />
      Check whether an OS name conforms to the os variants specification.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#_CheckOSVariant">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<p class="indent-wrapped-lines"><b>Imports:</b>
  <span title="logging">logging</span>,
  <span title="os">os</span>,
  <a href="ganeti.constants-module.html" title="ganeti.constants">constants</a>,
  <a href="ganeti.errors-module.html" title="ganeti.errors">errors</a>,
  <a href="ganeti.locking-module.html" title="ganeti.locking">locking</a>,
  <a href="ganeti.network-module.html" title="ganeti.network">network</a>,
  <a href="ganeti.objects-module.html" title="ganeti.objects">objects</a>,
  <a href="ganeti.pathutils-module.html" title="ganeti.pathutils">pathutils</a>,
  <a href="ganeti.utils-module.html" title="ganeti.utils">utils</a>,
  <a href="ganeti.cmdlib.common-module.html#AnnotateDiskParams" title="ganeti.cmdlib.common.AnnotateDiskParams">AnnotateDiskParams</a>,
  <a href="ganeti.cmdlib.common-module.html#ComputeIPolicyInstanceViolation" title="ganeti.cmdlib.common.ComputeIPolicyInstanceViolation">ComputeIPolicyInstanceViolation</a>,
  <a href="ganeti.cmdlib.common-module.html#CheckDiskTemplateEnabled" title="ganeti.cmdlib.common.CheckDiskTemplateEnabled">CheckDiskTemplateEnabled</a>
</p><br />
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="BuildInstanceHookEnv"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">BuildInstanceHookEnv</span>(<span class="sig-arg">name</span>,
        <span class="sig-arg">primary_node_name</span>,
        <span class="sig-arg">secondary_node_names</span>,
        <span class="sig-arg">os_type</span>,
        <span class="sig-arg">status</span>,
        <span class="sig-arg">minmem</span>,
        <span class="sig-arg">maxmem</span>,
        <span class="sig-arg">vcpus</span>,
        <span class="sig-arg">nics</span>,
        <span class="sig-arg">disk_template</span>,
        <span class="sig-arg">disks</span>,
        <span class="sig-arg">bep</span>,
        <span class="sig-arg">hvp</span>,
        <span class="sig-arg">hypervisor_name</span>,
        <span class="sig-arg">tags</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#BuildInstanceHookEnv">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Builds instance related env variables for hooks</p>
  <p>This builds the hook environment from individual variables.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>name</code></strong> (string) - the name of the instance</li>
        <li><strong class="pname"><code>primary_node_name</code></strong> (string) - the name of the instance's primary node</li>
        <li><strong class="pname"><code>secondary_node_names</code></strong> (list) - list of secondary nodes as strings</li>
        <li><strong class="pname"><code>os_type</code></strong> (string) - the name of the instance's OS</li>
        <li><strong class="pname"><code>status</code></strong> (string) - the desired status of the instance</li>
        <li><strong class="pname"><code>minmem</code></strong> (string) - the minimum memory size of the instance</li>
        <li><strong class="pname"><code>maxmem</code></strong> (string) - the maximum memory size of the instance</li>
        <li><strong class="pname"><code>vcpus</code></strong> (string) - the count of VCPUs the instance has</li>
        <li><strong class="pname"><code>nics</code></strong> (list) - list of tuples (name, uuid, ip, mac, mode, link, vlan, net, 
          netinfo) representing the NICs the instance has</li>
        <li><strong class="pname"><code>disk_template</code></strong> (string) - the disk template of the instance</li>
        <li><strong class="pname"><code>disks</code></strong> (list) - list of tuples (name, uuid, size, mode)</li>
        <li><strong class="pname"><code>bep</code></strong> (dict) - the backend parameters for the instance</li>
        <li><strong class="pname"><code>hvp</code></strong> (dict) - the hypervisor parameters for the instance</li>
        <li><strong class="pname"><code>hypervisor_name</code></strong> (string) - the hypervisor for the instance</li>
        <li><strong class="pname"><code>tags</code></strong> (list) - list of instance tags as strings</li>
    </ul></dd>
    <dt>Returns: dict</dt>
        <dd>the hook environment for this instance</dd>
  </dl>
</td></tr></table>
</div>
<a name="BuildInstanceHookEnvByObject"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">BuildInstanceHookEnvByObject</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">override</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#BuildInstanceHookEnvByObject">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Builds instance related env variables for hooks from an object.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit on whose behalf we execute</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - the instance for which we should build the environment</li>
        <li><strong class="pname"><code>override</code></strong> (dict) - dictionary with key/values that will override our values</li>
    </ul></dd>
    <dt>Returns: dict</dt>
        <dd>the hook environment dictionary</dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckNodeNotDrained"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckNodeNotDrained</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuid</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeNotDrained">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Ensure that a given node is not drained.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> - the LU on behalf of which we make the check</li>
        <li><strong class="pname"><code>node_uuid</code></strong> - the node to check</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the node is drained</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckNodeVmCapable"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckNodeVmCapable</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuid</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeVmCapable">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Ensure that a given node is vm capable.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> - the LU on behalf of which we make the check</li>
        <li><strong class="pname"><code>node_uuid</code></strong> - the node to check</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the node is not vm capable</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="RemoveDisks"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">RemoveDisks</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">target_node_uuid</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">ignore_failures</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#RemoveDisks">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Remove all disks for an instance.</p>
  <p>This abstracts away some work from `AddInstance()` and 
  `RemoveInstance()`. Note that in case some of the devices couldn't be 
  removed, the removal will continue with the other ones.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit on whose behalf we execute</li>
        <li><strong class="pname"><code>instance</code></strong> (<a href="ganeti.objects.Instance-class.html" 
          class="link">objects.Instance</a>) - the instance whose disks we should remove</li>
        <li><strong class="pname"><code>target_node_uuid</code></strong> (string) - used to override the node on which to remove the disks</li>
    </ul></dd>
    <dt>Returns: boolean</dt>
        <dd>the success of the removal</dd>
  </dl>
</td></tr></table>
</div>
<a name="NICToTuple"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">NICToTuple</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">nic</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#NICToTuple">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Build a tupple of nic information.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit on whose behalf we execute</li>
        <li><strong class="pname"><code>nic</code></strong> (<a href="ganeti.objects.NIC-class.html" 
          class="link">objects.NIC</a>) - nic to convert to hooks tuple</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="NICListToTuple"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">NICListToTuple</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">nics</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#NICListToTuple">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Build a list of nic information tuples.</p>
  <p>This list is suitable to be passed to _BuildInstanceHookEnv or as a 
  return value in LUInstanceQueryData.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>) - the logical unit on whose behalf we execute</li>
        <li><strong class="pname"><code>nics</code></strong> (list of <a href="ganeti.objects.NIC-class.html" 
          class="link">objects.NIC</a>) - list of nics to convert to hooks tuples</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CopyLockList"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CopyLockList</span>(<span class="sig-arg">names</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CopyLockList">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Makes a copy of a list of lock names.</p>
  <p>Handles <a href="ganeti.locking-module.html#ALL_SET" 
  class="link">locking.ALL_SET</a> correctly.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="ReleaseLocks"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ReleaseLocks</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">level</span>,
        <span class="sig-arg">names</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">keep</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#ReleaseLocks">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Releases locks owned by an LU.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>level</code></strong> - Lock level</li>
        <li><strong class="pname"><code>names</code></strong> (list or None) - Names of locks to release</li>
        <li><strong class="pname"><code>keep</code></strong> (list or None) - Names of locks to retain</li>
        <li><strong class="pname"><code>lu</code></strong> (<a href="ganeti.cmdlib.base.LogicalUnit-class.html" 
          class="link">LogicalUnit</a>)</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_ComputeIPolicyNodeViolation"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_ComputeIPolicyNodeViolation</span>(<span class="sig-arg">ipolicy</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">current_group</span>,
        <span class="sig-arg">target_group</span>,
        <span class="sig-arg">cfg</span>,
        <span class="sig-arg">_compute_fn</span>=<span class="sig-default">ComputeIPolicyInstanceViolation</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#_ComputeIPolicyNodeViolation">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Compute if instance meets the specs of the new target group.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ipolicy</code></strong> - The ipolicy to verify</li>
        <li><strong class="pname"><code>instance</code></strong> - The instance object to verify</li>
        <li><strong class="pname"><code>current_group</code></strong> - The current group of the instance</li>
        <li><strong class="pname"><code>target_group</code></strong> - The new group of the instance</li>
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
        <li><strong class="pname"><code>_compute_fn</code></strong> - The function to verify ipolicy (unittest only)</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a 
        href="ganeti.cmdlib.common-module.html#ComputeIPolicySpecViolation"
        class="link">ganeti.cmdlib.common.ComputeIPolicySpecViolation</a>
      </p>
</div></td></tr></table>
</div>
<a name="CheckTargetNodeIPolicy"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckTargetNodeIPolicy</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">ipolicy</span>,
        <span class="sig-arg">instance</span>,
        <span class="sig-arg">node</span>,
        <span class="sig-arg">cfg</span>,
        <span class="sig-arg">ignore</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">_compute_fn</span>=<span class="sig-default">_ComputeIPolicyNodeViolation</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckTargetNodeIPolicy">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks that the target node is correct in terms of instance 
  policy.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ipolicy</code></strong> - The ipolicy to verify</li>
        <li><strong class="pname"><code>instance</code></strong> - The instance object to verify</li>
        <li><strong class="pname"><code>node</code></strong> - The new node to relocate</li>
        <li><strong class="pname"><code>cfg</code></strong> (<a href="ganeti.config.ConfigWriter-class.html" 
          class="link">config.ConfigWriter</a>) - Cluster configuration</li>
        <li><strong class="pname"><code>ignore</code></strong> - Ignore violations of the ipolicy</li>
        <li><strong class="pname"><code>_compute_fn</code></strong> - The function to verify ipolicy (unittest only)</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a 
        href="ganeti.cmdlib.common-module.html#ComputeIPolicySpecViolation"
        class="link">ganeti.cmdlib.common.ComputeIPolicySpecViolation</a>
      </p>
</div></td></tr></table>
</div>
<a name="CheckNodeFreeMemory"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckNodeFreeMemory</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuid</span>,
        <span class="sig-arg">reason</span>,
        <span class="sig-arg">requested</span>,
        <span class="sig-arg">hvname</span>,
        <span class="sig-arg">hvparams</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeFreeMemory">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Checks if a node has enough free memory.</p>
  <p>This function checks if a given node has the needed amount of free 
  memory. In case the node has less memory or we cannot get the information
  from the node, this function raises an OpPrereqError exception.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> (<code>LogicalUnit</code>) - a logical unit from which we get configuration data</li>
        <li><strong class="pname"><code>node_uuid</code></strong> (<code>str</code>) - the node to check</li>
        <li><strong class="pname"><code>reason</code></strong> (<code>str</code>) - string to use in the error message</li>
        <li><strong class="pname"><code>requested</code></strong> (<code>int</code>) - the amount of memory in MiB to check for</li>
        <li><strong class="pname"><code>hvname</code></strong> (string) - the hypervisor's name</li>
        <li><strong class="pname"><code>hvparams</code></strong> (dict of strings) - the hypervisor's parameters</li>
    </ul></dd>
    <dt>Returns: integer</dt>
        <dd>node current free memory</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the node doesn't have enough memory, or we cannot check the node</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="CheckNodeHasOS"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">CheckNodeHasOS</span>(<span class="sig-arg">lu</span>,
        <span class="sig-arg">node_uuid</span>,
        <span class="sig-arg">os_name</span>,
        <span class="sig-arg">force_variant</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#CheckNodeHasOS">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Ensure that a node supports a given OS.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lu</code></strong> - the LU on behalf of which we make the check</li>
        <li><strong class="pname"><code>node_uuid</code></strong> - the node to check</li>
        <li><strong class="pname"><code>os_name</code></strong> - the OS to query about</li>
        <li><strong class="pname"><code>force_variant</code></strong> - whether to ignore variant errors</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.errors.OpPrereqError-class.html">errors.OpPrereqError</a></strong></code> - if the node is not supporting the OS</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_CheckOSVariant"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_CheckOSVariant</span>(<span class="sig-arg">os_obj</span>,
        <span class="sig-arg">name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.cmdlib.instance_utils-pysrc.html#_CheckOSVariant">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Check whether an OS name conforms to the os variants 
  specification.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>os_obj</code></strong> (<a href="ganeti.objects.OS-class.html" 
          class="link">objects.OS</a>) - OS object to check</li>
        <li><strong class="pname"><code>name</code></strong> (string) - OS name passed by the user, to check for validity</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Jan 11 11:57:44 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
