<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ganeti.workerpool.WorkerPool</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ganeti-module.html">Package&nbsp;ganeti</a> ::
        <a href="ganeti.workerpool-module.html">Module&nbsp;workerpool</a> ::
        Class&nbsp;WorkerPool
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ganeti.workerpool.WorkerPool-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class WorkerPool</h1><p class="nomargin-top"><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_ganeti_w_10" name="uml_class_diagram_for_ganeti_w_10">
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#__init__" title="Constructor for worker pool." alt="" coords="17,39,476,57"/>
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#AddTask" title="Adds a task to the queue." alt="" coords="17,57,476,76"/>
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#AddManyTasks" title="Add a list of tasks to the queue." alt="" coords="17,76,476,95"/>
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#ChangeTaskPriority" title="Changes a task&#39;s priority." alt="" coords="17,95,476,113"/>
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#HasRunningTasks" title="Checks whether there&#39;s at least one task running." alt="" coords="17,113,476,132"/>
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#Quiesce" title="Waits until the task queue is empty." alt="" coords="17,132,476,151"/>
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#Resize" title="Changes the number of workers in the pool." alt="" coords="17,151,476,169"/>
<area shape="rect" id="node1679" href="ganeti.workerpool.WorkerPool-class.html#TerminateWorkers" title="Terminate all worker threads." alt="" coords="17,169,476,188"/>
<area shape="rect" id="node1" href="ganeti.workerpool.WorkerPool-class.html" title="Worker pool with a queue." alt="" coords="5,6,488,194"/>
</map>
  <img src="uml_class_diagram_for_ganeti_w_10.gif" alt='' usemap="#uml_class_diagram_for_ganeti_w_10" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>Worker pool with a queue.</p>
  <p>This class is thread-safe.</p>
  <p>Tasks are guaranteed to be started in the order in which they're added
  to the pool. Due to the nature of threading, they're not guaranteed to 
  finish in the same order.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">num_workers</span>,
        <span class="summary-sig-arg">worker_class</span>)</span><br />
      Constructor for worker pool.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_WaitWhileQuiescingUnlocked"></a><span class="summary-sig-name">_WaitWhileQuiescingUnlocked</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Wait until the worker pool has finished quiescing.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._WaitWhileQuiescingUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#_AddTaskUnlocked" class="summary-sig-name" onclick="show_private();">_AddTaskUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">args</span>,
        <span class="summary-sig-arg">priority</span>,
        <span class="summary-sig-arg">task_id</span>)</span><br />
      Adds a task to the internal queue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._AddTaskUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#AddTask" class="summary-sig-name">AddTask</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">args</span>,
        <span class="summary-sig-arg">priority</span>=<span class="summary-sig-default">_DEFAULT_PRIORITY</span>,
        <span class="summary-sig-arg">task_id</span>=<span class="summary-sig-default">None</span>)</span><br />
      Adds a task to the queue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.AddTask">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#AddManyTasks" class="summary-sig-name">AddManyTasks</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">tasks</span>,
        <span class="summary-sig-arg">priority</span>=<span class="summary-sig-default">_DEFAULT_PRIORITY</span>,
        <span class="summary-sig-arg">task_id</span>=<span class="summary-sig-default">None</span>)</span><br />
      Add a list of tasks to the queue.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.AddManyTasks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#ChangeTaskPriority" class="summary-sig-name">ChangeTaskPriority</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">task_id</span>,
        <span class="summary-sig-arg">priority</span>)</span><br />
      Changes a task's priority.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.ChangeTaskPriority">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#_WaitForTaskUnlocked" class="summary-sig-name" onclick="show_private();">_WaitForTaskUnlocked</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">worker</span>)</span><br />
      Waits for a task for a worker.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._WaitForTaskUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_ShouldWorkerTerminateUnlocked"></a><span class="summary-sig-name">_ShouldWorkerTerminateUnlocked</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">worker</span>)</span><br />
      Returns whether a worker should terminate.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._ShouldWorkerTerminateUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_HasRunningTasksUnlocked"></a><span class="summary-sig-name">_HasRunningTasksUnlocked</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Checks whether there's a task running in a worker.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._HasRunningTasksUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="HasRunningTasks"></a><span class="summary-sig-name">HasRunningTasks</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Checks whether there's at least one task running.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.HasRunningTasks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="Quiesce"></a><span class="summary-sig-name">Quiesce</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Waits until the task queue is empty.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.Quiesce">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_NewWorkerIdUnlocked"></a><span class="summary-sig-name">_NewWorkerIdUnlocked</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Return an identifier for a new worker.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._NewWorkerIdUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_ResizeUnlocked"></a><span class="summary-sig-name">_ResizeUnlocked</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">num_workers</span>)</span><br />
      Changes the number of workers.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._ResizeUnlocked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#Resize" class="summary-sig-name">Resize</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">num_workers</span>)</span><br />
      Changes the number of workers in the pool.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.Resize">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ganeti.workerpool.WorkerPool-class.html#TerminateWorkers" class="summary-sig-name">TerminateWorkers</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Terminate all worker threads.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.TerminateWorkers">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== INSTANCE VARIABLES ==================== -->
<a name="section-InstanceVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict; (task IDs as keys, tuples as values)</span>
    </td><td class="summary">
        <a name="_taskdata"></a><span class="summary-name">_taskdata</span><br />
      Mapping from task IDs to entries in <a 
      href="ganeti.workerpool.WorkerPool-class.html#_tasks" class="link" 
      onclick="show_private();">_tasks</a>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of tuples</span>
    </td><td class="summary">
        <a href="ganeti.workerpool.WorkerPool-class.html#_tasks" class="summary-name" onclick="show_private();">_tasks</a><br />
      Each tuple has the format (priority, order ID, task ID, arguments).
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">name</span>,
        <span class="sig-arg">num_workers</span>,
        <span class="sig-arg">worker_class</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Constructor for worker pool.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>num_workers</code></strong> - number of workers to be started (dynamic resizing is not yet 
          implemented)</li>
        <li><strong class="pname"><code>worker_class</code></strong> - the class to be instantiated for workers; should derive from <a 
          href="ganeti.workerpool.BaseWorker-class.html" 
          class="link">BaseWorker</a></li>
    </ul></dd>
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="_AddTaskUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_AddTaskUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">args</span>,
        <span class="sig-arg">priority</span>,
        <span class="sig-arg">task_id</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._AddTaskUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Adds a task to the internal queue.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>args</code></strong> (sequence) - Arguments passed to <a 
          href="ganeti.workerpool.BaseWorker-class.html#RunTask" 
          class="link">BaseWorker.RunTask</a></li>
        <li><strong class="pname"><code>priority</code></strong> (number) - Task priority</li>
        <li><strong class="pname"><code>task_id</code></strong> - Task ID</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="AddTask"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AddTask</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">args</span>,
        <span class="sig-arg">priority</span>=<span class="sig-default">_DEFAULT_PRIORITY</span>,
        <span class="sig-arg">task_id</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.AddTask">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Adds a task to the queue.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>args</code></strong> (sequence) - arguments passed to <a 
          href="ganeti.workerpool.BaseWorker-class.html#RunTask" 
          class="link">BaseWorker.RunTask</a></li>
        <li><strong class="pname"><code>priority</code></strong> (number) - Task priority</li>
        <li><strong class="pname"><code>task_id</code></strong> - Task ID</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>Note:</strong>
        The task ID can be essentially anything that can be used as a 
        dictionary key. Callers, however, must ensure a task ID is unique 
        while a task is in the pool or while it might return to the pool 
        due to deferring using <a 
        href="ganeti.workerpool.DeferTask-class.html" 
        class="link">DeferTask</a>.
      </p>
</div></td></tr></table>
</div>
<a name="AddManyTasks"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AddManyTasks</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">tasks</span>,
        <span class="sig-arg">priority</span>=<span class="sig-default">_DEFAULT_PRIORITY</span>,
        <span class="sig-arg">task_id</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.AddManyTasks">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Add a list of tasks to the queue.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>tasks</code></strong> (list of tuples) - list of args passed to <a 
          href="ganeti.workerpool.BaseWorker-class.html#RunTask" 
          class="link">BaseWorker.RunTask</a></li>
        <li><strong class="pname"><code>priority</code></strong> (number or list of numbers) - Priority for all added tasks or a list with the priority for each
          task</li>
        <li><strong class="pname"><code>task_id</code></strong> (list) - List with the ID for each task</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>Note:</strong>
        See <a href="ganeti.workerpool.WorkerPool-class.html#AddTask" 
        class="link">AddTask</a> for a note on task IDs.
      </p>
</div></td></tr></table>
</div>
<a name="ChangeTaskPriority"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ChangeTaskPriority</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">task_id</span>,
        <span class="sig-arg">priority</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.ChangeTaskPriority">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Changes a task's priority.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>task_id</code></strong> - Task ID</li>
        <li><strong class="pname"><code>priority</code></strong> (number) - New task priority</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ganeti.workerpool.NoSuchTask-class.html">NoSuchTask</a></strong></code> - When the task referred by <code>task_id</code> can not be found (it
        may never have existed, may have already been processed, or is 
        currently running)</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_WaitForTaskUnlocked"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_WaitForTaskUnlocked</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">worker</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool._WaitForTaskUnlocked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Waits for a task for a worker.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>worker</code></strong> (<a href="ganeti.workerpool.BaseWorker-class.html" 
          class="link">BaseWorker</a>) - Worker thread</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="Resize"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">Resize</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">num_workers</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.Resize">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Changes the number of workers in the pool.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>num_workers</code></strong> - the new number of workers</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="TerminateWorkers"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">TerminateWorkers</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ganeti.workerpool-pysrc.html#WorkerPool.TerminateWorkers">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Terminate all worker threads.</p>
  <p>Unstarted tasks will be ignored.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== INSTANCE VARIABLE DETAILS ==================== -->
<a name="section-InstanceVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_tasks"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_tasks</h3>
  Each tuple has the format (priority, order ID, task ID, arguments). 
  Priority and order ID are numeric and essentially control the sort order.
  The order ID is an increasing number denoting the order in which tasks 
  are added to the queue. The task ID is controlled by user of workerpool, 
  see <a href="ganeti.workerpool.WorkerPool-class.html#AddTask" 
  class="link">AddTask</a> for details. The task arguments are 
  <code>None</code> for abandoned tasks, otherwise a sequence of arguments 
  to be passed to <a href="ganeti.workerpool.BaseWorker-class.html#RunTask"
  class="link">BaseWorker.RunTask</a>). The list must fulfill the heap 
  property (for use by the <code>heapq</code> module).
  <dl class="fields">
    <dt>Type:</dt>
      <dd>list of tuples</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://code.google.com/p/ganeti/">Ganeti</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Apr  4 13:44:10 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
